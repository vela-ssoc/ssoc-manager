"use strict";(self["webpackChunkssoc"]=self["webpackChunkssoc"]||[]).push([[4135],{62223:function(e,t,o){o.d(t,{N:function(){return $}});var n=o(70655),a=o(10712),i=o(25293),r=o(74438),l=o(44292),s=o(26357),d=o(75797),u=o(36006),h=o(30106),c=o(33051),p=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return e}(),g=function(e){function t(t){return e.call(this,t)||this}return(0,n.ZT)(t,e),t.prototype.getDefaultShape=function(){return new p},t.prototype.buildPath=function(e,t){var o=t.extent;e.moveTo(t.x1,t.y1),e.bezierCurveTo(t.cpx1,t.cpy1,t.cpx2,t.cpy2,t.x2,t.y2),"vertical"===t.orient?(e.lineTo(t.x2+o,t.y2),e.bezierCurveTo(t.cpx2+o,t.cpy2,t.cpx1+o,t.cpy1,t.x1+o,t.y1)):(e.lineTo(t.x2,t.y2+o),e.bezierCurveTo(t.cpx2,t.cpy2+o,t.cpx1,t.cpy1+o,t.x1,t.y1+o)),e.closePath()},t.prototype.highlight=function(){(0,s.fD)(this)},t.prototype.downplay=function(){(0,s.Mh)(this)},t}(a.ZP),y=function(e){function t(){var o=null!==e&&e.apply(this,arguments)||this;return o.type=t.type,o._focusAdjacencyDisabled=!1,o}return(0,n.ZT)(t,e),t.prototype.render=function(e,t,o){var n=this,a=e.getGraph(),r=this.group,l=e.layoutInfo,d=l.width,p=l.height,y=e.getData(),m=e.getData("edge"),x=e.get("orient");this._model=e,r.removeAll(),r.x=l.x,r.y=l.y,a.eachEdge((function(t){var o=new g,n=(0,h.A)(o);n.dataIndex=t.dataIndex,n.seriesIndex=e.seriesIndex,n.dataType="edge";var a,i,l,y,v,w,I,b,M=t.getModel(),L=M.getModel("lineStyle"),N=L.get("curveness"),_=t.node1.getLayout(),S=t.node1.getModel(),D=S.get("localX"),T=S.get("localY"),A=t.node2.getLayout(),C=t.node2.getModel(),R=C.get("localX"),V=C.get("localY"),Z=t.getLayout();o.shape.extent=Math.max(1,Z.dy),o.shape.orient=x,"vertical"===x?(a=(null!=D?D*d:_.x)+Z.sy,i=(null!=T?T*p:_.y)+_.dy,l=(null!=R?R*d:A.x)+Z.ty,y=null!=V?V*p:A.y,v=a,w=i*(1-N)+y*N,I=l,b=i*N+y*(1-N)):(a=(null!=D?D*d:_.x)+_.dx,i=(null!=T?T*p:_.y)+Z.sy,l=null!=R?R*d:A.x,y=(null!=V?V*p:A.y)+Z.ty,v=a*(1-N)+l*N,w=i,I=a*N+l*(1-N),b=y),o.setShape({x1:a,y1:i,x2:l,y2:y,cpx1:v,cpy1:w,cpx2:I,cpy2:b}),o.useStyle(L.getItemStyle()),f(o.style,x,t);var P=""+M.get("value"),E=(0,u.k3)(M,"edgeLabel");(0,u.ni)(o,E,{labelFetcher:{getFormattedLabel:function(t,o,n,a,i,r){return e.getFormattedLabel(t,o,"edge",a,(0,c.retrieve3)(i,E.normal&&E.normal.get("formatter"),P),r)}},labelDataIndex:t.dataIndex,defaultText:P}),o.setTextConfig({position:"inside"});var k=M.getModel("emphasis");(0,s.WO)(o,M,"lineStyle",(function(e){var o=e.getItemStyle();return f(o,x,t),o})),r.add(o),m.setItemGraphicEl(t.dataIndex,o);var G=k.get("focus");(0,s.k5)(o,"adjacency"===G?t.getAdjacentDataIndices():"trajectory"===G?t.getTrajectoryDataIndices():G,k.get("blurScope"),k.get("disabled"))})),a.eachNode((function(t){var o=t.getLayout(),n=t.getModel(),a=n.get("localX"),l=n.get("localY"),c=n.getModel("emphasis"),g=new i.Z({shape:{x:null!=a?a*d:o.x,y:null!=l?l*p:o.y,width:o.dx,height:o.dy},style:n.getModel("itemStyle").getItemStyle(),z2:10});(0,u.ni)(g,(0,u.k3)(n),{labelFetcher:{getFormattedLabel:function(t,o){return e.getFormattedLabel(t,o,"node")}},labelDataIndex:t.dataIndex,defaultText:t.id}),g.disableLabelAnimation=!0,g.setStyle("fill",t.getVisual("color")),g.setStyle("decal",t.getVisual("style").decal),(0,s.WO)(g,n),r.add(g),y.setItemGraphicEl(t.dataIndex,g),(0,h.A)(g).dataType="node";var f=c.get("focus");(0,s.k5)(g,"adjacency"===f?t.getAdjacentDataIndices():"trajectory"===f?t.getTrajectoryDataIndices():f,c.get("blurScope"),c.get("disabled"))})),y.eachItemGraphicEl((function(t,a){var i=y.getItemModel(a);i.get("draggable")&&(t.drift=function(t,i){n._focusAdjacencyDisabled=!0,this.shape.x+=t,this.shape.y+=i,this.dirty(),o.dispatchAction({type:"dragNode",seriesId:e.id,dataIndex:y.getRawIndex(a),localX:this.shape.x/d,localY:this.shape.y/p})},t.ondragend=function(){n._focusAdjacencyDisabled=!1},t.draggable=!0,t.cursor="move")})),!this._data&&e.isAnimationEnabled()&&r.setClipPath(v(r.getBoundingRect(),e,(function(){r.removeClipPath()}))),this._data=e.getData()},t.prototype.dispose=function(){},t.type="sankey",t}(d.Z);function f(e,t,o){switch(e.fill){case"source":e.fill=o.node1.getVisual("color"),e.decal=o.node1.getVisual("style").decal;break;case"target":e.fill=o.node2.getVisual("color"),e.decal=o.node2.getVisual("style").decal;break;case"gradient":var n=o.node1.getVisual("color"),a=o.node2.getVisual("color");(0,c.isString)(n)&&(0,c.isString)(a)&&(e.fill=new r.Z(0,0,+("horizontal"===t),+("vertical"===t),[{color:n,offset:0},{color:a,offset:1}]))}}function v(e,t,o){var n=new i.Z({shape:{x:e.x-10,y:e.y-10,width:0,height:e.height+20}});return l.KZ(n,{shape:{width:e.width+20}},t,o),n}var m=y,x=o(93321),w=o(19638),I=o(12312),b=o(5685),M=function(e){function t(){var o=null!==e&&e.apply(this,arguments)||this;return o.type=t.type,o}return(0,n.ZT)(t,e),t.prototype.getInitialData=function(e,t){var o=e.edges||e.links,n=e.data||e.nodes,a=e.levels;this.levelModels=[];for(var i=this.levelModels,r=0;r<a.length;r++)null!=a[r].depth&&a[r].depth>=0&&(i[a[r].depth]=new I.Z(a[r],this,t));if(n&&o){var l=(0,w.Z)(n,o,this,!0,s);return l.data}function s(e,t){e.wrapMethod("getItemModel",(function(e,t){var o=e.parentModel,n=o.getData().getItemLayout(t);if(n){var a=n.depth,i=o.levelModels[a];i&&(e.parentModel=i)}return e})),t.wrapMethod("getItemModel",(function(e,t){var o=e.parentModel,n=o.getGraph().getEdgeByIndex(t),a=n.node1.getLayout();if(a){var i=a.depth,r=o.levelModels[i];r&&(e.parentModel=r)}return e}))}},t.prototype.setNodePosition=function(e,t){var o=this.option.data||this.option.nodes,n=o[e];n.localX=t[0],n.localY=t[1]},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.formatTooltip=function(e,t,o){function n(e){return isNaN(e)||null==e}if("edge"===o){var a=this.getDataParams(e,o),i=a.data,r=a.value,l=i.source+" -- "+i.target;return(0,b.TX)("nameValue",{name:l,value:r,noValue:n(r)})}var s=this.getGraph().getNodeByIndex(e),d=s.getLayout().value,u=this.getDataParams(e,o).data.name;return(0,b.TX)("nameValue",{name:null!=u?u+"":null,value:d,noValue:n(d)})},t.prototype.optionUpdated=function(){},t.prototype.getDataParams=function(t,o){var n=e.prototype.getDataParams.call(this,t,o);if(null==n.value&&"node"===o){var a=this.getGraph().getNodeByIndex(t),i=a.getLayout().value;n.value=i}return n},t.type="series.sankey",t.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},t}(x.Z),L=M,N=o(76172),_=o(32234);function S(e,t){e.eachSeriesByType("sankey",(function(e){var o=e.get("nodeWidth"),n=e.get("nodeGap"),a=D(e,t);e.layoutInfo=a;var i=a.width,r=a.height,l=e.getGraph(),s=l.nodes,d=l.edges;A(s);var u=c.filter(s,(function(e){return 0===e.getLayout().value})),h=0!==u.length?0:e.get("layoutIterations"),p=e.get("orient"),g=e.get("nodeAlign");T(s,d,o,n,i,r,h,p,g)}))}function D(e,t){return N.ME(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function T(e,t,o,n,a,i,r,l,s){C(e,t,o,a,i,l,s),E(e,t,i,a,n,r,l),j(e,l)}function A(e){c.each(e,(function(e){var t=U(e.outEdges,F),o=U(e.inEdges,F),n=e.getValue()||0,a=Math.max(t,o,n);e.setLayout({value:a},!0)}))}function C(e,t,o,n,a,i,r){for(var l=[],s=[],d=[],u=[],h=0,c=0;c<t.length;c++)l[c]=1;for(c=0;c<e.length;c++)s[c]=e[c].inEdges.length,0===s[c]&&d.push(e[c]);var p=-1;while(d.length){for(var g=0;g<d.length;g++){var y=d[g],f=y.hostGraph.data.getRawDataItem(y.dataIndex),v=null!=f.depth&&f.depth>=0;v&&f.depth>p&&(p=f.depth),y.setLayout({depth:v?f.depth:h},!0),"vertical"===i?y.setLayout({dy:o},!0):y.setLayout({dx:o},!0);for(var m=0;m<y.outEdges.length;m++){var x=y.outEdges[m],w=t.indexOf(x);l[w]=0;var I=x.node2,b=e.indexOf(I);0===--s[b]&&u.indexOf(I)<0&&u.push(I)}}++h,d=u,u=[]}for(c=0;c<l.length;c++)if(1===l[c])throw new Error("Sankey is a DAG, the original data has cycle!");var M=p>h-1?p:h-1;r&&"left"!==r&&V(e,r,i,M);var L="vertical"===i?(a-o)/M:(n-o)/M;P(e,L,i)}function R(e){var t=e.hostGraph.data.getRawDataItem(e.dataIndex);return null!=t.depth&&t.depth>=0}function V(e,t,o,n){if("right"===t){var a=[],i=e,r=0;while(i.length){for(var l=0;l<i.length;l++){var s=i[l];s.setLayout({skNodeHeight:r},!0);for(var d=0;d<s.inEdges.length;d++){var u=s.inEdges[d];a.indexOf(u.node1)<0&&a.push(u.node1)}}i=a,a=[],++r}c.each(e,(function(e){R(e)||e.setLayout({depth:Math.max(0,n-e.getLayout().skNodeHeight)},!0)}))}else"justify"===t&&Z(e,n)}function Z(e,t){c.each(e,(function(e){R(e)||e.outEdges.length||e.setLayout({depth:t},!0)}))}function P(e,t,o){c.each(e,(function(e){var n=e.getLayout().depth*t;"vertical"===o?e.setLayout({y:n},!0):e.setLayout({x:n},!0)}))}function E(e,t,o,n,a,i,r){var l=k(e,r);G(l,t,o,n,a,r),z(l,a,o,n,r);for(var s=1;i>0;i--)s*=.99,B(l,s,r),z(l,a,o,n,r),q(l,s,r),z(l,a,o,n,r)}function k(e,t){var o=[],n="vertical"===t?"y":"x",a=(0,_.pv)(e,(function(e){return e.getLayout()[n]}));return a.keys.sort((function(e,t){return e-t})),c.each(a.keys,(function(e){o.push(a.buckets.get(e))})),o}function G(e,t,o,n,a,i){var r=1/0;c.each(e,(function(e){var t=e.length,l=0;c.each(e,(function(e){l+=e.getLayout().value}));var s="vertical"===i?(n-(t-1)*a)/l:(o-(t-1)*a)/l;s<r&&(r=s)})),c.each(e,(function(e){c.each(e,(function(e,t){var o=e.getLayout().value*r;"vertical"===i?(e.setLayout({x:t},!0),e.setLayout({dx:o},!0)):(e.setLayout({y:t},!0),e.setLayout({dy:o},!0))}))})),c.each(t,(function(e){var t=+e.getValue()*r;e.setLayout({dy:t},!0)}))}function z(e,t,o,n,a){var i="vertical"===a?"x":"y";c.each(e,(function(e){var r,l,s;e.sort((function(e,t){return e.getLayout()[i]-t.getLayout()[i]}));for(var d=0,u=e.length,h="vertical"===a?"dx":"dy",c=0;c<u;c++)l=e[c],s=d-l.getLayout()[i],s>0&&(r=l.getLayout()[i]+s,"vertical"===a?l.setLayout({x:r},!0):l.setLayout({y:r},!0)),d=l.getLayout()[i]+l.getLayout()[h]+t;var p="vertical"===a?n:o;if(s=d-t-p,s>0){r=l.getLayout()[i]-s,"vertical"===a?l.setLayout({x:r},!0):l.setLayout({y:r},!0),d=r;for(c=u-2;c>=0;--c)l=e[c],s=l.getLayout()[i]+l.getLayout()[h]+t-d,s>0&&(r=l.getLayout()[i]-s,"vertical"===a?l.setLayout({x:r},!0):l.setLayout({y:r},!0)),d=l.getLayout()[i]}}))}function B(e,t,o){c.each(e.slice().reverse(),(function(e){c.each(e,(function(e){if(e.outEdges.length){var n=U(e.outEdges,X,o)/U(e.outEdges,F);if(isNaN(n)){var a=e.outEdges.length;n=a?U(e.outEdges,O,o)/a:0}if("vertical"===o){var i=e.getLayout().x+(n-H(e,o))*t;e.setLayout({x:i},!0)}else{var r=e.getLayout().y+(n-H(e,o))*t;e.setLayout({y:r},!0)}}}))}))}function X(e,t){return H(e.node2,t)*e.getValue()}function O(e,t){return H(e.node2,t)}function W(e,t){return H(e.node1,t)*e.getValue()}function Y(e,t){return H(e.node1,t)}function H(e,t){return"vertical"===t?e.getLayout().x+e.getLayout().dx/2:e.getLayout().y+e.getLayout().dy/2}function F(e){return e.getValue()}function U(e,t,o){var n=0,a=e.length,i=-1;while(++i<a){var r=+t(e[i],o);isNaN(r)||(n+=r)}return n}function q(e,t,o){c.each(e,(function(e){c.each(e,(function(e){if(e.inEdges.length){var n=U(e.inEdges,W,o)/U(e.inEdges,F);if(isNaN(n)){var a=e.inEdges.length;n=a?U(e.inEdges,Y,o)/a:0}if("vertical"===o){var i=e.getLayout().x+(n-H(e,o))*t;e.setLayout({x:i},!0)}else{var r=e.getLayout().y+(n-H(e,o))*t;e.setLayout({y:r},!0)}}}))}))}function j(e,t){var o="vertical"===t?"x":"y";c.each(e,(function(e){e.outEdges.sort((function(e,t){return e.node2.getLayout()[o]-t.node2.getLayout()[o]})),e.inEdges.sort((function(e,t){return e.node1.getLayout()[o]-t.node1.getLayout()[o]}))})),c.each(e,(function(e){var t=0,o=0;c.each(e.outEdges,(function(e){e.setLayout({sy:t},!0),t+=e.getLayout().dy})),c.each(e.inEdges,(function(e){e.setLayout({ty:o},!0),o+=e.getLayout().dy}))}))}var K=o(59937);function J(e){e.eachSeriesByType("sankey",(function(e){var t=e.getGraph(),o=t.nodes,n=t.edges;if(o.length){var a=1/0,i=-1/0;c.each(o,(function(e){var t=e.getLayout().value;t<a&&(a=t),t>i&&(i=t)})),c.each(o,(function(t){var o=new K.Z({type:"color",mappingMethod:"linear",dataExtent:[a,i],visual:e.get("color")}),n=o.mapValueToVisual(t.getLayout().value),r=t.getModel().get(["itemStyle","color"]);null!=r?(t.setVisual("color",r),t.setVisual("style",{fill:r})):(t.setVisual("color",n),t.setVisual("style",{fill:n}))}))}n.length&&c.each(n,(function(e){var t=e.getModel().get("lineStyle");e.setVisual("style",t)}))}))}function $(e){e.registerChartView(m),e.registerSeriesModel(L),e.registerLayout(S),e.registerVisual(J),e.registerAction({type:"dragNode",event:"dragnode",update:"update"},(function(e,t){t.eachComponent({mainType:"series",subType:"sankey",query:e},(function(t){t.setNodePosition(e.dataIndex,[e.localX,e.localY])}))}))}},14314:function(e,t,o){o.d(t,{N:function(){return f}});var n=o(68023),a=o(70655),i=o(35144),r=o(93321),l=function(e){function t(){var o=null!==e&&e.apply(this,arguments)||this;return o.type=t.type,o.hasSymbolVisual=!0,o}return(0,a.ZT)(t,e),t.prototype.getInitialData=function(e,t){return(0,i.Z)(null,this,{useEncodeDefaulter:!0})},t.prototype.getProgressive=function(){var e=this.option.progressive;return null==e?this.option.large?5e3:this.get("progressive"):e},t.prototype.getProgressiveThreshold=function(){var e=this.option.progressiveThreshold;return null==e?this.option.large?1e4:this.get("progressiveThreshold"):e},t.prototype.brushSelector=function(e,t,o){return o.point(t.getItemLayout(e))},t.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},t.type="series.scatter",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},t}(r.Z),s=l,d=o(68162),u=o(48066),h=o(21149),c=o(75797),p=function(e){function t(){var o=null!==e&&e.apply(this,arguments)||this;return o.type=t.type,o}return(0,a.ZT)(t,e),t.prototype.render=function(e,t,o){var n=e.getData(),a=this._updateSymbolDraw(n,e);a.updateData(n,{clipShape:this._getClipShape(e)}),this._finished=!0},t.prototype.incrementalPrepareRender=function(e,t,o){var n=e.getData(),a=this._updateSymbolDraw(n,e);a.incrementalPrepareUpdate(n),this._finished=!1},t.prototype.incrementalRender=function(e,t,o){this._symbolDraw.incrementalUpdate(e,t.getData(),{clipShape:this._getClipShape(t)}),this._finished=e.end===t.getData().count()},t.prototype.updateTransform=function(e,t,o){var n=e.getData();if(this.group.dirty(),!this._finished||n.count()>1e4)return{update:!0};var a=(0,h.Z)("").reset(e,t,o);a.progress&&a.progress({start:0,end:n.count(),count:n.count()},n),this._symbolDraw.updateLayout(n)},t.prototype.eachRendered=function(e){this._symbolDraw&&this._symbolDraw.eachRendered(e)},t.prototype._getClipShape=function(e){var t=e.coordinateSystem,o=t&&t.getArea&&t.getArea();return e.get("clip",!0)?o:null},t.prototype._updateSymbolDraw=function(e,t){var o=this._symbolDraw,n=t.pipelineContext,a=n.large;return o&&a===this._isLargeDraw||(o&&o.remove(),o=this._symbolDraw=a?new u.Z:new d.Z,this._isLargeDraw=a,this.group.removeAll()),this.group.add(o.group),o},t.prototype.remove=function(e,t){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},t.prototype.dispose=function(){},t.type="scatter",t}(c.Z),g=p,y=o(97111);function f(e){(0,n.D)(y.N),e.registerSeriesModel(s),e.registerChartView(g),e.registerLayout((0,h.Z)("scatter"))}},44036:function(e,t,o){o.d(t,{N:function(){return W}});var n=o(70655),a=o(33051),i=o(75797),r=o(96498),l=o(44292),s=o(97782),d=o(26357),u=o(36006),h=o(30106),c=o(21249),p=o(59361),g=o(3266),y=2,f=4,v=function(e){function t(t,o,n,a){var i=e.call(this)||this;i.z2=y,i.textConfig={inside:!0},(0,h.A)(i).seriesIndex=o.seriesIndex;var l=new r.ZP({z2:f,silent:t.getModel().get(["label","silent"])});return i.setTextContent(l),i.updateData(!0,t,o,n,a),i}return(0,n.ZT)(t,e),t.prototype.updateData=function(e,t,o,n,i){this.node=t,t.piece=this,o=o||this._seriesModel,n=n||this._ecModel;var r=this;(0,h.A)(r).dataIndex=t.dataIndex;var s=t.getModel(),u=s.getModel("emphasis"),g=t.getLayout(),y=a.extend({},g);y.label=null;var f=t.getVisual("style");f.lineJoin="bevel";var v=t.getVisual("decal");v&&(f.decal=(0,p.I)(v,i));var m=(0,c.T)(s.getModel("itemStyle"),y,!0);a.extend(y,m),a.each(d.L1,(function(e){var t=r.ensureState(e),o=s.getModel([e,"itemStyle"]);t.style=o.getItemStyle();var n=(0,c.T)(o,y);n&&(t.shape=n)})),e?(r.setShape(y),r.shape.r=g.r0,l.KZ(r,{shape:{r:g.r}},o,t.dataIndex)):(l.D(r,{shape:y},o),(0,l.Zi)(r)),r.useStyle(f),this._updateLabel(o);var x=s.getShallow("cursor");x&&r.attr("cursor",x),this._seriesModel=o||this._seriesModel,this._ecModel=n||this._ecModel;var w=u.get("focus"),I="ancestor"===w?t.getAncestorsIndices():"descendant"===w?t.getDescendantIndices():w;(0,d.k5)(this,I,u.get("blurScope"),u.get("disabled"))},t.prototype._updateLabel=function(e){var t=this,o=this.node.getModel(),n=o.getModel("label"),i=this.node.getLayout(),r=i.endAngle-i.startAngle,l=(i.startAngle+i.endAngle)/2,s=Math.cos(l),h=Math.sin(l),c=this,p=c.getTextContent(),y=this.node.dataIndex,f=n.get("minAngle")/180*Math.PI,v=n.get("show")&&!(null!=f&&Math.abs(r)<f);function m(e,t){var o=e.get(t);return null==o?n.get(t):o}p.ignore=!v,a.each(d.qc,(function(n){var d="normal"===n?o.getModel("label"):o.getModel([n,"label"]),f="normal"===n,v=f?p:p.ensureState(n),x=e.getFormattedLabel(y,n);f&&(x=x||t.node.name),v.style=(0,u.Lr)(d,{},null,"normal"!==n,!0),x&&(v.style.text=x);var w=d.get("show");null==w||f||(v.ignore=!w);var I,b=m(d,"position"),M=f?c:c.states[n],L=M.style.fill;M.textConfig={outsideFill:"inherit"===d.get("color")?L:null,inside:"outside"!==b};var N=m(d,"distance")||0,_=m(d,"align");"outside"===b?(I=i.r+N,_=l>Math.PI/2?"right":"left"):_&&"center"!==_?"left"===_?(I=i.r0+N,l>Math.PI/2&&(_="right")):"right"===_&&(I=i.r-N,l>Math.PI/2&&(_="left")):(I=r===2*Math.PI&&0===i.r0?0:(i.r+i.r0)/2,_="center"),v.style.align=_,v.style.verticalAlign=m(d,"verticalAlign")||"middle",v.x=I*s+i.cx,v.y=I*h+i.cy;var S=m(d,"rotate"),D=0;"radial"===S?(D=(0,g.m)(-l),D>Math.PI/2&&D<1.5*Math.PI&&(D+=Math.PI)):"tangential"===S?(D=Math.PI/2-l,D>Math.PI/2?D-=Math.PI:D<-Math.PI/2&&(D+=Math.PI)):a.isNumber(S)&&(D=S*Math.PI/180),v.rotation=(0,g.m)(D)})),p.dirtyStyle()},t}(s.C),m=v,x=o(4130),w=o(68833),I="sunburstRootToNode",b="sunburstHighlight",M="sunburstUnhighlight";function L(e){e.registerAction({type:I,update:"updateView"},(function(e,t){function o(t,o){var n=(0,w.d1)(e,[I],t);if(n){var a=t.getViewRoot();a&&(e.direction=(0,w.Gx)(a,n.node)?"rollUp":"drillDown"),t.resetViewRoot(n.node)}}t.eachComponent({mainType:"series",subType:"sunburst",query:e},o)})),e.registerAction({type:b,update:"none"},(function(e,t,o){function n(t){var o=(0,w.d1)(e,[b],t);o&&(e.dataIndex=o.node.dataIndex)}e=(0,a.extend)({},e),t.eachComponent({mainType:"series",subType:"sunburst",query:e},n),o.dispatchAction((0,a.extend)(e,{type:"highlight"}))})),e.registerAction({type:M,update:"updateView"},(function(e,t,o){e=(0,a.extend)({},e),o.dispatchAction((0,a.extend)(e,{type:"downplay"}))}))}var N=o(78988),_=function(e){function t(){var o=null!==e&&e.apply(this,arguments)||this;return o.type=t.type,o}return(0,n.ZT)(t,e),t.prototype.render=function(e,t,o,n){var i=this;this.seriesModel=e,this.api=o,this.ecModel=t;var r=e.getData(),l=r.tree.root,s=e.getViewRoot(),d=this.group,u=e.get("renderLabelForZeroData"),h=[];s.eachNode((function(e){h.push(e)}));var c=this._oldChildren||[];function p(e,t){function o(e){return e.getId()}function n(o,n){var a=null==o?null:e[o],i=null==n?null:t[n];g(a,i)}0===e.length&&0===t.length||new x.Z(t,e,o,o).add(n).update(n).remove(a.curry(n,null)).execute()}function g(n,a){if(u||!n||n.getValue()||(n=null),n!==l&&a!==l)if(a&&a.piece)n?(a.piece.updateData(!1,n,e,t,o),r.setItemGraphicEl(n.dataIndex,a.piece)):y(a);else if(n){var i=new m(n,e,t,o);d.add(i),r.setItemGraphicEl(n.dataIndex,i)}}function y(e){e&&e.piece&&(d.remove(e.piece),e.piece=null)}function f(n,a){a.depth>0?(i.virtualPiece?i.virtualPiece.updateData(!1,n,e,t,o):(i.virtualPiece=new m(n,e,t,o),d.add(i.virtualPiece)),a.piece.off("click"),i.virtualPiece.on("click",(function(e){i._rootToNode(a.parentNode)}))):i.virtualPiece&&(d.remove(i.virtualPiece),i.virtualPiece=null)}p(h,c),f(l,s),this._initEvents(),this._oldChildren=h},t.prototype._initEvents=function(){var e=this;this.group.off("click"),this.group.on("click",(function(t){var o=!1,n=e.seriesModel.getViewRoot();n.eachNode((function(n){if(!o&&n.piece&&n.piece===t.target){var a=n.getModel().get("nodeClick");if("rootToNode"===a)e._rootToNode(n);else if("link"===a){var i=n.getModel(),r=i.get("link");if(r){var l=i.get("target",!0)||"_blank";(0,N.MI)(r,l)}}o=!0}}))}))},t.prototype._rootToNode=function(e){e!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:I,from:this.uid,seriesId:this.seriesModel.id,targetNode:e})},t.prototype.containPoint=function(e,t){var o=t.getData(),n=o.getItemLayout(0);if(n){var a=e[0]-n.cx,i=e[1]-n.cy,r=Math.sqrt(a*a+i*i);return r<=n.r&&r>=n.r0}},t.type="sunburst",t}(i.Z),S=_,D=o(93321),T=o(9327),A=o(12312),C=o(41903),R=function(e){function t(){var o=null!==e&&e.apply(this,arguments)||this;return o.type=t.type,o.ignoreStyleOnData=!0,o}return(0,n.ZT)(t,e),t.prototype.getInitialData=function(e,t){var o={name:e.name,children:e.data};V(o);var n=this._levelModels=a.map(e.levels||[],(function(e){return new A.Z(e,this,t)}),this),i=T.Z.createTree(o,this,r);function r(e){e.wrapMethod("getItemModel",(function(e,t){var o=i.getNodeByDataIndex(t),a=n[o.depth];return a&&(e.parentModel=a),e}))}return i.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.getDataParams=function(t){var o=e.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(t);return o.treePathInfo=(0,w.n3)(n,this),o},t.prototype.getLevelModel=function(e){return this._levelModels&&this._levelModels[e.depth]},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var t=this.getRawData().tree.root;e&&(e===t||t.contains(e))||(this._viewRoot=t)},t.prototype.enableAriaDecal=function(){(0,C.Z)(this)},t.type="series.sunburst",t.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},t}(D.Z);function V(e){var t=0;a.each(e.children,(function(e){V(e);var o=e.value;a.isArray(o)&&(o=o[0]),t+=o}));var o=e.value;a.isArray(o)&&(o=o[0]),(null==o||isNaN(o))&&(o=t),o<0&&(o=0),a.isArray(e.value)?e.value[0]=o:e.value=o}var Z=R,P=o(85669),E=Math.PI/180;function k(e,t,o){t.eachSeriesByType(e,(function(e){var t=e.get("center"),n=e.get("radius");a.isArray(n)||(n=[0,n]),a.isArray(t)||(t=[t,t]);var i=o.getWidth(),r=o.getHeight(),l=Math.min(i,r),s=(0,P.GM)(t[0],i),d=(0,P.GM)(t[1],r),u=(0,P.GM)(n[0],l/2),h=(0,P.GM)(n[1],l/2),c=-e.get("startAngle")*E,p=e.get("minAngle")*E,g=e.getData().tree.root,y=e.getViewRoot(),f=y.depth,v=e.get("sort");null!=v&&G(y,v);var m=0;a.each(y.children,(function(e){!isNaN(e.getValue())&&m++}));var x=y.getValue(),w=Math.PI/(x||m)*2,I=y.depth>0,b=y.height-(I?-1:1),M=(h-u)/(b||1),L=e.get("clockwise"),N=e.get("stillShowZeroSum"),_=L?1:-1,S=function(t,o){if(t){var n=o;if(t!==g){var i=t.getValue(),r=0===x&&N?w:i*w;r<p&&(r=p),n=o+_*r;var h=t.depth-f-(I?-1:1),c=u+M*h,y=u+M*(h+1),v=e.getLevelModel(t);if(v){var m=v.get("r0",!0),b=v.get("r",!0),D=v.get("radius",!0);null!=D&&(m=D[0],b=D[1]),null!=m&&(c=(0,P.GM)(m,l/2)),null!=b&&(y=(0,P.GM)(b,l/2))}t.setLayout({angle:r,startAngle:o,endAngle:n,clockwise:L,cx:s,cy:d,r0:c,r:y})}if(t.children&&t.children.length){var T=0;a.each(t.children,(function(e){T+=S(e,o+T)}))}return n-o}};if(I){var D=u,T=u+M,A=2*Math.PI;g.setLayout({angle:A,startAngle:c,endAngle:c+A,clockwise:L,cx:s,cy:d,r0:D,r:T})}S(y,c)}))}function G(e,t){var o=e.children||[];e.children=z(o,t),o.length&&a.each(e.children,(function(e){G(e,t)}))}function z(e,t){if(a.isFunction(t)){var o=a.map(e,(function(e,t){var o=e.getValue();return{params:{depth:e.depth,height:e.height,dataIndex:e.dataIndex,getValue:function(){return o}},index:t}}));return o.sort((function(e,o){return t(e.params,o.params)})),a.map(o,(function(t){return e[t.index]}))}var n="asc"===t;return e.sort((function(e,t){var o=(e.getValue()-t.getValue())*(n?1:-1);return 0===o?(e.dataIndex-t.dataIndex)*(n?-1:1):o}))}var B=o(21092);function X(e){var t={};function o(e,o,n){var i=e;while(i&&i.depth>1)i=i.parentNode;var r=o.getColorFromPalette(i.name||i.dataIndex+"",t);return e.depth>1&&(0,a.isString)(r)&&(r=(0,B.lift)(r,(e.depth-1)/(n-1)*.5)),r}e.eachSeriesByType("sunburst",(function(e){var t=e.getData(),n=t.tree;n.eachNode((function(i){var r=i.getModel(),l=r.getModel("itemStyle").getItemStyle();l.fill||(l.fill=o(i,e,n.root.height));var s=t.ensureUniqueItemVisual(i.dataIndex,"style");(0,a.extend)(s,l)}))}))}var O=o(22528);function W(e){e.registerChartView(S),e.registerSeriesModel(Z),e.registerLayout((0,a.curry)(k,"sunburst")),e.registerProcessor((0,a.curry)(O.Z,"sunburst")),e.registerVisual(X),L(e)}},4182:function(e,t,o){o.d(t,{N:function(){return C}});var n=o(70655),a=o(30633),i=o(38154),r=o(44292),l=o(25293),s=o(26357),d=o(36006),u=o(33051),h=o(4130),c=o(75797),p=function(e){function t(){var o=null!==e&&e.apply(this,arguments)||this;return o.type=t.type,o._layers=[],o}return(0,n.ZT)(t,e),t.prototype.render=function(e,t,o){var n=e.getData(),l=this,c=this.group,p=e.getLayerSeries(),y=n.getLayout("layoutInfo"),f=y.rect,v=y.boundaryGap;function m(e){return e.name}c.x=0,c.y=f.y+v[0];var x=new h.Z(this._layersSeries||[],p,m,m),w=[];function I(t,o,u){var h=l._layers;if("remove"!==t){for(var y,f,v=[],m=[],x=p[o].indices,I=0;I<x.length;I++){var b=n.getItemLayout(x[I]),M=b.x,L=b.y0,N=b.y;v.push(M,L),m.push(M,L+N),y=n.getItemVisual(x[I],"style")}var _=n.getItemLayout(x[0]),S=e.getModel("label"),D=S.get("margin"),T=e.getModel("emphasis");if("add"===t){var A=w[o]=new i.Z;f=new a.K({shape:{points:v,stackedOnPoints:m,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),A.add(f),c.add(A),e.isAnimationEnabled()&&f.setClipPath(g(f.getBoundingRect(),e,(function(){f.removeClipPath()})))}else{A=h[u];f=A.childAt(0),c.add(A),w[o]=A,r.D(f,{shape:{points:v,stackedOnPoints:m}},e),(0,r.Zi)(f)}(0,d.ni)(f,(0,d.k3)(e),{labelDataIndex:x[I-1],defaultText:n.getName(x[I-1]),inheritColor:y.fill},{normal:{verticalAlign:"middle"}}),f.setTextConfig({position:null,local:!0});var C=f.getTextContent();C&&(C.x=_.x-D,C.y=_.y0+_.y/2),f.useStyle(y),n.setItemGraphicEl(o,f),(0,s.WO)(f,e),(0,s.k5)(f,T.get("focus"),T.get("blurScope"),T.get("disabled"))}else c.remove(h[o])}x.add((0,u.bind)(I,this,"add")).update((0,u.bind)(I,this,"update")).remove((0,u.bind)(I,this,"remove")).execute(),this._layersSeries=p,this._layers=w},t.type="themeRiver",t}(c.Z);function g(e,t,o){var n=new l.Z({shape:{x:e.x-10,y:e.y-10,width:0,height:e.height+20}});return r.KZ(n,{shape:{x:e.x-50,width:e.width+100,height:e.height+20}},t,o),n}var y=p,f=o(93321),v=o(55623),m=o(10381),x=o(5101),w=o(32234),I=o(72019),b=o(5685),M=2,L=function(e){function t(){var o=null!==e&&e.apply(this,arguments)||this;return o.type=t.type,o}return(0,n.ZT)(t,e),t.prototype.init=function(t){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new I.Z(u.bind(this.getData,this),u.bind(this.getRawData,this))},t.prototype.fixData=function(e){var t=e.length,o={},n=(0,w.pv)(e,(function(e){return o.hasOwnProperty(e[0]+"")||(o[e[0]+""]=-1),e[2]})),a=[];n.buckets.each((function(e,t){a.push({name:t,dataList:e})}));for(var i=a.length,r=0;r<i;++r){for(var l=a[r].name,s=0;s<a[r].dataList.length;++s){var d=a[r].dataList[s][0]+"";o[d]=r}for(var d in o)o.hasOwnProperty(d)&&o[d]!==r&&(o[d]=r,e[t]=[d,0,l],t++)}return e},t.prototype.getInitialData=function(e,t){for(var o=this.getReferringComponents("singleAxis",w.C6).models[0],n=o.get("type"),a=u.filter(e.data,(function(e){return void 0!==e[2]})),i=this.fixData(a||[]),r=[],l=this.nameMap=u.createHashMap(),s=0,d=0;d<i.length;++d)r.push(i[d][M]),l.get(i[d][M])||(l.set(i[d][M],s),s++);var h=(0,v.Z)(i,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:(0,m.T)(n)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,c=new x.Z(h,this);return c.initData(i),c},t.prototype.getLayerSeries=function(){for(var e=this.getData(),t=e.count(),o=[],n=0;n<t;++n)o[n]=n;var a=e.mapDimension("single"),i=(0,w.pv)(o,(function(t){return e.get("name",t)})),r=[];return i.buckets.each((function(t,o){t.sort((function(t,o){return e.get(a,t)-e.get(a,o)})),r.push({name:o,indices:t})})),r},t.prototype.getAxisTooltipData=function(e,t,o){u.isArray(e)||(e=e?[e]:[]);for(var n,a=this.getData(),i=this.getLayerSeries(),r=[],l=i.length,s=0;s<l;++s){for(var d=Number.MAX_VALUE,h=-1,c=i[s].indices.length,p=0;p<c;++p){var g=a.get(e[0],i[s].indices[p]),y=Math.abs(g-t);y<=d&&(n=g,d=y,h=i[s].indices[p])}r.push(h)}return{dataIndices:r,nestestValue:n}},t.prototype.formatTooltip=function(e,t,o){var n=this.getData(),a=n.getName(e),i=n.get(n.mapDimension("value"),e);return(0,b.TX)("nameValue",{name:a,value:i})},t.type="series.themeRiver",t.dependencies=["singleAxis"],t.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},t}(f.Z),N=L,_=o(85669);function S(e,t){e.eachSeriesByType("themeRiver",(function(e){var t=e.getData(),o=e.coordinateSystem,n={},a=o.getRect();n.rect=a;var i=e.get("boundaryGap"),r=o.getAxis();if(n.boundaryGap=i,"horizontal"===r.orient){i[0]=_.GM(i[0],a.height),i[1]=_.GM(i[1],a.height);var l=a.height-i[0]-i[1];D(t,e,l)}else{i[0]=_.GM(i[0],a.width),i[1]=_.GM(i[1],a.width);var s=a.width-i[0]-i[1];D(t,e,s)}t.setLayout("layoutInfo",n)}))}function D(e,t,o){if(e.count())for(var n,a=t.coordinateSystem,i=t.getLayerSeries(),r=e.mapDimension("single"),l=e.mapDimension("value"),s=u.map(i,(function(t){return u.map(t.indices,(function(t){var o=a.dataToPoint(e.get(r,t));return o[1]=e.get(l,t),o}))})),d=T(s),h=d.y0,c=o/d.max,p=i.length,g=i[0].indices.length,y=0;y<g;++y){n=h[y]*c,e.setItemLayout(i[0].indices[y],{layerIndex:0,x:s[0][y][0],y0:n,y:s[0][y][1]*c});for(var f=1;f<p;++f)n+=s[f-1][y][1]*c,e.setItemLayout(i[f].indices[y],{layerIndex:f,x:s[f][y][0],y0:n,y:s[f][y][1]*c})}}function T(e){for(var t=e.length,o=e[0].length,n=[],a=[],i=0,r=0;r<o;++r){for(var l=0,s=0;s<t;++s)l+=e[s][r][1];l>i&&(i=l),n.push(l)}for(var d=0;d<o;++d)a[d]=(i-n[d])/2;i=0;for(var u=0;u<o;++u){var h=n[u]+a[u];h>i&&(i=h)}return{y0:a,max:i}}var A=o(22528);function C(e){e.registerChartView(y),e.registerSeriesModel(N),e.registerLayout(S),e.registerProcessor((0,A.Z)("themeRiver"))}},29056:function(e,t,o){o.d(t,{N:function(){return ae}});var n=o(70655),a=o(33051),i=o(38154),r=o(44292),l=o(54174),s=o(30106),d=o(66351),u=o(76172);function h(e){var t=e;t.hierNode={defaultAncestor:null,ancestor:t,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};var o,n,a=[t];while(o=a.pop())if(n=o.children,o.isExpand&&n.length)for(var i=n.length,r=i-1;r>=0;r--){var l=n[r];l.hierNode={defaultAncestor:null,ancestor:l,prelim:0,modifier:0,change:0,shift:0,i:r,thread:null},a.push(l)}}function c(e,t){var o=e.isExpand?e.children:[],n=e.parentNode.children,a=e.hierNode.i?n[e.hierNode.i-1]:null;if(o.length){v(e);var i=(o[0].hierNode.prelim+o[o.length-1].hierNode.prelim)/2;a?(e.hierNode.prelim=a.hierNode.prelim+t(e,a),e.hierNode.modifier=e.hierNode.prelim-i):e.hierNode.prelim=i}else a&&(e.hierNode.prelim=a.hierNode.prelim+t(e,a));e.parentNode.hierNode.defaultAncestor=m(e,a,e.parentNode.hierNode.defaultAncestor||n[0],t)}function p(e){var t=e.hierNode.prelim+e.parentNode.hierNode.modifier;e.setLayout({x:t},!0),e.hierNode.modifier+=e.parentNode.hierNode.modifier}function g(e){return arguments.length?e:M}function y(e,t){return e-=Math.PI/2,{x:t*Math.cos(e),y:t*Math.sin(e)}}function f(e,t){return u.ME(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function v(e){var t=e.children,o=t.length,n=0,a=0;while(--o>=0){var i=t[o];i.hierNode.prelim+=n,i.hierNode.modifier+=n,a+=i.hierNode.change,n+=i.hierNode.shift+a}}function m(e,t,o,n){if(t){var a=e,i=e,r=i.parentNode.children[0],l=t,s=a.hierNode.modifier,d=i.hierNode.modifier,u=r.hierNode.modifier,h=l.hierNode.modifier;while(l=x(l),i=w(i),l&&i){a=x(a),r=w(r),a.hierNode.ancestor=e;var c=l.hierNode.prelim+h-i.hierNode.prelim-d+n(l,i);c>0&&(b(I(l,e,o),e,c),d+=c,s+=c),h+=l.hierNode.modifier,d+=i.hierNode.modifier,s+=a.hierNode.modifier,u+=r.hierNode.modifier}l&&!x(a)&&(a.hierNode.thread=l,a.hierNode.modifier+=h-s),i&&!w(r)&&(r.hierNode.thread=i,r.hierNode.modifier+=d-u,o=e)}return o}function x(e){var t=e.children;return t.length&&e.isExpand?t[t.length-1]:e.hierNode.thread}function w(e){var t=e.children;return t.length&&e.isExpand?t[0]:e.hierNode.thread}function I(e,t,o){return e.hierNode.ancestor.parentNode===t.parentNode?e.hierNode.ancestor:o}function b(e,t,o){var n=o/(t.hierNode.i-e.hierNode.i);t.hierNode.change-=n,t.hierNode.shift+=o,t.hierNode.modifier+=o,t.hierNode.prelim+=o,e.hierNode.change+=n}function M(e,t){return e.parentNode===t.parentNode?1:2}var L=o(3726),N=o(23845),_=o(31194),S=o(9176),D=o(61485),T=o(85669),A=o(75797),C=o(10712),R=o(26357),V=function(){function e(){this.parentPoint=[],this.childPoints=[]}return e}(),Z=function(e){function t(t){return e.call(this,t)||this}return(0,n.ZT)(t,e),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new V},t.prototype.buildPath=function(e,t){var o=t.childPoints,n=o.length,a=t.parentPoint,i=o[0],r=o[n-1];if(1===n)return e.moveTo(a[0],a[1]),void e.lineTo(i[0],i[1]);var l=t.orient,s="TB"===l||"BT"===l?0:1,d=1-s,u=(0,T.GM)(t.forkPosition,1),h=[];h[s]=a[s],h[d]=a[d]+(r[d]-a[d])*u,e.moveTo(a[0],a[1]),e.lineTo(h[0],h[1]),e.moveTo(i[0],i[1]),h[s]=i[s],e.lineTo(h[0],h[1]),h[s]=r[s],e.lineTo(h[0],h[1]),e.lineTo(r[0],r[1]);for(var c=1;c<n-1;c++){var p=o[c];e.moveTo(p[0],p[1]),h[s]=p[s],e.lineTo(h[0],h[1])}},t}(C.ZP),P=function(e){function t(){var o=null!==e&&e.apply(this,arguments)||this;return o.type=t.type,o._mainGroup=new i.Z,o}return(0,n.ZT)(t,e),t.prototype.init=function(e,t){this._controller=new S.Z(t.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},t.prototype.render=function(e,t,o){var n=e.getData(),a=e.layoutInfo,i=this._mainGroup,r=e.get("layout");"radial"===r?(i.x=a.x+a.width/2,i.y=a.y+a.height/2):(i.x=a.x,i.y=a.y),this._updateViewCoordSys(e,o),this._updateController(e,t,o);var l=this._data;n.diff(l).add((function(t){E(n,t)&&k(n,t,null,i,e)})).update((function(t,o){var a=l.getItemGraphicEl(o);E(n,t)?k(n,t,a,i,e):a&&X(l,o,a,i,e)})).remove((function(t){var o=l.getItemGraphicEl(t);o&&X(l,t,o,i,e)})).execute(),this._nodeScaleRatio=e.get("nodeScaleRatio"),this._updateNodeAndLinkScale(e),!0===e.get("expandAndCollapse")&&n.eachItemGraphicEl((function(t,n){t.off("click").on("click",(function(){o.dispatchAction({type:"treeExpandAndCollapse",seriesId:e.id,dataIndex:n})}))})),this._data=n},t.prototype._updateViewCoordSys=function(e,t){var o=e.getData(),n=[];o.each((function(e){var t=o.getItemLayout(e);!t||isNaN(t.x)||isNaN(t.y)||n.push([+t.x,+t.y])}));var a=[],i=[];L.zk(n,a,i);var r=this._min,l=this._max;i[0]-a[0]===0&&(a[0]=r?r[0]:a[0]-1,i[0]=l?l[0]:i[0]+1),i[1]-a[1]===0&&(a[1]=r?r[1]:a[1]-1,i[1]=l?l[1]:i[1]+1);var s=e.coordinateSystem=new N.Z;s.zoomLimit=e.get("scaleLimit"),s.setBoundingRect(a[0],a[1],i[0]-a[0],i[1]-a[1]),s.setCenter(e.get("center"),t),s.setZoom(e.get("zoom")),this.group.attr({x:s.x,y:s.y,scaleX:s.scaleX,scaleY:s.scaleY}),this._min=a,this._max=i},t.prototype._updateController=function(e,t,o){var n=this,a=this._controller,i=this._controllerHost,r=this.group;a.setPointerChecker((function(t,n,a){var i=r.getBoundingRect();return i.applyTransform(r.transform),i.contain(n,a)&&!(0,D.l)(t,o,e)})),a.enable(e.get("roam")),i.zoomLimit=e.get("scaleLimit"),i.zoom=e.coordinateSystem.getZoom(),a.off("pan").off("zoom").on("pan",(function(t){_.e(i,t.dx,t.dy),o.dispatchAction({seriesId:e.id,type:"treeRoam",dx:t.dx,dy:t.dy})})).on("zoom",(function(t){_.H(i,t.scale,t.originX,t.originY),o.dispatchAction({seriesId:e.id,type:"treeRoam",zoom:t.scale,originX:t.originX,originY:t.originY}),n._updateNodeAndLinkScale(e),o.updateLabelLayout()}))},t.prototype._updateNodeAndLinkScale=function(e){var t=e.getData(),o=this._getNodeGlobalScale(e);t.eachItemGraphicEl((function(e,t){e.setSymbolScale(o)}))},t.prototype._getNodeGlobalScale=function(e){var t=e.coordinateSystem;if("view"!==t.type)return 1;var o=this._nodeScaleRatio,n=t.scaleX||1,a=t.getZoom(),i=(a-1)*o+1;return i/n},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},t.type="tree",t}(A.Z);function E(e,t){var o=e.getItemLayout(t);return o&&!isNaN(o.x)&&!isNaN(o.y)}function k(e,t,o,n,i){var l=!o,u=e.tree.getNodeByDataIndex(t),h=u.getModel(),c=u.getVisual("style").fill,p=!1===u.isExpand&&0!==u.children.length?c:"#fff",g=e.tree.root,y=u.parentNode===g?u:u.parentNode||u,f=e.getItemGraphicEl(y.dataIndex),v=y.getLayout(),m=f?{x:f.__oldX,y:f.__oldY,rawX:f.__radialOldRawX,rawY:f.__radialOldRawY}:v,x=u.getLayout();l?(o=new d.Z(e,t,null,{symbolInnerColor:p,useNameLabel:!0}),o.x=m.x,o.y=m.y):o.updateData(e,t,null,{symbolInnerColor:p,useNameLabel:!0}),o.__radialOldRawX=o.__radialRawX,o.__radialOldRawY=o.__radialRawY,o.__radialRawX=x.rawX,o.__radialRawY=x.rawY,n.add(o),e.setItemGraphicEl(t,o),o.__oldX=o.x,o.__oldY=o.y,r.D(o,{x:x.x,y:x.y},i);var w=o.getSymbolPath();if("radial"===i.get("layout")){var I=g.children[0],b=I.getLayout(),M=I.children.length,L=void 0,N=void 0;if(x.x===b.x&&!0===u.isExpand&&I.children.length){var _={x:(I.children[0].getLayout().x+I.children[M-1].getLayout().x)/2,y:(I.children[0].getLayout().y+I.children[M-1].getLayout().y)/2};L=Math.atan2(_.y-b.y,_.x-b.x),L<0&&(L=2*Math.PI+L),N=_.x<b.x,N&&(L-=Math.PI)}else L=Math.atan2(x.y-b.y,x.x-b.x),L<0&&(L=2*Math.PI+L),0===u.children.length||0!==u.children.length&&!1===u.isExpand?(N=x.x<b.x,N&&(L-=Math.PI)):(N=x.x>b.x,N||(L-=Math.PI));var S=N?"left":"right",D=h.getModel("label"),T=D.get("rotate"),A=T*(Math.PI/180),C=w.getTextContent();C&&(w.setTextConfig({position:D.get("position")||S,rotation:null==T?-L:A,origin:"center"}),C.setStyle("verticalAlign","middle"))}var V=h.get(["emphasis","focus"]),Z="relative"===V?a.concatArray(u.getAncestorsIndices(),u.getDescendantIndices()):"ancestor"===V?u.getAncestorsIndices():"descendant"===V?u.getDescendantIndices():null;Z&&((0,s.A)(o).focus=Z),G(i,u,g,o,m,v,x,n),o.__edge&&(o.onHoverStateChange=function(t){if("blur"!==t){var n=u.parentNode&&e.getItemGraphicEl(u.parentNode.dataIndex);n&&n.hoverState===R.CX||(0,R.Gl)(o.__edge,t)}})}function G(e,t,o,n,i,s,d,u){var h=t.getModel(),c=e.get("edgeShape"),p=e.get("layout"),g=e.getOrient(),y=e.get(["lineStyle","curveness"]),f=e.get("edgeForkPosition"),v=h.getModel("lineStyle").getLineStyle(),m=n.__edge;if("curve"===c)t.parentNode&&t.parentNode!==o&&(m||(m=n.__edge=new l.Z({shape:O(p,g,y,i,i)})),r.D(m,{shape:O(p,g,y,s,d)},e));else if("polyline"===c)if("orthogonal"===p){if(t!==o&&t.children&&0!==t.children.length&&!0===t.isExpand){for(var x=t.children,w=[],I=0;I<x.length;I++){var b=x[I].getLayout();w.push([b.x,b.y])}m||(m=n.__edge=new Z({shape:{parentPoint:[d.x,d.y],childPoints:[[d.x,d.y]],orient:g,forkPosition:f}})),r.D(m,{shape:{parentPoint:[d.x,d.y],childPoints:w}},e)}}else 0;m&&("polyline"!==c||t.isExpand)&&(m.useStyle(a.defaults({strokeNoScale:!0,fill:null},v)),(0,R.WO)(m,h,"lineStyle"),(0,R.MA)(m),u.add(m))}function z(e,t,o,n,a){var i=t.tree.root,l=B(i,e),s=l.source,d=l.sourceLayout,u=t.getItemGraphicEl(e.dataIndex);if(u){var h=t.getItemGraphicEl(s.dataIndex),c=h.__edge,p=u.__edge||(!1===s.isExpand||1===s.children.length?c:void 0),g=n.get("edgeShape"),y=n.get("layout"),f=n.get("orient"),v=n.get(["lineStyle","curveness"]);p&&("curve"===g?r.bX(p,{shape:O(y,f,v,d,d),style:{opacity:0}},n,{cb:function(){o.remove(p)},removeOpt:a}):"polyline"===g&&"orthogonal"===n.get("layout")&&r.bX(p,{shape:{parentPoint:[d.x,d.y],childPoints:[[d.x,d.y]]},style:{opacity:0}},n,{cb:function(){o.remove(p)},removeOpt:a}))}}function B(e,t){var o,n=t.parentNode===e?t:t.parentNode||t;while(o=n.getLayout(),null==o)n=n.parentNode===e?n:n.parentNode||n;return{source:n,sourceLayout:o}}function X(e,t,o,n,a){var i=e.tree.getNodeByDataIndex(t),l=e.tree.root,s=B(l,i).sourceLayout,d={duration:a.get("animationDurationUpdate"),easing:a.get("animationEasingUpdate")};r.bX(o,{x:s.x+1,y:s.y+1},a,{cb:function(){n.remove(o),e.setItemGraphicEl(t,null)},removeOpt:d}),o.fadeOut(null,e.hostModel,{fadeLabel:!0,animation:d}),i.children.forEach((function(t){z(t,e,n,a,d)})),z(i,e,n,a,d)}function O(e,t,o,n,a){var i,r,l,s,d,u,h,c;if("radial"===e){d=n.rawX,h=n.rawY,u=a.rawX,c=a.rawY;var p=y(d,h),g=y(d,h+(c-h)*o),f=y(u,c+(h-c)*o),v=y(u,c);return{x1:p.x||0,y1:p.y||0,x2:v.x||0,y2:v.y||0,cpx1:g.x||0,cpy1:g.y||0,cpx2:f.x||0,cpy2:f.y||0}}return d=n.x,h=n.y,u=a.x,c=a.y,"LR"!==t&&"RL"!==t||(i=d+(u-d)*o,r=h,l=u+(d-u)*o,s=c),"TB"!==t&&"BT"!==t||(i=d,r=h+(c-h)*o,l=u,s=c+(h-c)*o),{x1:d,y1:h,x2:u,y2:c,cpx1:i,cpy1:r,cpx2:l,cpy2:s}}var W=P,Y=o(93321),H=o(9327),F=o(12312),U=o(5685),q=o(68833),j=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hasSymbolVisual=!0,t.ignoreStyleOnData=!0,t}return(0,n.ZT)(t,e),t.prototype.getInitialData=function(e){var t={name:e.name,children:e.data},o=e.leaves||{},n=new F.Z(o,this,this.ecModel),a=H.Z.createTree(t,this,i);function i(e){e.wrapMethod("getItemModel",(function(e,t){var o=a.getNodeByDataIndex(t);return o&&o.children.length&&o.isExpand||(e.parentModel=n),e}))}var r=0;a.eachNode("preorder",(function(e){e.depth>r&&(r=e.depth)}));var l=e.expandAndCollapse,s=l&&e.initialTreeDepth>=0?e.initialTreeDepth:r;return a.root.eachNode("preorder",(function(e){var t=e.hostTree.data.getRawDataItem(e.dataIndex);e.isExpand=t&&null!=t.collapsed?!t.collapsed:e.depth<=s})),a.data},t.prototype.getOrient=function(){var e=this.get("orient");return"horizontal"===e?e="LR":"vertical"===e&&(e="TB"),e},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.formatTooltip=function(e,t,o){var n=this.getData().tree,a=n.root.children[0],i=n.getNodeByDataIndex(e),r=i.getValue(),l=i.name;while(i&&i!==a)l=i.parentNode.name+"."+l,i=i.parentNode;return(0,U.TX)("nameValue",{name:l,value:r,noValue:isNaN(r)||null==r})},t.prototype.getDataParams=function(t){var o=e.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(t);return o.treeAncestors=(0,q.n3)(n,this),o.collapsed=!n.isExpand,o},t.type="series.tree",t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},t}(Y.Z),K=j;function J(e,t,o){var n,a=[e],i=[];while(n=a.pop())if(i.push(n),n.isExpand){var r=n.children;if(r.length)for(var l=0;l<r.length;l++)a.push(r[l])}while(n=i.pop())t(n,o)}function $(e,t){var o,n=[e];while(o=n.pop())if(t(o),o.isExpand){var a=o.children;if(a.length)for(var i=a.length-1;i>=0;i--)n.push(a[i])}}function Q(e,t){e.eachSeriesByType("tree",(function(e){ee(e,t)}))}function ee(e,t){var o=f(e,t);e.layoutInfo=o;var n=e.get("layout"),a=0,i=0,r=null;"radial"===n?(a=2*Math.PI,i=Math.min(o.height,o.width)/2,r=g((function(e,t){return(e.parentNode===t.parentNode?1:2)/e.depth}))):(a=o.width,i=o.height,r=g());var l=e.getData().tree.root,s=l.children[0];if(s){h(l),J(s,c,r),l.hierNode.modifier=-s.hierNode.prelim,$(s,p);var d=s,u=s,v=s;$(s,(function(e){var t=e.getLayout().x;t<d.getLayout().x&&(d=e),t>u.getLayout().x&&(u=e),e.depth>v.depth&&(v=e)}));var m=d===u?1:r(d,u)/2,x=m-d.getLayout().x,w=0,I=0,b=0,M=0;if("radial"===n)w=a/(u.getLayout().x+m+x),I=i/(v.depth-1||1),$(s,(function(e){b=(e.getLayout().x+x)*w,M=(e.depth-1)*I;var t=y(b,M);e.setLayout({x:t.x,y:t.y,rawX:b,rawY:M},!0)}));else{var L=e.getOrient();"RL"===L||"LR"===L?(I=i/(u.getLayout().x+m+x),w=a/(v.depth-1||1),$(s,(function(e){M=(e.getLayout().x+x)*I,b="LR"===L?(e.depth-1)*w:a-(e.depth-1)*w,e.setLayout({x:b,y:M},!0)}))):"TB"!==L&&"BT"!==L||(w=a/(u.getLayout().x+m+x),I=i/(v.depth-1||1),$(s,(function(e){b=(e.getLayout().x+x)*w,M="TB"===L?(e.depth-1)*I:i-(e.depth-1)*I,e.setLayout({x:b,y:M},!0)})))}}}function te(e){e.eachSeriesByType("tree",(function(e){var t=e.getData(),o=t.tree;o.eachNode((function(e){var o=e.getModel(),n=o.getModel("itemStyle").getItemStyle(),i=t.ensureUniqueItemVisual(e.dataIndex,"style");(0,a.extend)(i,n)}))}))}var oe=o(60553);function ne(e){e.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},(function(e,t){t.eachComponent({mainType:"series",subType:"tree",query:e},(function(t){var o=e.dataIndex,n=t.getData().tree,a=n.getNodeByDataIndex(o);a.isExpand=!a.isExpand}))})),e.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},(function(e,t,o){t.eachComponent({mainType:"series",subType:"tree",query:e},(function(t){var n=t.coordinateSystem,a=(0,oe.A)(n,e,void 0,o);t.setCenter&&t.setCenter(a.center),t.setZoom&&t.setZoom(a.zoom)}))}))}function ae(e){e.registerChartView(W),e.registerSeriesModel(K),e.registerLayout(Q),e.registerVisual(te),ne(e)}},94825:function(e,t,o){o.d(t,{N:function(){return Ge}});var n=o(68833),a=o(33051),i=["treemapZoomToNode","treemapRender","treemapMove"];function r(e){for(var t=0;t<i.length;t++)e.registerAction({type:i[t],update:"updateView"},a.noop);e.registerAction({type:"treemapRootToNode",update:"updateView"},(function(e,t){function o(t,o){var a=["treemapZoomToNode","treemapRootToNode"],i=n.d1(e,a,t);if(i){var r=t.getViewRoot();r&&(e.direction=n.Gx(r,i.node)?"rollUp":"drillDown"),t.resetViewRoot(i.node)}}t.eachComponent({mainType:"series",subType:"treemap",query:e},o)}))}var l=o(70655),s=o(93321),d=o(9327),u=o(12312),h=o(32234),c=o(5685),p=o(41903),g=function(e){function t(){var o=null!==e&&e.apply(this,arguments)||this;return o.type=t.type,o.preventUsingHoverLayer=!0,o}return(0,l.ZT)(t,e),t.prototype.getInitialData=function(e,t){var o={name:e.name,children:e.data};y(o);var n=e.levels||[],i=this.designatedVisualItemStyle={},r=new u.Z({itemStyle:i},this,t);n=e.levels=f(n,t);var l=a.map(n||[],(function(e){return new u.Z(e,r,t)}),this),s=d.Z.createTree(o,this,h);function h(e){e.wrapMethod("getItemModel",(function(e,t){var o=s.getNodeByDataIndex(t),n=o?l[o.depth]:null;return e.parentModel=n||r,e}))}return s.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.formatTooltip=function(e,t,o){var n=this.getData(),a=this.getRawValue(e),i=n.getName(e);return(0,c.TX)("nameValue",{name:i,value:a})},t.prototype.getDataParams=function(t){var o=e.prototype.getDataParams.apply(this,arguments),a=this.getData().tree.getNodeByDataIndex(t);return o.treeAncestors=(0,n.n3)(a,this),o.treePathInfo=o.treeAncestors,o},t.prototype.setLayoutInfo=function(e){this.layoutInfo=this.layoutInfo||{},a.extend(this.layoutInfo,e)},t.prototype.mapIdToIndex=function(e){var t=this._idIndexMap;t||(t=this._idIndexMap=a.createHashMap(),this._idIndexMapCount=0);var o=t.get(e);return null==o&&t.set(e,o=this._idIndexMapCount++),o},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var t=this.getRawData().tree.root;e&&(e===t||t.contains(e))||(this._viewRoot=t)},t.prototype.enableAriaDecal=function(){(0,p.Z)(this)},t.type="series.treemap",t.layoutMode="box",t.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"▶",zoomToNodeRatio:.1024,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},t}(s.Z);function y(e){var t=0;a.each(e.children,(function(e){y(e);var o=e.value;a.isArray(o)&&(o=o[0]),t+=o}));var o=e.value;a.isArray(o)&&(o=o[0]),(null==o||isNaN(o))&&(o=t),o<0&&(o=0),a.isArray(e.value)?e.value[0]=o:e.value=o}function f(e,t){var o=(0,h.kF)(t.get("color")),n=(0,h.kF)(t.get(["aria","decal","decals"]));if(o){var i,r;e=e||[],a.each(e,(function(e){var t=new u.Z(e),o=t.get("color"),n=t.get("decal");(t.get(["itemStyle","color"])||o&&"none"!==o)&&(i=!0),(t.get(["itemStyle","decal"])||n&&"none"!==n)&&(r=!0)}));var l=e[0]||(e[0]={});return i||(l.color=o.slice()),!r&&n&&(l.decal=n.slice()),e}}var v=g,m=o(38154),x=o(25293),w=o(30106),I=o(26357),b=o(4130),M=o(95094),L=o(96498),N=o(76172),_=o(36006),S=8,D=8,T=5,A=function(){function e(e){this.group=new m.Z,e.add(this.group)}return e.prototype.render=function(e,t,o,n){var a=e.getModel("breadcrumb"),i=this.group;if(i.removeAll(),a.get("show")&&o){var r=a.getModel("itemStyle"),l=a.getModel("emphasis"),s=r.getModel("textStyle"),d=l.getModel(["itemStyle","textStyle"]),u={pos:{left:a.get("left"),right:a.get("right"),top:a.get("top"),bottom:a.get("bottom")},box:{width:t.getWidth(),height:t.getHeight()},emptyItemWidth:a.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(o,u,s),this._renderContent(e,u,r,l,s,d,n),N.p$(i,u.pos,u.box)}},e.prototype._prepare=function(e,t,o){for(var n=e;n;n=n.parentNode){var a=(0,h.U5)(n.getModel().get("name"),""),i=o.getTextRect(a),r=Math.max(i.width+2*S,t.emptyItemWidth);t.totalWidth+=r+D,t.renderList.push({node:n,text:a,width:r})}},e.prototype._renderContent=function(e,t,o,n,i,r,l){for(var s=0,d=t.emptyItemWidth,u=e.get(["breadcrumb","height"]),h=N.lq(t.pos,t.box),c=t.totalWidth,p=t.renderList,g=n.getModel("itemStyle").getItemStyle(),y=p.length-1;y>=0;y--){var f=p[y],v=f.node,m=f.width,x=f.text;c>h.width&&(c-=m-d,m=d,x=null);var w=new M.Z({shape:{points:C(s,0,m,u,y===p.length-1,0===y)},style:(0,a.defaults)(o.getItemStyle(),{lineJoin:"bevel"}),textContent:new L.ZP({style:(0,_.Lr)(i,{text:x})}),textConfig:{position:"inside"},z2:1e4*I.zr,onclick:(0,a.curry)(l,v)});w.disableLabelAnimation=!0,w.getTextContent().ensureState("emphasis").style=(0,_.Lr)(r,{text:x}),w.ensureState("emphasis").style=g,(0,I.k5)(w,n.get("focus"),n.get("blurScope"),n.get("disabled")),this.group.add(w),R(w,e,v),s+=m+D}},e.prototype.remove=function(){this.group.removeAll()},e}();function C(e,t,o,n,a,i){var r=[[a?e:e-T,t],[e+o,t],[e+o,t+n],[a?e:e-T,t+n]];return!i&&r.splice(2,0,[e+o+T,t+n/2]),!a&&r.push([e,t+n/2]),r}function R(e,t,o){(0,w.A)(e).eventData={componentType:"series",componentSubType:"treemap",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:o&&o.dataIndex,name:o&&o.name},treePathInfo:o&&(0,n.n3)(o,t)}}var V=A,Z=o(9176),P=o(60479),E=o(32892),k=o(34584),G=o(59066),z=o(75797),B=o(7719),X=o(78988),O=m.Z,W=x.Z,Y=3,H="label",F="upperLabel",U=10*I.zr,q=2*I.zr,j=3*I.zr,K=(0,G.Z)([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),J=function(e){var t=K(e);return t.stroke=t.fill=t.lineWidth=null,t},$=(0,h.Yf)(),Q=function(e){function t(){var o=null!==e&&e.apply(this,arguments)||this;return o.type=t.type,o._state="ready",o._storage=ee(),o}return(0,l.ZT)(t,e),t.prototype.render=function(e,t,o,i){var r=t.findComponents({mainType:"series",subType:"treemap",query:i});if(!((0,a.indexOf)(r,e)<0)){this.seriesModel=e,this.api=o,this.ecModel=t;var l=["treemapZoomToNode","treemapRootToNode"],s=n.d1(i,l,e),d=i&&i.type,u=e.layoutInfo,h=!this._oldTree,c=this._storage,p="treemapRootToNode"===d&&s&&c?{rootNodeGroup:c.nodeGroup[s.node.getRawIndex()],direction:i.direction}:null,g=this._giveContainerGroup(u),y=e.get("animation"),f=this._doRender(g,e,p);!y||h||d&&"treemapZoomToNode"!==d&&"treemapRootToNode"!==d?f.renderFinally():this._doAnimation(g,f,e,p),this._resetController(o),this._renderBreadcrumb(e,o,s)}},t.prototype._giveContainerGroup=function(e){var t=this._containerGroup;return t||(t=this._containerGroup=new O,this._initEvents(t),this.group.add(t)),t.x=e.x,t.y=e.y,t},t.prototype._doRender=function(e,t,o){var n=t.getData().tree,i=this._oldTree,r=ee(),l=ee(),s=this._storage,d=[];function u(e,n,a,i){return te(t,l,s,o,r,d,e,n,a,i)}c(n.root?[n.root]:[],i&&i.root?[i.root]:[],e,n===i||!i,0);var h=p(s);return this._oldTree=n,this._storage=l,{lastsForAnimation:r,willDeleteEls:h,renderFinally:g};function c(e,t,o,n,i){function r(e){return e.getId()}function l(a,r){var l=null!=a?e[a]:null,s=null!=r?t[r]:null,d=u(l,s,o,i);d&&c(l&&l.viewChildren||[],s&&s.viewChildren||[],d,n,i+1)}n?(t=e,(0,a.each)(e,(function(e,t){!e.isRemoved()&&l(t,t)}))):new b.Z(t,e,r,r).add(l).update(l).remove((0,a.curry)(l,null)).execute()}function p(e){var t=ee();return e&&(0,a.each)(e,(function(e,o){var n=t[o];(0,a.each)(e,(function(e){e&&(n.push(e),$(e).willDelete=!0)}))})),t}function g(){(0,a.each)(h,(function(e){(0,a.each)(e,(function(e){e.parent&&e.parent.remove(e)}))})),(0,a.each)(d,(function(e){e.invisible=!0,e.dirty()}))}},t.prototype._doAnimation=function(e,t,o,n){var i=o.get("animationDurationUpdate"),r=o.get("animationEasing"),l=((0,a.isFunction)(i)?0:i)||0,s=((0,a.isFunction)(r)?null:r)||"cubicOut",d=k.o();(0,a.each)(t.willDeleteEls,(function(e,t){(0,a.each)(e,(function(e,o){if(!e.invisible){var a,i=e.parent,r=$(i);if(n&&"drillDown"===n.direction)a=i===n.rootNodeGroup?{shape:{x:0,y:0,width:r.nodeWidth,height:r.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var u=0,h=0;r.willDelete||(u=r.nodeWidth/2,h=r.nodeHeight/2),a="nodeGroup"===t?{x:u,y:h,style:{opacity:0}}:{shape:{x:u,y:h,width:0,height:0},style:{opacity:0}}}a&&d.add(e,a,l,0,s)}}))})),(0,a.each)(this._storage,(function(e,o){(0,a.each)(e,(function(e,n){var i=t.lastsForAnimation[o][n],r={};i&&(e instanceof m.Z?null!=i.oldX&&(r.x=e.x,r.y=e.y,e.x=i.oldX,e.y=i.oldY):(i.oldShape&&(r.shape=(0,a.extend)({},e.shape),e.setShape(i.oldShape)),i.fadein?(e.setStyle("opacity",0),r.style={opacity:1}):1!==e.style.opacity&&(r.style={opacity:1})),d.add(e,r,l,0,s))}))}),this),this._state="animating",d.finished((0,a.bind)((function(){this._state="ready",t.renderFinally()}),this)).start()},t.prototype._resetController=function(e){var t=this._controller;t||(t=this._controller=new Z.Z(e.getZr()),t.enable(this.seriesModel.get("roam")),t.on("pan",(0,a.bind)(this._onPan,this)),t.on("zoom",(0,a.bind)(this._onZoom,this)));var o=new P.Z(0,0,e.getWidth(),e.getHeight());t.setPointerChecker((function(e,t,n){return o.contain(t,n)}))},t.prototype._clearController=function(){var e=this._controller;e&&(e.dispose(),e=null)},t.prototype._onPan=function(e){if("animating"!==this._state&&(Math.abs(e.dx)>Y||Math.abs(e.dy)>Y)){var t=this.seriesModel.getData().tree.root;if(!t)return;var o=t.getLayout();if(!o)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:o.x+e.dx,y:o.y+e.dy,width:o.width,height:o.height}})}},t.prototype._onZoom=function(e){var t=e.originX,o=e.originY;if("animating"!==this._state){var n=this.seriesModel.getData().tree.root;if(!n)return;var a=n.getLayout();if(!a)return;var i=new P.Z(a.x,a.y,a.width,a.height),r=this.seriesModel.layoutInfo;t-=r.x,o-=r.y;var l=E.create();E.translate(l,l,[-t,-o]),E.scale(l,l,[e.scale,e.scale]),E.translate(l,l,[t,o]),i.applyTransform(l),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:i.x,y:i.y,width:i.width,height:i.height}})}},t.prototype._initEvents=function(e){var t=this;e.on("click",(function(e){if("ready"===t._state){var o=t.seriesModel.get("nodeClick",!0);if(o){var n=t.findTarget(e.offsetX,e.offsetY);if(n){var a=n.node;if(a.getLayout().isLeafRoot)t._rootToNode(n);else if("zoomToNode"===o)t._zoomToNode(n);else if("link"===o){var i=a.hostTree.data.getItemModel(a.dataIndex),r=i.get("link",!0),l=i.get("target",!0)||"blank";r&&(0,X.MI)(r,l)}}}}}),this)},t.prototype._renderBreadcrumb=function(e,t,o){var a=this;o||(o=null!=e.get("leafDepth",!0)?{node:e.getViewRoot()}:this.findTarget(t.getWidth()/2,t.getHeight()/2),o||(o={node:e.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new V(this.group))).render(e,t,o.node,(function(t){"animating"!==a._state&&(n.Gx(e.getViewRoot(),t)?a._rootToNode({node:t}):a._zoomToNode({node:t}))}))},t.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=ee(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},t.prototype.dispose=function(){this._clearController()},t.prototype._zoomToNode=function(e){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},t.prototype._rootToNode=function(e){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},t.prototype.findTarget=function(e,t){var o,n=this.seriesModel.getViewRoot();return n.eachNode({attr:"viewChildren",order:"preorder"},(function(n){var a=this._storage.background[n.getRawIndex()];if(a){var i=a.transformCoordToLocal(e,t),r=a.shape;if(!(r.x<=i[0]&&i[0]<=r.x+r.width&&r.y<=i[1]&&i[1]<=r.y+r.height))return!1;o={node:n,offsetX:i[0],offsetY:i[1]}}}),this),o},t.type="treemap",t}(z.Z);function ee(){return{nodeGroup:[],background:[],content:[]}}function te(e,t,o,n,i,r,l,s,d,u){if(l){var c=l.getLayout(),p=e.getData(),g=l.getModel();if(p.setItemGraphicEl(l.dataIndex,null),c&&c.isInView){var y=c.width,f=c.height,v=c.borderWidth,x=c.invisible,b=l.getRawIndex(),M=s&&s.getRawIndex(),L=l.viewChildren,N=c.upperHeight,S=L&&L.length,D=g.getModel("itemStyle"),T=g.getModel(["emphasis","itemStyle"]),A=g.getModel(["blur","itemStyle"]),C=g.getModel(["select","itemStyle"]),R=D.get("borderRadius")||0,V=ne("nodeGroup",O);if(V){if(d.add(V),V.x=c.x||0,V.y=c.y||0,V.markRedraw(),$(V).nodeWidth=y,$(V).nodeHeight=f,c.isAboveViewRoot)return V;var Z=ne("background",W,u,q);Z&&Y(V,Z,S&&c.upperLabelHeight);var P=g.getModel("emphasis"),E=P.get("focus"),k=P.get("blurScope"),G=P.get("disabled"),z="ancestor"===E?l.getAncestorsIndices():"descendant"===E?l.getDescendantIndices():E;if(S)(0,I.Av)(V)&&(0,I.Nj)(V,!1),Z&&((0,I.Nj)(Z,!G),p.setItemGraphicEl(l.dataIndex,Z),(0,I.Ib)(Z,z,k));else{var X=ne("content",W,u,j);X&&U(V,X),Z.disableMorphing=!0,Z&&(0,I.Av)(Z)&&(0,I.Nj)(Z,!1),(0,I.Nj)(V,!G),p.setItemGraphicEl(l.dataIndex,V),(0,I.Ib)(V,z,k)}return V}}}function Y(t,o,n){var a=(0,w.A)(o);if(a.dataIndex=l.dataIndex,a.seriesIndex=e.seriesIndex,o.setShape({x:0,y:0,width:y,height:f,r:R}),x)Q(o);else{o.invisible=!1;var i=l.getVisual("style"),r=i.stroke,s=J(D);s.fill=r;var d=K(T);d.fill=T.get("borderColor");var u=K(A);u.fill=A.get("borderColor");var h=K(C);if(h.fill=C.get("borderColor"),n){var c=y-2*v;ee(o,r,i.opacity,{x:v,y:0,width:c,height:N})}else o.removeTextContent();o.setStyle(s),o.ensureState("emphasis").style=d,o.ensureState("blur").style=u,o.ensureState("select").style=h,(0,I.MA)(o)}t.add(o)}function U(t,o){var n=(0,w.A)(o);n.dataIndex=l.dataIndex,n.seriesIndex=e.seriesIndex;var a=Math.max(y-2*v,0),i=Math.max(f-2*v,0);if(o.culling=!0,o.setShape({x:v,y:v,width:a,height:i,r:R}),x)Q(o);else{o.invisible=!1;var r=l.getVisual("style"),s=r.fill,d=J(D);d.fill=s,d.decal=r.decal;var u=K(T),h=K(A),c=K(C);ee(o,s,r.opacity,null),o.setStyle(d),o.ensureState("emphasis").style=u,o.ensureState("blur").style=h,o.ensureState("select").style=c,(0,I.MA)(o)}t.add(o)}function Q(e){!e.invisible&&r.push(e)}function ee(t,o,n,i){var r=g.getModel(i?F:H),s=(0,h.U5)(g.get("name"),null),d=r.getShallow("show");(0,_.ni)(t,(0,_.k3)(g,i?F:H),{defaultText:d?s:null,inheritColor:o,defaultOpacity:n,labelFetcher:e,labelDataIndex:l.dataIndex});var u=t.getTextContent();if(u){var p=u.style,y=(0,a.normalizeCssArray)(p.padding||0);i&&(t.setTextConfig({layoutRect:i}),u.disableLabelLayout=!0),u.beforeUpdate=function(){var e=Math.max((i?i.width:t.shape.width)-y[1]-y[3],0),o=Math.max((i?i.height:t.shape.height)-y[0]-y[2],0);p.width===e&&p.height===o||u.setStyle({width:e,height:o})},p.truncateMinChar=2,p.lineOverflow="truncate",te(p,i,c);var f=u.getState("emphasis");te(f?f.style:null,i,c)}}function te(t,o,n){var a=t?t.text:null;if(!o&&n.isLeafRoot&&null!=a){var i=e.get("drillDownIcon",!0);t.text=i?i+" "+a:a}}function ne(e,n,a,r){var l=null!=M&&o[e][M],s=i[e];return l?(o[e][M]=null,ae(s,l)):x||(l=new n,l instanceof B.ZP&&(l.z2=oe(a,r)),ie(s,l)),t[e][b]=l}function ae(e,t){var o=e[b]={};t instanceof O?(o.oldX=t.x,o.oldY=t.y):o.oldShape=(0,a.extend)({},t.shape)}function ie(e,t){var o=e[b]={},a=l.parentNode,r=t instanceof m.Z;if(a&&(!n||"drillDown"===n.direction)){var s=0,d=0,u=i.background[a.getRawIndex()];!n&&u&&u.oldShape&&(s=u.oldShape.width,d=u.oldShape.height),r?(o.oldX=0,o.oldY=d):o.oldShape={x:s,y:d,width:0,height:0}}o.fadein=!r}}function oe(e,t){return e*U+t}var ne=Q,ae=o(59937),ie=o(21092),re="itemStyle",le=(0,h.Yf)(),se={seriesType:"treemap",reset:function(e){var t=e.getData().tree,o=t.root;o.isRemoved()||de(o,{},e.getViewRoot().getAncestors(),e)}};function de(e,t,o,n){var i=e.getModel(),r=e.getLayout(),l=e.hostTree.data;if(r&&!r.invisible&&r.isInView){var s,d=i.getModel(re),u=ue(d,t,n),h=l.ensureUniqueItemVisual(e.dataIndex,"style"),c=d.get("borderColor"),p=d.get("borderColorSaturation");null!=p&&(s=he(u),c=ce(p,s)),h.stroke=c;var g=e.viewChildren;if(g&&g.length){var y=ge(e,i,r,d,u,g);(0,a.each)(g,(function(e,t){if(e.depth>=o.length||e===o[e.depth]){var a=fe(i,u,e,t,y,n);de(e,a,o,n)}}))}else s=he(u),h.fill=s}}function ue(e,t,o){var n=(0,a.extend)({},t),i=o.designatedVisualItemStyle;return(0,a.each)(["color","colorAlpha","colorSaturation"],(function(o){i[o]=t[o];var a=e.get(o);i[o]=null,null!=a&&(n[o]=a)})),n}function he(e){var t=pe(e,"color");if(t){var o=pe(e,"colorAlpha"),n=pe(e,"colorSaturation");return n&&(t=(0,ie.modifyHSL)(t,null,null,n)),o&&(t=(0,ie.modifyAlpha)(t,o)),t}}function ce(e,t){return null!=t?(0,ie.modifyHSL)(t,null,null,e):null}function pe(e,t){var o=e[t];if(null!=o&&"none"!==o)return o}function ge(e,t,o,n,a,i){if(i&&i.length){var r=ye(t,"color")||null!=a.color&&"none"!==a.color&&(ye(t,"colorAlpha")||ye(t,"colorSaturation"));if(r){var l=t.get("visualMin"),s=t.get("visualMax"),d=o.dataExtent.slice();null!=l&&l<d[0]&&(d[0]=l),null!=s&&s>d[1]&&(d[1]=s);var u=t.get("colorMappingBy"),h={type:r.name,dataExtent:d,visual:r.range};"color"!==h.type||"index"!==u&&"id"!==u?h.mappingMethod="linear":(h.mappingMethod="category",h.loop=!0);var c=new ae.Z(h);return le(c).drColorMappingBy=u,c}}}function ye(e,t){var o=e.get(t);return(0,a.isArray)(o)&&o.length?{name:t,range:o}:null}function fe(e,t,o,n,i,r){var l=(0,a.extend)({},t);if(i){var s=i.type,d="color"===s&&le(i).drColorMappingBy,u="index"===d?n:"id"===d?r.mapIdToIndex(o.getId()):o.getValue(e.get("visualDimension"));l[s]=i.mapValueToVisual(u)}return l}var ve=o(85669),me=Math.max,xe=Math.min,we=a.retrieve,Ie=a.each,be=["itemStyle","borderWidth"],Me=["itemStyle","gapWidth"],Le=["upperLabel","show"],Ne=["upperLabel","height"],_e={seriesType:"treemap",reset:function(e,t,o,i){var r=o.getWidth(),l=o.getHeight(),s=e.option,d=N.ME(e.getBoxLayoutParams(),{width:o.getWidth(),height:o.getHeight()}),u=s.size||[],h=(0,ve.GM)(we(d.width,u[0]),r),c=(0,ve.GM)(we(d.height,u[1]),l),p=i&&i.type,g=["treemapZoomToNode","treemapRootToNode"],y=n.d1(i,g,e),f="treemapRender"===p||"treemapMove"===p?i.rootRect:null,v=e.getViewRoot(),m=n.zN(v);if("treemapMove"!==p){var x="treemapZoomToNode"===p?Ze(e,y,v,h,c):f?[f.width,f.height]:[h,c],w=s.sort;w&&"asc"!==w&&"desc"!==w&&(w="desc");var I={squareRatio:s.squareRatio,sort:w,leafDepth:s.leafDepth};v.hostTree.clearLayouts();var b={x:0,y:0,width:x[0],height:x[1],area:x[0]*x[1]};v.setLayout(b),Se(v,I,!1,0),b=v.getLayout(),Ie(m,(function(e,t){var o=(m[t+1]||v).getValue();e.setLayout(a.extend({dataExtent:[o,o],borderWidth:0,upperHeight:0},b))}))}var M=e.getData().tree.root;M.setLayout(Pe(d,f,y),!0),e.setLayoutInfo(d),Ee(M,new P.Z(-d.x,-d.y,r,l),m,v,0)}};function Se(e,t,o,n){var a,i;if(!e.isRemoved()){var r=e.getLayout();a=r.width,i=r.height;var l=e.getModel(),s=l.get(be),d=l.get(Me)/2,u=ke(l),h=Math.max(s,u),c=s-d,p=h-d;e.setLayout({borderWidth:s,upperHeight:h,upperLabelHeight:u},!0),a=me(a-2*c,0),i=me(i-c-p,0);var g=a*i,y=De(e,l,g,t,o,n);if(y.length){var f={x:c,y:p,width:a,height:i},v=xe(a,i),m=1/0,x=[];x.area=0;for(var w=0,I=y.length;w<I;){var b=y[w];x.push(b),x.area+=b.getLayout().area;var M=Re(x,v,t.squareRatio);M<=m?(w++,m=M):(x.area-=x.pop().getLayout().area,Ve(x,v,f,d,!1),v=xe(f.width,f.height),x.length=x.area=0,m=1/0)}if(x.length&&Ve(x,v,f,d,!0),!o){var L=l.get("childrenVisibleMin");null!=L&&g<L&&(o=!0)}for(w=0,I=y.length;w<I;w++)Se(y[w],t,o,n+1)}}}function De(e,t,o,n,i,r){var l=e.children||[],s=n.sort;"asc"!==s&&"desc"!==s&&(s=null);var d=null!=n.leafDepth&&n.leafDepth<=r;if(i&&!d)return e.viewChildren=[];l=a.filter(l,(function(e){return!e.isRemoved()})),Ae(l,s);var u=Ce(t,l,s);if(0===u.sum)return e.viewChildren=[];if(u.sum=Te(t,o,u.sum,s,l),0===u.sum)return e.viewChildren=[];for(var h=0,c=l.length;h<c;h++){var p=l[h].getValue()/u.sum*o;l[h].setLayout({area:p})}return d&&(l.length&&e.setLayout({isLeafRoot:!0},!0),l.length=0),e.viewChildren=l,e.setLayout({dataExtent:u.dataExtent},!0),l}function Te(e,t,o,n,a){if(!n)return o;for(var i=e.get("visibleMin"),r=a.length,l=r,s=r-1;s>=0;s--){var d=a["asc"===n?r-s-1:s].getValue();d/o*t<i&&(l=s,o-=d)}return"asc"===n?a.splice(0,r-l):a.splice(l,r-l),o}function Ae(e,t){return t&&e.sort((function(e,o){var n="asc"===t?e.getValue()-o.getValue():o.getValue()-e.getValue();return 0===n?"asc"===t?e.dataIndex-o.dataIndex:o.dataIndex-e.dataIndex:n})),e}function Ce(e,t,o){for(var n=0,a=0,i=t.length;a<i;a++)n+=t[a].getValue();var r,l=e.get("visualDimension");return t&&t.length?"value"===l&&o?(r=[t[t.length-1].getValue(),t[0].getValue()],"asc"===o&&r.reverse()):(r=[1/0,-1/0],Ie(t,(function(e){var t=e.getValue(l);t<r[0]&&(r[0]=t),t>r[1]&&(r[1]=t)}))):r=[NaN,NaN],{sum:n,dataExtent:r}}function Re(e,t,o){for(var n=0,a=1/0,i=0,r=void 0,l=e.length;i<l;i++)r=e[i].getLayout().area,r&&(r<a&&(a=r),r>n&&(n=r));var s=e.area*e.area,d=t*t*o;return s?me(d*n/s,s/(d*a)):1/0}function Ve(e,t,o,n,a){var i=t===o.width?0:1,r=1-i,l=["x","y"],s=["width","height"],d=o[l[i]],u=t?e.area/t:0;(a||u>o[s[r]])&&(u=o[s[r]]);for(var h=0,c=e.length;h<c;h++){var p=e[h],g={},y=u?p.getLayout().area/u:0,f=g[s[r]]=me(u-2*n,0),v=o[l[i]]+o[s[i]]-d,m=h===c-1||v<y?v:y,x=g[s[i]]=me(m-2*n,0);g[l[r]]=o[l[r]]+xe(n,f/2),g[l[i]]=d+xe(n,x/2),d+=m,p.setLayout(g,!0)}o[l[r]]+=u,o[s[r]]-=u}function Ze(e,t,o,n,a){var i,r=(t||{}).node,l=[n,a];if(!r||r===o)return l;var s=n*a,d=s*e.option.zoomToNodeRatio;while(i=r.parentNode){for(var u=0,h=i.children,c=0,p=h.length;c<p;c++)u+=h[c].getValue();var g=r.getValue();if(0===g)return l;d*=u/g;var y=i.getModel(),f=y.get(be),v=Math.max(f,ke(y));d+=4*f*f+(3*f+v)*Math.pow(d,.5),d>ve.YM&&(d=ve.YM),r=i}d<s&&(d=s);var m=Math.pow(d/s,.5);return[n*m,a*m]}function Pe(e,t,o){if(t)return{x:t.x,y:t.y};var n={x:0,y:0};if(!o)return n;var a=o.node,i=a.getLayout();if(!i)return n;var r=[i.width/2,i.height/2],l=a;while(l){var s=l.getLayout();r[0]+=s.x,r[1]+=s.y,l=l.parentNode}return{x:e.width/2-r[0],y:e.height/2-r[1]}}function Ee(e,t,o,n,a){var i=e.getLayout(),r=o[a],l=r&&r===e;if(!(r&&!l||a===o.length&&e!==n)){e.setLayout({isInView:!0,invisible:!l&&!t.intersect(i),isAboveViewRoot:l},!0);var s=new P.Z(t.x-i.x,t.y-i.y,t.width,t.height);Ie(e.viewChildren||[],(function(e){Ee(e,s,o,n,a+1)}))}}function ke(e){return e.get(Le)?e.get(Ne):0}function Ge(e){e.registerSeriesModel(v),e.registerChartView(ne),e.registerVisual(se),e.registerLayout(_e),r(e)}}}]);
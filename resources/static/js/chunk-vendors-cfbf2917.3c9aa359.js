"use strict";(self["webpackChunkssoc"]=self["webpackChunkssoc"]||[]).push([[8093],{3789:function(e,t,o){o.d(t,{a:function(){return y}});var i=o(3087),r=o(15215),n=o(13637),a=o(47355),l=function(e){function t(){var o=null!==e&&e.apply(this,arguments)||this;return o.type=t.type,o.hasSymbolVisual=!0,o}return(0,r.C6)(t,e),t.prototype.getInitialData=function(e,t){return(0,n.A)(null,this,{useEncodeDefaulter:!0})},t.prototype.getProgressive=function(){var e=this.option.progressive;return null==e?this.option.large?5e3:this.get("progressive"):e},t.prototype.getProgressiveThreshold=function(){var e=this.option.progressiveThreshold;return null==e?this.option.large?1e4:this.get("progressiveThreshold"):e},t.prototype.brushSelector=function(e,t,o){return o.point(t.getItemLayout(e))},t.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},t.type="series.scatter",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},t}(a.A),s=l,d=o(18386),u=o(94583),h=o(30682),c=o(6666),p=function(e){function t(){var o=null!==e&&e.apply(this,arguments)||this;return o.type=t.type,o}return(0,r.C6)(t,e),t.prototype.render=function(e,t,o){var i=e.getData(),r=this._updateSymbolDraw(i,e);r.updateData(i,{clipShape:this._getClipShape(e)}),this._finished=!0},t.prototype.incrementalPrepareRender=function(e,t,o){var i=e.getData(),r=this._updateSymbolDraw(i,e);r.incrementalPrepareUpdate(i),this._finished=!1},t.prototype.incrementalRender=function(e,t,o){this._symbolDraw.incrementalUpdate(e,t.getData(),{clipShape:this._getClipShape(t)}),this._finished=e.end===t.getData().count()},t.prototype.updateTransform=function(e,t,o){var i=e.getData();if(this.group.dirty(),!this._finished||i.count()>1e4)return{update:!0};var r=(0,h.A)("").reset(e,t,o);r.progress&&r.progress({start:0,end:i.count(),count:i.count()},i),this._symbolDraw.updateLayout(i)},t.prototype.eachRendered=function(e){this._symbolDraw&&this._symbolDraw.eachRendered(e)},t.prototype._getClipShape=function(e){if(e.get("clip",!0)){var t=e.coordinateSystem;return t&&t.getArea&&t.getArea(.1)}},t.prototype._updateSymbolDraw=function(e,t){var o=this._symbolDraw,i=t.pipelineContext,r=i.large;return o&&r===this._isLargeDraw||(o&&o.remove(),o=this._symbolDraw=r?new u.A:new d.A,this._isLargeDraw=r,this.group.removeAll()),this.group.add(o.group),o},t.prototype.remove=function(e,t){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},t.prototype.dispose=function(){},t.type="scatter",t}(c.A),g=p,f=o(69446);function y(e){(0,i.Y)(f.a),e.registerSeriesModel(s),e.registerChartView(g),e.registerLayout((0,h.A)("scatter"))}},90727:function(e,t,o){o.d(t,{a:function(){return X}});var i=o(15215),r=o(98026),n=o(6666),a=o(32322),l=o(5638),s=o(59975),d=o(34833),u=o(89632),h=o(69622),c=o(79446),p=o(23538),g=o(41589),f=o(24326),y=2,v=4,m=function(e){function t(t,o,i,r){var n=e.call(this)||this;n.z2=y,n.textConfig={inside:!0},(0,h.z)(n).seriesIndex=o.seriesIndex;var l=new a.Ay({z2:v,silent:t.getModel().get(["label","silent"])});return n.setTextContent(l),n.updateData(!0,t,o,i,r),n}return(0,i.C6)(t,e),t.prototype.updateData=function(e,t,o,i,n){this.node=t,t.piece=this,o=o||this._seriesModel,i=i||this._ecModel;var a=this;(0,h.z)(a).dataIndex=t.dataIndex;var s=t.getModel(),u=s.getModel("emphasis"),g=t.getLayout(),f=r.extend({},g);f.label=null;var y=t.getVisual("style");y.lineJoin="bevel";var v=t.getVisual("decal");v&&(y.decal=(0,p.w)(v,n));var m=(0,c.i)(s.getModel("itemStyle"),f,!0);r.extend(f,m),r.each(d.BV,(function(e){var t=a.ensureState(e),o=s.getModel([e,"itemStyle"]);t.style=o.getItemStyle();var i=(0,c.i)(o,f);i&&(t.shape=i)})),e?(a.setShape(f),a.shape.r=g.r0,l.LW(a,{shape:{r:g.r}},o,t.dataIndex)):(l.oi(a,{shape:f},o),(0,l.ap)(a)),a.useStyle(y),this._updateLabel(o);var x=s.getShallow("cursor");x&&a.attr("cursor",x),this._seriesModel=o||this._seriesModel,this._ecModel=i||this._ecModel;var w=u.get("focus"),b="relative"===w?r.concatArray(t.getAncestorsIndices(),t.getDescendantIndices()):"ancestor"===w?t.getAncestorsIndices():"descendant"===w?t.getDescendantIndices():w;(0,d.Lm)(this,b,u.get("blurScope"),u.get("disabled"))},t.prototype._updateLabel=function(e){var t=this,o=this.node.getModel(),i=o.getModel("label"),n=this.node.getLayout(),a=n.endAngle-n.startAngle,l=(n.startAngle+n.endAngle)/2,s=Math.cos(l),h=Math.sin(l),c=this,p=c.getTextContent(),y=this.node.dataIndex,v=i.get("minAngle")/180*Math.PI,m=i.get("show")&&!(null!=v&&Math.abs(a)<v);function x(e,t){var o=e.get(t);return null==o?i.get(t):o}p.ignore=!m,r.each(d.wV,(function(i){var d="normal"===i?o.getModel("label"):o.getModel([i,"label"]),v="normal"===i,m=v?p:p.ensureState(i),w=e.getFormattedLabel(y,i);v&&(w=w||t.node.name),m.style=(0,u.VB)(d,{},null,"normal"!==i,!0),w&&(m.style.text=w);var b=d.get("show");null==b||v||(m.ignore=!b);var I,_=x(d,"position"),N=v?c:c.states[i],M=N.style.fill;N.textConfig={outsideFill:"inherit"===d.get("color")?M:null,inside:"outside"!==_};var A=x(d,"distance")||0,S=x(d,"align"),L=x(d,"rotate"),D=.5*Math.PI,T=1.5*Math.PI,C=(0,g.n)("tangential"===L?Math.PI/2-l:l),R=C>D&&!(0,f.dh)(C-D)&&C<T;"outside"===_?(I=n.r+A,S=R?"right":"left"):S&&"center"!==S?"left"===S?(I=n.r0+A,S=R?"right":"left"):"right"===S&&(I=n.r-A,S=R?"left":"right"):(I=a===2*Math.PI&&0===n.r0?0:(n.r+n.r0)/2,S="center"),m.style.align=S,m.style.verticalAlign=x(d,"verticalAlign")||"middle",m.x=I*s+n.cx,m.y=I*h+n.cy;var V=0;"radial"===L?V=(0,g.n)(-l)+(R?Math.PI:0):"tangential"===L?V=(0,g.n)(Math.PI/2-l)+(R?Math.PI:0):r.isNumber(L)&&(V=L*Math.PI/180),m.rotation=(0,g.n)(V)})),p.dirtyStyle()},t}(s.A),x=m,w=o(16563),b=o(41616),I="sunburstRootToNode",_="sunburstHighlight",N="sunburstUnhighlight";function M(e){e.registerAction({type:I,update:"updateView"},(function(e,t){function o(t,o){var i=(0,b.mw)(e,[I],t);if(i){var r=t.getViewRoot();r&&(e.direction=(0,b.x5)(r,i.node)?"rollUp":"drillDown"),t.resetViewRoot(i.node)}}t.eachComponent({mainType:"series",subType:"sunburst",query:e},o)})),e.registerAction({type:_,update:"none"},(function(e,t,o){function i(t){var o=(0,b.mw)(e,[_],t);o&&(e.dataIndex=o.node.dataIndex)}e=(0,r.extend)({},e),t.eachComponent({mainType:"series",subType:"sunburst",query:e},i),o.dispatchAction((0,r.extend)(e,{type:"highlight"}))})),e.registerAction({type:N,update:"updateView"},(function(e,t,o){e=(0,r.extend)({},e),o.dispatchAction((0,r.extend)(e,{type:"downplay"}))}))}var A=o(83412),S=function(e){function t(){var o=null!==e&&e.apply(this,arguments)||this;return o.type=t.type,o}return(0,i.C6)(t,e),t.prototype.render=function(e,t,o,i){var n=this;this.seriesModel=e,this.api=o,this.ecModel=t;var a=e.getData(),l=a.tree.root,s=e.getViewRoot(),d=this.group,u=e.get("renderLabelForZeroData"),h=[];s.eachNode((function(e){h.push(e)}));var c=this._oldChildren||[];function p(e,t){function o(e){return e.getId()}function i(o,i){var r=null==o?null:e[o],n=null==i?null:t[i];g(r,n)}0===e.length&&0===t.length||new w.A(t,e,o,o).add(i).update(i).remove(r.curry(i,null)).execute()}function g(i,r){if(u||!i||i.getValue()||(i=null),i!==l&&r!==l)if(r&&r.piece)i?(r.piece.updateData(!1,i,e,t,o),a.setItemGraphicEl(i.dataIndex,r.piece)):f(r);else if(i){var n=new x(i,e,t,o);d.add(n),a.setItemGraphicEl(i.dataIndex,n)}}function f(e){e&&e.piece&&(d.remove(e.piece),e.piece=null)}function y(i,r){r.depth>0?(n.virtualPiece?n.virtualPiece.updateData(!1,i,e,t,o):(n.virtualPiece=new x(i,e,t,o),d.add(n.virtualPiece)),r.piece.off("click"),n.virtualPiece.on("click",(function(e){n._rootToNode(r.parentNode)}))):n.virtualPiece&&(d.remove(n.virtualPiece),n.virtualPiece=null)}p(h,c),y(l,s),this._initEvents(),this._oldChildren=h},t.prototype._initEvents=function(){var e=this;this.group.off("click"),this.group.on("click",(function(t){var o=!1,i=e.seriesModel.getViewRoot();i.eachNode((function(i){if(!o&&i.piece&&i.piece===t.target){var r=i.getModel().get("nodeClick");if("rootToNode"===r)e._rootToNode(i);else if("link"===r){var n=i.getModel(),a=n.get("link");if(a){var l=n.get("target",!0)||"_blank";(0,A.JW)(a,l)}}o=!0}}))}))},t.prototype._rootToNode=function(e){e!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:I,from:this.uid,seriesId:this.seriesModel.id,targetNode:e})},t.prototype.containPoint=function(e,t){var o=t.getData(),i=o.getItemLayout(0);if(i){var r=e[0]-i.cx,n=e[1]-i.cy,a=Math.sqrt(r*r+n*n);return a<=i.r&&a>=i.r0}},t.type="sunburst",t}(n.A),L=S,D=o(47355),T=o(15719),C=o(5202),R=o(68866),V=function(e){function t(){var o=null!==e&&e.apply(this,arguments)||this;return o.type=t.type,o.ignoreStyleOnData=!0,o}return(0,i.C6)(t,e),t.prototype.getInitialData=function(e,t){var o={name:e.name,children:e.data};P(o);var i=this._levelModels=r.map(e.levels||[],(function(e){return new C.A(e,this,t)}),this),n=T.A.createTree(o,this,a);function a(e){e.wrapMethod("getItemModel",(function(e,t){var o=n.getNodeByDataIndex(t),r=i[o.depth];return r&&(e.parentModel=r),e}))}return n.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.getDataParams=function(t){var o=e.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(t);return o.treePathInfo=(0,b.ev)(i,this),o},t.prototype.getLevelModel=function(e){return this._levelModels&&this._levelModels[e.depth]},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var t=this.getRawData().tree.root;e&&(e===t||t.contains(e))||(this._viewRoot=t)},t.prototype.enableAriaDecal=function(){(0,R.A)(this)},t.type="series.sunburst",t.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},t}(D.A);function P(e){var t=0;r.each(e.children,(function(e){P(e);var o=e.value;r.isArray(o)&&(o=o[0]),t+=o}));var o=e.value;r.isArray(o)&&(o=o[0]),(null==o||isNaN(o))&&(o=t),o<0&&(o=0),r.isArray(e.value)?e.value[0]=o:e.value=o}var E=V,k=Math.PI/180;function z(e,t,o){t.eachSeriesByType(e,(function(e){var t=e.get("center"),i=e.get("radius");r.isArray(i)||(i=[0,i]),r.isArray(t)||(t=[t,t]);var n=o.getWidth(),a=o.getHeight(),l=Math.min(n,a),s=(0,f.lo)(t[0],n),d=(0,f.lo)(t[1],a),u=(0,f.lo)(i[0],l/2),h=(0,f.lo)(i[1],l/2),c=-e.get("startAngle")*k,p=e.get("minAngle")*k,g=e.getData().tree.root,y=e.getViewRoot(),v=y.depth,m=e.get("sort");null!=m&&B(y,m);var x=0;r.each(y.children,(function(e){!isNaN(e.getValue())&&x++}));var w=y.getValue(),b=Math.PI/(w||x)*2,I=y.depth>0,_=y.height-(I?-1:1),N=(h-u)/(_||1),M=e.get("clockwise"),A=e.get("stillShowZeroSum"),S=M?1:-1,L=function(t,o){if(t){var i=o;if(t!==g){var n=t.getValue(),a=0===w&&A?b:n*b;a<p&&(a=p),i=o+S*a;var h=t.depth-v-(I?-1:1),c=u+N*h,y=u+N*(h+1),m=e.getLevelModel(t);if(m){var x=m.get("r0",!0),_=m.get("r",!0),D=m.get("radius",!0);null!=D&&(x=D[0],_=D[1]),null!=x&&(c=(0,f.lo)(x,l/2)),null!=_&&(y=(0,f.lo)(_,l/2))}t.setLayout({angle:a,startAngle:o,endAngle:i,clockwise:M,cx:s,cy:d,r0:c,r:y})}if(t.children&&t.children.length){var T=0;r.each(t.children,(function(e){T+=L(e,o+T)}))}return i-o}};if(I){var D=u,T=u+N,C=2*Math.PI;g.setLayout({angle:C,startAngle:c,endAngle:c+C,clockwise:M,cx:s,cy:d,r0:D,r:T})}L(y,c)}))}function B(e,t){var o=e.children||[];e.children=G(o,t),o.length&&r.each(e.children,(function(e){B(e,t)}))}function G(e,t){if(r.isFunction(t)){var o=r.map(e,(function(e,t){var o=e.getValue();return{params:{depth:e.depth,height:e.height,dataIndex:e.dataIndex,getValue:function(){return o}},index:t}}));return o.sort((function(e,o){return t(e.params,o.params)})),r.map(o,(function(t){return e[t.index]}))}var i="asc"===t;return e.sort((function(e,t){var o=(e.getValue()-t.getValue())*(i?1:-1);return 0===o?(e.dataIndex-t.dataIndex)*(i?-1:1):o}))}var W=o(47698);function H(e){var t={};function o(e,o,i){var n=e;while(n&&n.depth>1)n=n.parentNode;var a=o.getColorFromPalette(n.name||n.dataIndex+"",t);return e.depth>1&&(0,r.isString)(a)&&(a=(0,W.lift)(a,(e.depth-1)/(i-1)*.5)),a}e.eachSeriesByType("sunburst",(function(e){var t=e.getData(),i=t.tree;i.eachNode((function(n){var a=n.getModel(),l=a.getModel("itemStyle").getItemStyle();l.fill||(l.fill=o(n,e,i.root.height));var s=t.ensureUniqueItemVisual(n.dataIndex,"style");(0,r.extend)(s,l)}))}))}var O=o(78587);function X(e){e.registerChartView(L),e.registerSeriesModel(E),e.registerLayout((0,r.curry)(z,"sunburst")),e.registerProcessor((0,r.curry)(O.A,"sunburst")),e.registerVisual(H),M(e)}},62722:function(e,t,o){o.d(t,{a:function(){return C}});var i=o(15215),r=o(53364),n=o(43870),a=o(5638),l=o(10992),s=o(34833),d=o(89632),u=o(98026),h=o(16563),c=o(6666),p=function(e){function t(){var o=null!==e&&e.apply(this,arguments)||this;return o.type=t.type,o._layers=[],o}return(0,i.C6)(t,e),t.prototype.render=function(e,t,o){var i=e.getData(),l=this,c=this.group,p=e.getLayerSeries(),f=i.getLayout("layoutInfo"),y=f.rect,v=f.boundaryGap;function m(e){return e.name}c.x=0,c.y=y.y+v[0];var x=new h.A(this._layersSeries||[],p,m,m),w=[];function b(t,o,u){var h=l._layers;if("remove"!==t){for(var f,y,v=[],m=[],x=p[o].indices,b=0;b<x.length;b++){var I=i.getItemLayout(x[b]),_=I.x,N=I.y0,M=I.y;v.push(_,N),m.push(_,N+M),f=i.getItemVisual(x[b],"style")}var A=i.getItemLayout(x[0]),S=e.getModel("label"),L=S.get("margin"),D=e.getModel("emphasis");if("add"===t){var T=w[o]=new n.A;y=new r.z({shape:{points:v,stackedOnPoints:m,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),T.add(y),c.add(T),e.isAnimationEnabled()&&y.setClipPath(g(y.getBoundingRect(),e,(function(){y.removeClipPath()})))}else{T=h[u];y=T.childAt(0),c.add(T),w[o]=T,a.oi(y,{shape:{points:v,stackedOnPoints:m}},e),(0,a.ap)(y)}(0,d.qM)(y,(0,d.lx)(e),{labelDataIndex:x[b-1],defaultText:i.getName(x[b-1]),inheritColor:f.fill},{normal:{verticalAlign:"middle"}}),y.setTextConfig({position:null,local:!0});var C=y.getTextContent();C&&(C.x=A.x-L,C.y=A.y0+A.y/2),y.useStyle(f),i.setItemGraphicEl(o,y),(0,s.Mx)(y,e),(0,s.Lm)(y,D.get("focus"),D.get("blurScope"),D.get("disabled"))}else c.remove(h[o])}x.add((0,u.bind)(b,this,"add")).update((0,u.bind)(b,this,"update")).remove((0,u.bind)(b,this,"remove")).execute(),this._layersSeries=p,this._layers=w},t.type="themeRiver",t}(c.A);function g(e,t,o){var i=new l.A({shape:{x:e.x-10,y:e.y-10,width:0,height:e.height+20}});return a.LW(i,{shape:{x:e.x-50,width:e.width+100,height:e.height+20}},t,o),i}var f=p,y=o(47355),v=o(97351),m=o(29756),x=o(6006),w=o(48170),b=o(58239),I=o(3961),_=2,N=function(e){function t(){var o=null!==e&&e.apply(this,arguments)||this;return o.type=t.type,o}return(0,i.C6)(t,e),t.prototype.init=function(t){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new b.A(u.bind(this.getData,this),u.bind(this.getRawData,this))},t.prototype.fixData=function(e){var t=e.length,o={},i=(0,w.Sq)(e,(function(e){return o.hasOwnProperty(e[0]+"")||(o[e[0]+""]=-1),e[2]})),r=[];i.buckets.each((function(e,t){r.push({name:t,dataList:e})}));for(var n=r.length,a=0;a<n;++a){for(var l=r[a].name,s=0;s<r[a].dataList.length;++s){var d=r[a].dataList[s][0]+"";o[d]=a}for(var d in o)o.hasOwnProperty(d)&&o[d]!==a&&(o[d]=a,e[t]=[d,0,l],t++)}return e},t.prototype.getInitialData=function(e,t){for(var o=this.getReferringComponents("singleAxis",w.US).models[0],i=o.get("type"),r=u.filter(e.data,(function(e){return void 0!==e[2]})),n=this.fixData(r||[]),a=[],l=this.nameMap=u.createHashMap(),s=0,d=0;d<n.length;++d)a.push(n[d][_]),l.get(n[d][_])||(l.set(n[d][_],s),s++);var h=(0,v.A)(n,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:(0,m.B)(i)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,c=new x.A(h,this);return c.initData(n),c},t.prototype.getLayerSeries=function(){for(var e=this.getData(),t=e.count(),o=[],i=0;i<t;++i)o[i]=i;var r=e.mapDimension("single"),n=(0,w.Sq)(o,(function(t){return e.get("name",t)})),a=[];return n.buckets.each((function(t,o){t.sort((function(t,o){return e.get(r,t)-e.get(r,o)})),a.push({name:o,indices:t})})),a},t.prototype.getAxisTooltipData=function(e,t,o){u.isArray(e)||(e=e?[e]:[]);for(var i,r=this.getData(),n=this.getLayerSeries(),a=[],l=n.length,s=0;s<l;++s){for(var d=Number.MAX_VALUE,h=-1,c=n[s].indices.length,p=0;p<c;++p){var g=r.get(e[0],n[s].indices[p]),f=Math.abs(g-t);f<=d&&(i=g,d=f,h=n[s].indices[p])}a.push(h)}return{dataIndices:a,nestestValue:i}},t.prototype.formatTooltip=function(e,t,o){var i=this.getData(),r=i.getName(e),n=i.get(i.mapDimension("value"),e);return(0,I.Qx)("nameValue",{name:r,value:n})},t.type="series.themeRiver",t.dependencies=["singleAxis"],t.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},t}(y.A),M=N,A=o(24326);function S(e,t){e.eachSeriesByType("themeRiver",(function(e){var t=e.getData(),o=e.coordinateSystem,i={},r=o.getRect();i.rect=r;var n=e.get("boundaryGap"),a=o.getAxis();if(i.boundaryGap=n,"horizontal"===a.orient){n[0]=A.lo(n[0],r.height),n[1]=A.lo(n[1],r.height);var l=r.height-n[0]-n[1];L(t,e,l)}else{n[0]=A.lo(n[0],r.width),n[1]=A.lo(n[1],r.width);var s=r.width-n[0]-n[1];L(t,e,s)}t.setLayout("layoutInfo",i)}))}function L(e,t,o){if(e.count())for(var i,r=t.coordinateSystem,n=t.getLayerSeries(),a=e.mapDimension("single"),l=e.mapDimension("value"),s=u.map(n,(function(t){return u.map(t.indices,(function(t){var o=r.dataToPoint(e.get(a,t));return o[1]=e.get(l,t),o}))})),d=D(s),h=d.y0,c=o/d.max,p=n.length,g=n[0].indices.length,f=0;f<g;++f){i=h[f]*c,e.setItemLayout(n[0].indices[f],{layerIndex:0,x:s[0][f][0],y0:i,y:s[0][f][1]*c});for(var y=1;y<p;++y)i+=s[y-1][f][1]*c,e.setItemLayout(n[y].indices[f],{layerIndex:y,x:s[y][f][0],y0:i,y:s[y][f][1]*c})}}function D(e){for(var t=e.length,o=e[0].length,i=[],r=[],n=0,a=0;a<o;++a){for(var l=0,s=0;s<t;++s)l+=e[s][a][1];l>n&&(n=l),i.push(l)}for(var d=0;d<o;++d)r[d]=(n-i[d])/2;n=0;for(var u=0;u<o;++u){var h=i[u]+r[u];h>n&&(n=h)}return{y0:r,max:n}}var T=o(78587);function C(e){e.registerChartView(f),e.registerSeriesModel(M),e.registerLayout(S),e.registerProcessor((0,T.A)("themeRiver"))}},96900:function(e,t,o){o.d(t,{a:function(){return re}});var i=o(15215),r=o(98026),n=o(43870),a=o(5638),l=o(53849),s=o(69622),d=o(10128),u=o(34253);function h(e){var t=e;t.hierNode={defaultAncestor:null,ancestor:t,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};var o,i,r=[t];while(o=r.pop())if(i=o.children,o.isExpand&&i.length)for(var n=i.length,a=n-1;a>=0;a--){var l=i[a];l.hierNode={defaultAncestor:null,ancestor:l,prelim:0,modifier:0,change:0,shift:0,i:a,thread:null},r.push(l)}}function c(e,t){var o=e.isExpand?e.children:[],i=e.parentNode.children,r=e.hierNode.i?i[e.hierNode.i-1]:null;if(o.length){v(e);var n=(o[0].hierNode.prelim+o[o.length-1].hierNode.prelim)/2;r?(e.hierNode.prelim=r.hierNode.prelim+t(e,r),e.hierNode.modifier=e.hierNode.prelim-n):e.hierNode.prelim=n}else r&&(e.hierNode.prelim=r.hierNode.prelim+t(e,r));e.parentNode.hierNode.defaultAncestor=m(e,r,e.parentNode.hierNode.defaultAncestor||i[0],t)}function p(e){var t=e.hierNode.prelim+e.parentNode.hierNode.modifier;e.setLayout({x:t},!0),e.hierNode.modifier+=e.parentNode.hierNode.modifier}function g(e){return arguments.length?e:_}function f(e,t){return e-=Math.PI/2,{x:t*Math.cos(e),y:t*Math.sin(e)}}function y(e,t){return u.dV(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function v(e){var t=e.children,o=t.length,i=0,r=0;while(--o>=0){var n=t[o];n.hierNode.prelim+=i,n.hierNode.modifier+=i,r+=n.hierNode.change,i+=n.hierNode.shift+r}}function m(e,t,o,i){if(t){var r=e,n=e,a=n.parentNode.children[0],l=t,s=r.hierNode.modifier,d=n.hierNode.modifier,u=a.hierNode.modifier,h=l.hierNode.modifier;while(l=x(l),n=w(n),l&&n){r=x(r),a=w(a),r.hierNode.ancestor=e;var c=l.hierNode.prelim+h-n.hierNode.prelim-d+i(l,n);c>0&&(I(b(l,e,o),e,c),d+=c,s+=c),h+=l.hierNode.modifier,d+=n.hierNode.modifier,s+=r.hierNode.modifier,u+=a.hierNode.modifier}l&&!x(r)&&(r.hierNode.thread=l,r.hierNode.modifier+=h-s),n&&!w(a)&&(a.hierNode.thread=n,a.hierNode.modifier+=d-u,o=e)}return o}function x(e){var t=e.children;return t.length&&e.isExpand?t[t.length-1]:e.hierNode.thread}function w(e){var t=e.children;return t.length&&e.isExpand?t[0]:e.hierNode.thread}function b(e,t,o){return e.hierNode.ancestor.parentNode===t.parentNode?e.hierNode.ancestor:o}function I(e,t,o){var i=o/(t.hierNode.i-e.hierNode.i);t.hierNode.change-=i,t.hierNode.shift+=o,t.hierNode.modifier+=o,t.hierNode.prelim+=o,e.hierNode.change+=i}function _(e,t){return e.parentNode===t.parentNode?1:2}var N=o(48813),M=o(56219),A=o(56366),S=o(81722),L=o(72589),D=o(24326),T=o(6666),C=o(59482),R=o(34833),V=function(){function e(){this.parentPoint=[],this.childPoints=[]}return e}(),P=function(e){function t(t){return e.call(this,t)||this}return(0,i.C6)(t,e),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new V},t.prototype.buildPath=function(e,t){var o=t.childPoints,i=o.length,r=t.parentPoint,n=o[0],a=o[i-1];if(1===i)return e.moveTo(r[0],r[1]),void e.lineTo(n[0],n[1]);var l=t.orient,s="TB"===l||"BT"===l?0:1,d=1-s,u=(0,D.lo)(t.forkPosition,1),h=[];h[s]=r[s],h[d]=r[d]+(a[d]-r[d])*u,e.moveTo(r[0],r[1]),e.lineTo(h[0],h[1]),e.moveTo(n[0],n[1]),h[s]=n[s],e.lineTo(h[0],h[1]),h[s]=a[s],e.lineTo(h[0],h[1]),e.lineTo(a[0],a[1]);for(var c=1;c<i-1;c++){var p=o[c];e.moveTo(p[0],p[1]),h[s]=p[s],e.lineTo(h[0],h[1])}},t}(C.Ay),E=function(e){function t(){var o=null!==e&&e.apply(this,arguments)||this;return o.type=t.type,o._mainGroup=new n.A,o}return(0,i.C6)(t,e),t.prototype.init=function(e,t){this._controller=new S.A(t.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},t.prototype.render=function(e,t,o){var i=e.getData(),r=e.layoutInfo,n=this._mainGroup,a=e.get("layout");"radial"===a?(n.x=r.x+r.width/2,n.y=r.y+r.height/2):(n.x=r.x,n.y=r.y),this._updateViewCoordSys(e,o),this._updateController(e,t,o);var l=this._data;i.diff(l).add((function(t){k(i,t)&&z(i,t,null,n,e)})).update((function(t,o){var r=l.getItemGraphicEl(o);k(i,t)?z(i,t,r,n,e):r&&H(l,o,r,n,e)})).remove((function(t){var o=l.getItemGraphicEl(t);o&&H(l,t,o,n,e)})).execute(),this._nodeScaleRatio=e.get("nodeScaleRatio"),this._updateNodeAndLinkScale(e),!0===e.get("expandAndCollapse")&&i.eachItemGraphicEl((function(t,i){t.off("click").on("click",(function(){o.dispatchAction({type:"treeExpandAndCollapse",seriesId:e.id,dataIndex:i})}))})),this._data=i},t.prototype._updateViewCoordSys=function(e,t){var o=e.getData(),i=[];o.each((function(e){var t=o.getItemLayout(e);!t||isNaN(t.x)||isNaN(t.y)||i.push([+t.x,+t.y])}));var r=[],n=[];N.Cr(i,r,n);var a=this._min,l=this._max;n[0]-r[0]===0&&(r[0]=a?a[0]:r[0]-1,n[0]=l?l[0]:n[0]+1),n[1]-r[1]===0&&(r[1]=a?a[1]:r[1]-1,n[1]=l?l[1]:n[1]+1);var s=e.coordinateSystem=new M.A;s.zoomLimit=e.get("scaleLimit"),s.setBoundingRect(r[0],r[1],n[0]-r[0],n[1]-r[1]),s.setCenter(e.get("center"),t),s.setZoom(e.get("zoom")),this.group.attr({x:s.x,y:s.y,scaleX:s.scaleX,scaleY:s.scaleY}),this._min=r,this._max=n},t.prototype._updateController=function(e,t,o){var i=this,r=this._controller,n=this._controllerHost,a=this.group;r.setPointerChecker((function(t,i,r){var n=a.getBoundingRect();return n.applyTransform(a.transform),n.contain(i,r)&&!(0,L.I)(t,o,e)})),r.enable(e.get("roam")),n.zoomLimit=e.get("scaleLimit"),n.zoom=e.coordinateSystem.getZoom(),r.off("pan").off("zoom").on("pan",(function(t){A.t(n,t.dx,t.dy),o.dispatchAction({seriesId:e.id,type:"treeRoam",dx:t.dx,dy:t.dy})})).on("zoom",(function(t){A.x(n,t.scale,t.originX,t.originY),o.dispatchAction({seriesId:e.id,type:"treeRoam",zoom:t.scale,originX:t.originX,originY:t.originY}),i._updateNodeAndLinkScale(e),o.updateLabelLayout()}))},t.prototype._updateNodeAndLinkScale=function(e){var t=e.getData(),o=this._getNodeGlobalScale(e);t.eachItemGraphicEl((function(e,t){e.setSymbolScale(o)}))},t.prototype._getNodeGlobalScale=function(e){var t=e.coordinateSystem;if("view"!==t.type)return 1;var o=this._nodeScaleRatio,i=t.scaleX||1,r=t.getZoom(),n=(r-1)*o+1;return n/i},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},t.type="tree",t}(T.A);function k(e,t){var o=e.getItemLayout(t);return o&&!isNaN(o.x)&&!isNaN(o.y)}function z(e,t,o,i,n){var l=!o,u=e.tree.getNodeByDataIndex(t),h=u.getModel(),c=u.getVisual("style").fill,p=!1===u.isExpand&&0!==u.children.length?c:"#fff",g=e.tree.root,f=u.parentNode===g?u:u.parentNode||u,y=e.getItemGraphicEl(f.dataIndex),v=f.getLayout(),m=y?{x:y.__oldX,y:y.__oldY,rawX:y.__radialOldRawX,rawY:y.__radialOldRawY}:v,x=u.getLayout();l?(o=new d.A(e,t,null,{symbolInnerColor:p,useNameLabel:!0}),o.x=m.x,o.y=m.y):o.updateData(e,t,null,{symbolInnerColor:p,useNameLabel:!0}),o.__radialOldRawX=o.__radialRawX,o.__radialOldRawY=o.__radialRawY,o.__radialRawX=x.rawX,o.__radialRawY=x.rawY,i.add(o),e.setItemGraphicEl(t,o),o.__oldX=o.x,o.__oldY=o.y,a.oi(o,{x:x.x,y:x.y},n);var w=o.getSymbolPath();if("radial"===n.get("layout")){var b=g.children[0],I=b.getLayout(),_=b.children.length,N=void 0,M=void 0;if(x.x===I.x&&!0===u.isExpand&&b.children.length){var A={x:(b.children[0].getLayout().x+b.children[_-1].getLayout().x)/2,y:(b.children[0].getLayout().y+b.children[_-1].getLayout().y)/2};N=Math.atan2(A.y-I.y,A.x-I.x),N<0&&(N=2*Math.PI+N),M=A.x<I.x,M&&(N-=Math.PI)}else N=Math.atan2(x.y-I.y,x.x-I.x),N<0&&(N=2*Math.PI+N),0===u.children.length||0!==u.children.length&&!1===u.isExpand?(M=x.x<I.x,M&&(N-=Math.PI)):(M=x.x>I.x,M||(N-=Math.PI));var S=M?"left":"right",L=h.getModel("label"),D=L.get("rotate"),T=D*(Math.PI/180),C=w.getTextContent();C&&(w.setTextConfig({position:L.get("position")||S,rotation:null==D?-N:T,origin:"center"}),C.setStyle("verticalAlign","middle"))}var V=h.get(["emphasis","focus"]),P="relative"===V?r.concatArray(u.getAncestorsIndices(),u.getDescendantIndices()):"ancestor"===V?u.getAncestorsIndices():"descendant"===V?u.getDescendantIndices():null;P&&((0,s.z)(o).focus=P),B(n,u,g,o,m,v,x,i),o.__edge&&(o.onHoverStateChange=function(t){if("blur"!==t){var i=u.parentNode&&e.getItemGraphicEl(u.parentNode.dataIndex);i&&i.hoverState===R.zX||(0,R.Pk)(o.__edge,t)}})}function B(e,t,o,i,n,s,d,u){var h=t.getModel(),c=e.get("edgeShape"),p=e.get("layout"),g=e.getOrient(),f=e.get(["lineStyle","curveness"]),y=e.get("edgeForkPosition"),v=h.getModel("lineStyle").getLineStyle(),m=i.__edge;if("curve"===c)t.parentNode&&t.parentNode!==o&&(m||(m=i.__edge=new l.A({shape:O(p,g,f,n,n)})),a.oi(m,{shape:O(p,g,f,s,d)},e));else if("polyline"===c)if("orthogonal"===p){if(t!==o&&t.children&&0!==t.children.length&&!0===t.isExpand){for(var x=t.children,w=[],b=0;b<x.length;b++){var I=x[b].getLayout();w.push([I.x,I.y])}m||(m=i.__edge=new P({shape:{parentPoint:[d.x,d.y],childPoints:[[d.x,d.y]],orient:g,forkPosition:y}})),a.oi(m,{shape:{parentPoint:[d.x,d.y],childPoints:w}},e)}}else 0;m&&("polyline"!==c||t.isExpand)&&(m.useStyle(r.defaults({strokeNoScale:!0,fill:null},v)),(0,R.Mx)(m,h,"lineStyle"),(0,R.DW)(m),u.add(m))}function G(e,t,o,i,r){var n=t.tree.root,l=W(n,e),s=l.source,d=l.sourceLayout,u=t.getItemGraphicEl(e.dataIndex);if(u){var h=t.getItemGraphicEl(s.dataIndex),c=h.__edge,p=u.__edge||(!1===s.isExpand||1===s.children.length?c:void 0),g=i.get("edgeShape"),f=i.get("layout"),y=i.get("orient"),v=i.get(["lineStyle","curveness"]);p&&("curve"===g?a.Nz(p,{shape:O(f,y,v,d,d),style:{opacity:0}},i,{cb:function(){o.remove(p)},removeOpt:r}):"polyline"===g&&"orthogonal"===i.get("layout")&&a.Nz(p,{shape:{parentPoint:[d.x,d.y],childPoints:[[d.x,d.y]]},style:{opacity:0}},i,{cb:function(){o.remove(p)},removeOpt:r}))}}function W(e,t){var o,i=t.parentNode===e?t:t.parentNode||t;while(o=i.getLayout(),null==o)i=i.parentNode===e?i:i.parentNode||i;return{source:i,sourceLayout:o}}function H(e,t,o,i,r){var n=e.tree.getNodeByDataIndex(t),l=e.tree.root,s=W(l,n).sourceLayout,d={duration:r.get("animationDurationUpdate"),easing:r.get("animationEasingUpdate")};a.Nz(o,{x:s.x+1,y:s.y+1},r,{cb:function(){i.remove(o),e.setItemGraphicEl(t,null)},removeOpt:d}),o.fadeOut(null,e.hostModel,{fadeLabel:!0,animation:d}),n.children.forEach((function(t){G(t,e,i,r,d)})),G(n,e,i,r,d)}function O(e,t,o,i,r){var n,a,l,s,d,u,h,c;if("radial"===e){d=i.rawX,h=i.rawY,u=r.rawX,c=r.rawY;var p=f(d,h),g=f(d,h+(c-h)*o),y=f(u,c+(h-c)*o),v=f(u,c);return{x1:p.x||0,y1:p.y||0,x2:v.x||0,y2:v.y||0,cpx1:g.x||0,cpy1:g.y||0,cpx2:y.x||0,cpy2:y.y||0}}return d=i.x,h=i.y,u=r.x,c=r.y,"LR"!==t&&"RL"!==t||(n=d+(u-d)*o,a=h,l=u+(d-u)*o,s=c),"TB"!==t&&"BT"!==t||(n=d,a=h+(c-h)*o,l=u,s=c+(h-c)*o),{x1:d,y1:h,x2:u,y2:c,cpx1:n,cpy1:a,cpx2:l,cpy2:s}}var X=E,Y=o(47355),q=o(15719),Z=o(5202),U=o(3961),F=o(41616),J=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hasSymbolVisual=!0,t.ignoreStyleOnData=!0,t}return(0,i.C6)(t,e),t.prototype.getInitialData=function(e){var t={name:e.name,children:e.data},o=e.leaves||{},i=new Z.A(o,this,this.ecModel),r=q.A.createTree(t,this,n);function n(e){e.wrapMethod("getItemModel",(function(e,t){var o=r.getNodeByDataIndex(t);return o&&o.children.length&&o.isExpand||(e.parentModel=i),e}))}var a=0;r.eachNode("preorder",(function(e){e.depth>a&&(a=e.depth)}));var l=e.expandAndCollapse,s=l&&e.initialTreeDepth>=0?e.initialTreeDepth:a;return r.root.eachNode("preorder",(function(e){var t=e.hostTree.data.getRawDataItem(e.dataIndex);e.isExpand=t&&null!=t.collapsed?!t.collapsed:e.depth<=s})),r.data},t.prototype.getOrient=function(){var e=this.get("orient");return"horizontal"===e?e="LR":"vertical"===e&&(e="TB"),e},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.formatTooltip=function(e,t,o){var i=this.getData().tree,r=i.root.children[0],n=i.getNodeByDataIndex(e),a=n.getValue(),l=n.name;while(n&&n!==r)l=n.parentNode.name+"."+l,n=n.parentNode;return(0,U.Qx)("nameValue",{name:l,value:a,noValue:isNaN(a)||null==a})},t.prototype.getDataParams=function(t){var o=e.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(t);return o.treeAncestors=(0,F.ev)(i,this),o.collapsed=!i.isExpand,o},t.type="series.tree",t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},t}(Y.A),Q=J;function $(e,t,o){var i,r=[e],n=[];while(i=r.pop())if(n.push(i),i.isExpand){var a=i.children;if(a.length)for(var l=0;l<a.length;l++)r.push(a[l])}while(i=n.pop())t(i,o)}function K(e,t){var o,i=[e];while(o=i.pop())if(t(o),o.isExpand){var r=o.children;if(r.length)for(var n=r.length-1;n>=0;n--)i.push(r[n])}}function j(e,t){e.eachSeriesByType("tree",(function(e){ee(e,t)}))}function ee(e,t){var o=y(e,t);e.layoutInfo=o;var i=e.get("layout"),r=0,n=0,a=null;"radial"===i?(r=2*Math.PI,n=Math.min(o.height,o.width)/2,a=g((function(e,t){return(e.parentNode===t.parentNode?1:2)/e.depth}))):(r=o.width,n=o.height,a=g());var l=e.getData().tree.root,s=l.children[0];if(s){h(l),$(s,c,a),l.hierNode.modifier=-s.hierNode.prelim,K(s,p);var d=s,u=s,v=s;K(s,(function(e){var t=e.getLayout().x;t<d.getLayout().x&&(d=e),t>u.getLayout().x&&(u=e),e.depth>v.depth&&(v=e)}));var m=d===u?1:a(d,u)/2,x=m-d.getLayout().x,w=0,b=0,I=0,_=0;if("radial"===i)w=r/(u.getLayout().x+m+x),b=n/(v.depth-1||1),K(s,(function(e){I=(e.getLayout().x+x)*w,_=(e.depth-1)*b;var t=f(I,_);e.setLayout({x:t.x,y:t.y,rawX:I,rawY:_},!0)}));else{var N=e.getOrient();"RL"===N||"LR"===N?(b=n/(u.getLayout().x+m+x),w=r/(v.depth-1||1),K(s,(function(e){_=(e.getLayout().x+x)*b,I="LR"===N?(e.depth-1)*w:r-(e.depth-1)*w,e.setLayout({x:I,y:_},!0)}))):"TB"!==N&&"BT"!==N||(w=r/(u.getLayout().x+m+x),b=n/(v.depth-1||1),K(s,(function(e){I=(e.getLayout().x+x)*w,_="TB"===N?(e.depth-1)*b:n-(e.depth-1)*b,e.setLayout({x:I,y:_},!0)})))}}}function te(e){e.eachSeriesByType("tree",(function(e){var t=e.getData(),o=t.tree;o.eachNode((function(e){var o=e.getModel(),i=o.getModel("itemStyle").getItemStyle(),n=t.ensureUniqueItemVisual(e.dataIndex,"style");(0,r.extend)(n,i)}))}))}var oe=o(78536);function ie(e){e.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},(function(e,t){t.eachComponent({mainType:"series",subType:"tree",query:e},(function(t){var o=e.dataIndex,i=t.getData().tree,r=i.getNodeByDataIndex(o);r.isExpand=!r.isExpand}))})),e.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},(function(e,t,o){t.eachComponent({mainType:"series",subType:"tree",query:e},(function(t){var i=t.coordinateSystem,r=(0,oe.f)(i,e,void 0,o);t.setCenter&&t.setCenter(r.center),t.setZoom&&t.setZoom(r.zoom)}))}))}function re(e){e.registerChartView(X),e.registerSeriesModel(Q),e.registerLayout(j),e.registerVisual(te),ie(e)}},84510:function(e,t,o){o.d(t,{a:function(){return Be}});var i=o(41616),r=o(98026),n=["treemapZoomToNode","treemapRender","treemapMove"];function a(e){for(var t=0;t<n.length;t++)e.registerAction({type:n[t],update:"updateView"},r.noop);e.registerAction({type:"treemapRootToNode",update:"updateView"},(function(e,t){function o(t,o){var r=["treemapZoomToNode","treemapRootToNode"],n=i.mw(e,r,t);if(n){var a=t.getViewRoot();a&&(e.direction=i.x5(a,n.node)?"rollUp":"drillDown"),t.resetViewRoot(n.node)}}t.eachComponent({mainType:"series",subType:"treemap",query:e},o)}))}var l=o(15215),s=o(47355),d=o(15719),u=o(5202),h=o(48170),c=o(3961),p=o(68866),g=function(e){function t(){var o=null!==e&&e.apply(this,arguments)||this;return o.type=t.type,o.preventUsingHoverLayer=!0,o}return(0,l.C6)(t,e),t.prototype.getInitialData=function(e,t){var o={name:e.name,children:e.data};f(o);var i=e.levels||[],n=this.designatedVisualItemStyle={},a=new u.A({itemStyle:n},this,t);i=e.levels=y(i,t);var l=r.map(i||[],(function(e){return new u.A(e,a,t)}),this),s=d.A.createTree(o,this,h);function h(e){e.wrapMethod("getItemModel",(function(e,t){var o=s.getNodeByDataIndex(t),i=o?l[o.depth]:null;return e.parentModel=i||a,e}))}return s.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.formatTooltip=function(e,t,o){var i=this.getData(),r=this.getRawValue(e),n=i.getName(e);return(0,c.Qx)("nameValue",{name:n,value:r})},t.prototype.getDataParams=function(t){var o=e.prototype.getDataParams.apply(this,arguments),r=this.getData().tree.getNodeByDataIndex(t);return o.treeAncestors=(0,i.ev)(r,this),o.treePathInfo=o.treeAncestors,o},t.prototype.setLayoutInfo=function(e){this.layoutInfo=this.layoutInfo||{},r.extend(this.layoutInfo,e)},t.prototype.mapIdToIndex=function(e){var t=this._idIndexMap;t||(t=this._idIndexMap=r.createHashMap(),this._idIndexMapCount=0);var o=t.get(e);return null==o&&t.set(e,o=this._idIndexMapCount++),o},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var t=this.getRawData().tree.root;e&&(e===t||t.contains(e))||(this._viewRoot=t)},t.prototype.enableAriaDecal=function(){(0,p.A)(this)},t.type="series.treemap",t.layoutMode="box",t.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"▶",zoomToNodeRatio:.1024,scaleLimit:null,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},t}(s.A);function f(e){var t=0;r.each(e.children,(function(e){f(e);var o=e.value;r.isArray(o)&&(o=o[0]),t+=o}));var o=e.value;r.isArray(o)&&(o=o[0]),(null==o||isNaN(o))&&(o=t),o<0&&(o=0),r.isArray(e.value)?e.value[0]=o:e.value=o}function y(e,t){var o=(0,h.qB)(t.get("color")),i=(0,h.qB)(t.get(["aria","decal","decals"]));if(o){var n,a;e=e||[],r.each(e,(function(e){var t=new u.A(e),o=t.get("color"),i=t.get("decal");(t.get(["itemStyle","color"])||o&&"none"!==o)&&(n=!0),(t.get(["itemStyle","decal"])||i&&"none"!==i)&&(a=!0)}));var l=e[0]||(e[0]={});return n||(l.color=o.slice()),!a&&i&&(l.decal=i.slice()),e}}var v=g,m=o(43870),x=o(10992),w=o(69622),b=o(34833),I=o(16563),_=o(52505),N=o(32322),M=o(34253),A=o(89632),S=8,L=8,D=5,T=function(){function e(e){this.group=new m.A,e.add(this.group)}return e.prototype.render=function(e,t,o,i){var r=e.getModel("breadcrumb"),n=this.group;if(n.removeAll(),r.get("show")&&o){var a=r.getModel("itemStyle"),l=r.getModel("emphasis"),s=a.getModel("textStyle"),d=l.getModel(["itemStyle","textStyle"]),u={pos:{left:r.get("left"),right:r.get("right"),top:r.get("top"),bottom:r.get("bottom")},box:{width:t.getWidth(),height:t.getHeight()},emptyItemWidth:r.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(o,u,s),this._renderContent(e,u,a,l,s,d,i),M.m$(n,u.pos,u.box)}},e.prototype._prepare=function(e,t,o){for(var i=e;i;i=i.parentNode){var r=(0,h.vS)(i.getModel().get("name"),""),n=o.getTextRect(r),a=Math.max(n.width+2*S,t.emptyItemWidth);t.totalWidth+=a+L,t.renderList.push({node:i,text:r,width:a})}},e.prototype._renderContent=function(e,t,o,i,n,a,l){for(var s=0,d=t.emptyItemWidth,u=e.get(["breadcrumb","height"]),h=M.HU(t.pos,t.box),c=t.totalWidth,p=t.renderList,g=i.getModel("itemStyle").getItemStyle(),f=p.length-1;f>=0;f--){var y=p[f],v=y.node,m=y.width,x=y.text;c>h.width&&(c-=m-d,m=d,x=null);var w=new _.A({shape:{points:C(s,0,m,u,f===p.length-1,0===f)},style:(0,r.defaults)(o.getItemStyle(),{lineJoin:"bevel"}),textContent:new N.Ay({style:(0,A.VB)(n,{text:x})}),textConfig:{position:"inside"},z2:1e4*b.CA,onclick:(0,r.curry)(l,v)});w.disableLabelAnimation=!0,w.getTextContent().ensureState("emphasis").style=(0,A.VB)(a,{text:x}),w.ensureState("emphasis").style=g,(0,b.Lm)(w,i.get("focus"),i.get("blurScope"),i.get("disabled")),this.group.add(w),R(w,e,v),s+=m+L}},e.prototype.remove=function(){this.group.removeAll()},e}();function C(e,t,o,i,r,n){var a=[[r?e:e-D,t],[e+o,t],[e+o,t+i],[r?e:e-D,t+i]];return!n&&a.splice(2,0,[e+o+D,t+i/2]),!r&&a.push([e,t+i/2]),a}function R(e,t,o){(0,w.z)(e).eventData={componentType:"series",componentSubType:"treemap",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:o&&o.dataIndex,name:o&&o.name},treePathInfo:o&&(0,i.ev)(o,t)}}var V=T,P=o(81722),E=o(29308),k=o(45587),z=o(63253),B=o(32944),G=o(6666),W=o(71519),H=o(83412),O=m.A,X=x.A,Y=3,q="label",Z="upperLabel",U=10*b.CA,F=2*b.CA,J=3*b.CA,Q=(0,B.A)([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),$=function(e){var t=Q(e);return t.stroke=t.fill=t.lineWidth=null,t},K=(0,h.$r)(),j=function(e){function t(){var o=null!==e&&e.apply(this,arguments)||this;return o.type=t.type,o._state="ready",o._storage=ee(),o}return(0,l.C6)(t,e),t.prototype.render=function(e,t,o,n){var a=t.findComponents({mainType:"series",subType:"treemap",query:n});if(!((0,r.indexOf)(a,e)<0)){this.seriesModel=e,this.api=o,this.ecModel=t;var l=["treemapZoomToNode","treemapRootToNode"],s=i.mw(n,l,e),d=n&&n.type,u=e.layoutInfo,h=!this._oldTree,c=this._storage,p="treemapRootToNode"===d&&s&&c?{rootNodeGroup:c.nodeGroup[s.node.getRawIndex()],direction:n.direction}:null,g=this._giveContainerGroup(u),f=e.get("animation"),y=this._doRender(g,e,p);!f||h||d&&"treemapZoomToNode"!==d&&"treemapRootToNode"!==d?y.renderFinally():this._doAnimation(g,y,e,p),this._resetController(o),this._renderBreadcrumb(e,o,s)}},t.prototype._giveContainerGroup=function(e){var t=this._containerGroup;return t||(t=this._containerGroup=new O,this._initEvents(t),this.group.add(t)),t.x=e.x,t.y=e.y,t},t.prototype._doRender=function(e,t,o){var i=t.getData().tree,n=this._oldTree,a=ee(),l=ee(),s=this._storage,d=[];function u(e,i,r,n){return te(t,l,s,o,a,d,e,i,r,n)}g(i.root?[i.root]:[],n&&n.root?[n.root]:[],e,i===n||!n,0);var h=f(s);if(this._oldTree=i,this._storage=l,this._controllerHost){var c=this.seriesModel.layoutInfo,p=i.root.getLayout();p.width===c.width&&p.height===c.height&&(this._controllerHost.zoom=1)}return{lastsForAnimation:a,willDeleteEls:h,renderFinally:y};function g(e,t,o,i,n){function a(e){return e.getId()}function l(r,a){var l=null!=r?e[r]:null,s=null!=a?t[a]:null,d=u(l,s,o,n);d&&g(l&&l.viewChildren||[],s&&s.viewChildren||[],d,i,n+1)}i?(t=e,(0,r.each)(e,(function(e,t){!e.isRemoved()&&l(t,t)}))):new I.A(t,e,a,a).add(l).update(l).remove((0,r.curry)(l,null)).execute()}function f(e){var t=ee();return e&&(0,r.each)(e,(function(e,o){var i=t[o];(0,r.each)(e,(function(e){e&&(i.push(e),K(e).willDelete=!0)}))})),t}function y(){(0,r.each)(h,(function(e){(0,r.each)(e,(function(e){e.parent&&e.parent.remove(e)}))})),(0,r.each)(d,(function(e){e.invisible=!0,e.dirty()}))}},t.prototype._doAnimation=function(e,t,o,i){var n=o.get("animationDurationUpdate"),a=o.get("animationEasing"),l=((0,r.isFunction)(n)?0:n)||0,s=((0,r.isFunction)(a)?null:a)||"cubicOut",d=z.x();(0,r.each)(t.willDeleteEls,(function(e,t){(0,r.each)(e,(function(e,o){if(!e.invisible){var r,n=e.parent,a=K(n);if(i&&"drillDown"===i.direction)r=n===i.rootNodeGroup?{shape:{x:0,y:0,width:a.nodeWidth,height:a.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var u=0,h=0;a.willDelete||(u=a.nodeWidth/2,h=a.nodeHeight/2),r="nodeGroup"===t?{x:u,y:h,style:{opacity:0}}:{shape:{x:u,y:h,width:0,height:0},style:{opacity:0}}}r&&d.add(e,r,l,0,s)}}))})),(0,r.each)(this._storage,(function(e,o){(0,r.each)(e,(function(e,i){var n=t.lastsForAnimation[o][i],a={};n&&(e instanceof m.A?null!=n.oldX&&(a.x=e.x,a.y=e.y,e.x=n.oldX,e.y=n.oldY):(n.oldShape&&(a.shape=(0,r.extend)({},e.shape),e.setShape(n.oldShape)),n.fadein?(e.setStyle("opacity",0),a.style={opacity:1}):1!==e.style.opacity&&(a.style={opacity:1})),d.add(e,a,l,0,s))}))}),this),this._state="animating",d.finished((0,r.bind)((function(){this._state="ready",t.renderFinally()}),this)).start()},t.prototype._resetController=function(e){var t=this._controller,o=this._controllerHost;o||(this._controllerHost={target:this.group},o=this._controllerHost),t||(t=this._controller=new P.A(e.getZr()),t.enable(this.seriesModel.get("roam")),o.zoomLimit=this.seriesModel.get("scaleLimit"),o.zoom=this.seriesModel.get("zoom"),t.on("pan",(0,r.bind)(this._onPan,this)),t.on("zoom",(0,r.bind)(this._onZoom,this)));var i=new E.A(0,0,e.getWidth(),e.getHeight());t.setPointerChecker((function(e,t,o){return i.contain(t,o)}))},t.prototype._clearController=function(){var e=this._controller;this._controllerHost=null,e&&(e.dispose(),e=null)},t.prototype._onPan=function(e){if("animating"!==this._state&&(Math.abs(e.dx)>Y||Math.abs(e.dy)>Y)){var t=this.seriesModel.getData().tree.root;if(!t)return;var o=t.getLayout();if(!o)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:o.x+e.dx,y:o.y+e.dy,width:o.width,height:o.height}})}},t.prototype._onZoom=function(e){var t=e.originX,o=e.originY,i=e.scale;if("animating"!==this._state){var r=this.seriesModel.getData().tree.root;if(!r)return;var n=r.getLayout();if(!n)return;var a=new E.A(n.x,n.y,n.width,n.height),l=null,s=this._controllerHost;l=s.zoomLimit;var d=s.zoom=s.zoom||1;if(d*=i,l){var u=l.min||0,h=l.max||1/0;d=Math.max(Math.min(h,d),u)}var c=d/s.zoom;s.zoom=d;var p=this.seriesModel.layoutInfo;t-=p.x,o-=p.y;var g=k.create();k.translate(g,g,[-t,-o]),k.scale(g,g,[c,c]),k.translate(g,g,[t,o]),a.applyTransform(g),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:a.x,y:a.y,width:a.width,height:a.height}})}},t.prototype._initEvents=function(e){var t=this;e.on("click",(function(e){if("ready"===t._state){var o=t.seriesModel.get("nodeClick",!0);if(o){var i=t.findTarget(e.offsetX,e.offsetY);if(i){var r=i.node;if(r.getLayout().isLeafRoot)t._rootToNode(i);else if("zoomToNode"===o)t._zoomToNode(i);else if("link"===o){var n=r.hostTree.data.getItemModel(r.dataIndex),a=n.get("link",!0),l=n.get("target",!0)||"blank";a&&(0,H.JW)(a,l)}}}}}),this)},t.prototype._renderBreadcrumb=function(e,t,o){var r=this;o||(o=null!=e.get("leafDepth",!0)?{node:e.getViewRoot()}:this.findTarget(t.getWidth()/2,t.getHeight()/2),o||(o={node:e.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new V(this.group))).render(e,t,o.node,(function(t){"animating"!==r._state&&(i.x5(e.getViewRoot(),t)?r._rootToNode({node:t}):r._zoomToNode({node:t}))}))},t.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=ee(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},t.prototype.dispose=function(){this._clearController()},t.prototype._zoomToNode=function(e){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},t.prototype._rootToNode=function(e){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},t.prototype.findTarget=function(e,t){var o,i=this.seriesModel.getViewRoot();return i.eachNode({attr:"viewChildren",order:"preorder"},(function(i){var r=this._storage.background[i.getRawIndex()];if(r){var n=r.transformCoordToLocal(e,t),a=r.shape;if(!(a.x<=n[0]&&n[0]<=a.x+a.width&&a.y<=n[1]&&n[1]<=a.y+a.height))return!1;o={node:i,offsetX:n[0],offsetY:n[1]}}}),this),o},t.type="treemap",t}(G.A);function ee(){return{nodeGroup:[],background:[],content:[]}}function te(e,t,o,i,n,a,l,s,d,u){if(l){var c=l.getLayout(),p=e.getData(),g=l.getModel();if(p.setItemGraphicEl(l.dataIndex,null),c&&c.isInView){var f=c.width,y=c.height,v=c.borderWidth,x=c.invisible,I=l.getRawIndex(),_=s&&s.getRawIndex(),N=l.viewChildren,M=c.upperHeight,S=N&&N.length,L=g.getModel("itemStyle"),D=g.getModel(["emphasis","itemStyle"]),T=g.getModel(["blur","itemStyle"]),C=g.getModel(["select","itemStyle"]),R=L.get("borderRadius")||0,V=re("nodeGroup",O);if(V){if(d.add(V),V.x=c.x||0,V.y=c.y||0,V.markRedraw(),K(V).nodeWidth=f,K(V).nodeHeight=y,c.isAboveViewRoot)return V;var P=re("background",X,u,F);P&&U(V,P,S&&c.upperLabelHeight);var E=g.getModel("emphasis"),k=E.get("focus"),z=E.get("blurScope"),B=E.get("disabled"),G="ancestor"===k?l.getAncestorsIndices():"descendant"===k?l.getDescendantIndices():k;if(S)(0,b.u6)(V)&&(0,b.ix)(V,!1),P&&((0,b.ix)(P,!B),p.setItemGraphicEl(l.dataIndex,P),(0,b.gR)(P,G,z));else{var H=re("content",X,u,J);H&&j(V,H),P.disableMorphing=!0,P&&(0,b.u6)(P)&&(0,b.ix)(P,!1),(0,b.ix)(V,!B),p.setItemGraphicEl(l.dataIndex,V);var Y=g.getShallow("cursor");Y&&H.attr("cursor",Y),(0,b.gR)(V,G,z)}return V}}}function U(t,o,i){var r=(0,w.z)(o);if(r.dataIndex=l.dataIndex,r.seriesIndex=e.seriesIndex,o.setShape({x:0,y:0,width:f,height:y,r:R}),x)ee(o);else{o.invisible=!1;var n=l.getVisual("style"),a=n.stroke,s=$(L);s.fill=a;var d=Q(D);d.fill=D.get("borderColor");var u=Q(T);u.fill=T.get("borderColor");var h=Q(C);if(h.fill=C.get("borderColor"),i){var c=f-2*v;te(o,a,n.opacity,{x:v,y:0,width:c,height:M})}else o.removeTextContent();o.setStyle(s),o.ensureState("emphasis").style=d,o.ensureState("blur").style=u,o.ensureState("select").style=h,(0,b.DW)(o)}t.add(o)}function j(t,o){var i=(0,w.z)(o);i.dataIndex=l.dataIndex,i.seriesIndex=e.seriesIndex;var r=Math.max(f-2*v,0),n=Math.max(y-2*v,0);if(o.culling=!0,o.setShape({x:v,y:v,width:r,height:n,r:R}),x)ee(o);else{o.invisible=!1;var a=l.getVisual("style"),s=a.fill,d=$(L);d.fill=s,d.decal=a.decal;var u=Q(D),h=Q(T),c=Q(C);te(o,s,a.opacity,null),o.setStyle(d),o.ensureState("emphasis").style=u,o.ensureState("blur").style=h,o.ensureState("select").style=c,(0,b.DW)(o)}t.add(o)}function ee(e){!e.invisible&&a.push(e)}function te(t,o,i,n){var a=g.getModel(n?Z:q),s=(0,h.vS)(g.get("name"),null),d=a.getShallow("show");(0,A.qM)(t,(0,A.lx)(g,n?Z:q),{defaultText:d?s:null,inheritColor:o,defaultOpacity:i,labelFetcher:e,labelDataIndex:l.dataIndex});var u=t.getTextContent();if(u){var p=u.style,f=(0,r.normalizeCssArray)(p.padding||0);n&&(t.setTextConfig({layoutRect:n}),u.disableLabelLayout=!0),u.beforeUpdate=function(){var e=Math.max((n?n.width:t.shape.width)-f[1]-f[3],0),o=Math.max((n?n.height:t.shape.height)-f[0]-f[2],0);p.width===e&&p.height===o||u.setStyle({width:e,height:o})},p.truncateMinChar=2,p.lineOverflow="truncate",ie(p,n,c);var y=u.getState("emphasis");ie(y?y.style:null,n,c)}}function ie(t,o,i){var r=t?t.text:null;if(!o&&i.isLeafRoot&&null!=r){var n=e.get("drillDownIcon",!0);t.text=n?n+" "+r:r}}function re(e,i,r,a){var l=null!=_&&o[e][_],s=n[e];return l?(o[e][_]=null,ne(s,l)):x||(l=new i,l instanceof W.Ay&&(l.z2=oe(r,a)),ae(s,l)),t[e][I]=l}function ne(e,t){var o=e[I]={};t instanceof O?(o.oldX=t.x,o.oldY=t.y):o.oldShape=(0,r.extend)({},t.shape)}function ae(e,t){var o=e[I]={},r=l.parentNode,a=t instanceof m.A;if(r&&(!i||"drillDown"===i.direction)){var s=0,d=0,u=n.background[r.getRawIndex()];!i&&u&&u.oldShape&&(s=u.oldShape.width,d=u.oldShape.height),a?(o.oldX=0,o.oldY=d):o.oldShape={x:s,y:d,width:0,height:0}}o.fadein=!a}}function oe(e,t){return e*U+t}var ie=j,re=o(7857),ne=o(47698),ae="itemStyle",le=(0,h.$r)(),se={seriesType:"treemap",reset:function(e){var t=e.getData().tree,o=t.root;o.isRemoved()||de(o,{},e.getViewRoot().getAncestors(),e)}};function de(e,t,o,i){var n=e.getModel(),a=e.getLayout(),l=e.hostTree.data;if(a&&!a.invisible&&a.isInView){var s,d=n.getModel(ae),u=ue(d,t,i),h=l.ensureUniqueItemVisual(e.dataIndex,"style"),c=d.get("borderColor"),p=d.get("borderColorSaturation");null!=p&&(s=he(u),c=ce(p,s)),h.stroke=c;var g=e.viewChildren;if(g&&g.length){var f=ge(e,n,a,d,u,g);(0,r.each)(g,(function(e,t){if(e.depth>=o.length||e===o[e.depth]){var r=ye(n,u,e,t,f,i);de(e,r,o,i)}}))}else s=he(u),h.fill=s}}function ue(e,t,o){var i=(0,r.extend)({},t),n=o.designatedVisualItemStyle;return(0,r.each)(["color","colorAlpha","colorSaturation"],(function(o){n[o]=t[o];var r=e.get(o);n[o]=null,null!=r&&(i[o]=r)})),i}function he(e){var t=pe(e,"color");if(t){var o=pe(e,"colorAlpha"),i=pe(e,"colorSaturation");return i&&(t=(0,ne.modifyHSL)(t,null,null,i)),o&&(t=(0,ne.modifyAlpha)(t,o)),t}}function ce(e,t){return null!=t?(0,ne.modifyHSL)(t,null,null,e):null}function pe(e,t){var o=e[t];if(null!=o&&"none"!==o)return o}function ge(e,t,o,i,r,n){if(n&&n.length){var a=fe(t,"color")||null!=r.color&&"none"!==r.color&&(fe(t,"colorAlpha")||fe(t,"colorSaturation"));if(a){var l=t.get("visualMin"),s=t.get("visualMax"),d=o.dataExtent.slice();null!=l&&l<d[0]&&(d[0]=l),null!=s&&s>d[1]&&(d[1]=s);var u=t.get("colorMappingBy"),h={type:a.name,dataExtent:d,visual:a.range};"color"!==h.type||"index"!==u&&"id"!==u?h.mappingMethod="linear":(h.mappingMethod="category",h.loop=!0);var c=new re.A(h);return le(c).drColorMappingBy=u,c}}}function fe(e,t){var o=e.get(t);return(0,r.isArray)(o)&&o.length?{name:t,range:o}:null}function ye(e,t,o,i,n,a){var l=(0,r.extend)({},t);if(n){var s=n.type,d="color"===s&&le(n).drColorMappingBy,u="index"===d?i:"id"===d?a.mapIdToIndex(o.getId()):o.getValue(e.get("visualDimension"));l[s]=n.mapValueToVisual(u)}return l}var ve=o(24326),me=Math.max,xe=Math.min,we=r.retrieve,be=r.each,Ie=["itemStyle","borderWidth"],_e=["itemStyle","gapWidth"],Ne=["upperLabel","show"],Me=["upperLabel","height"],Ae={seriesType:"treemap",reset:function(e,t,o,n){var a=o.getWidth(),l=o.getHeight(),s=e.option,d=M.dV(e.getBoxLayoutParams(),{width:o.getWidth(),height:o.getHeight()}),u=s.size||[],h=(0,ve.lo)(we(d.width,u[0]),a),c=(0,ve.lo)(we(d.height,u[1]),l),p=n&&n.type,g=["treemapZoomToNode","treemapRootToNode"],f=i.mw(n,g,e),y="treemapRender"===p||"treemapMove"===p?n.rootRect:null,v=e.getViewRoot(),m=i.bl(v);if("treemapMove"!==p){var x="treemapZoomToNode"===p?Pe(e,f,v,h,c):y?[y.width,y.height]:[h,c],w=s.sort;w&&"asc"!==w&&"desc"!==w&&(w="desc");var b={squareRatio:s.squareRatio,sort:w,leafDepth:s.leafDepth};v.hostTree.clearLayouts();var I={x:0,y:0,width:x[0],height:x[1],area:x[0]*x[1]};v.setLayout(I),Se(v,b,!1,0),I=v.getLayout(),be(m,(function(e,t){var o=(m[t+1]||v).getValue();e.setLayout(r.extend({dataExtent:[o,o],borderWidth:0,upperHeight:0},I))}))}var _=e.getData().tree.root;_.setLayout(Ee(d,y,f),!0),e.setLayoutInfo(d),ke(_,new E.A(-d.x,-d.y,a,l),m,v,0)}};function Se(e,t,o,i){var r,n;if(!e.isRemoved()){var a=e.getLayout();r=a.width,n=a.height;var l=e.getModel(),s=l.get(Ie),d=l.get(_e)/2,u=ze(l),h=Math.max(s,u),c=s-d,p=h-d;e.setLayout({borderWidth:s,upperHeight:h,upperLabelHeight:u},!0),r=me(r-2*c,0),n=me(n-c-p,0);var g=r*n,f=Le(e,l,g,t,o,i);if(f.length){var y={x:c,y:p,width:r,height:n},v=xe(r,n),m=1/0,x=[];x.area=0;for(var w=0,b=f.length;w<b;){var I=f[w];x.push(I),x.area+=I.getLayout().area;var _=Re(x,v,t.squareRatio);_<=m?(w++,m=_):(x.area-=x.pop().getLayout().area,Ve(x,v,y,d,!1),v=xe(y.width,y.height),x.length=x.area=0,m=1/0)}if(x.length&&Ve(x,v,y,d,!0),!o){var N=l.get("childrenVisibleMin");null!=N&&g<N&&(o=!0)}for(w=0,b=f.length;w<b;w++)Se(f[w],t,o,i+1)}}}function Le(e,t,o,i,n,a){var l=e.children||[],s=i.sort;"asc"!==s&&"desc"!==s&&(s=null);var d=null!=i.leafDepth&&i.leafDepth<=a;if(n&&!d)return e.viewChildren=[];l=r.filter(l,(function(e){return!e.isRemoved()})),Te(l,s);var u=Ce(t,l,s);if(0===u.sum)return e.viewChildren=[];if(u.sum=De(t,o,u.sum,s,l),0===u.sum)return e.viewChildren=[];for(var h=0,c=l.length;h<c;h++){var p=l[h].getValue()/u.sum*o;l[h].setLayout({area:p})}return d&&(l.length&&e.setLayout({isLeafRoot:!0},!0),l.length=0),e.viewChildren=l,e.setLayout({dataExtent:u.dataExtent},!0),l}function De(e,t,o,i,r){if(!i)return o;for(var n=e.get("visibleMin"),a=r.length,l=a,s=a-1;s>=0;s--){var d=r["asc"===i?a-s-1:s].getValue();d/o*t<n&&(l=s,o-=d)}return"asc"===i?r.splice(0,a-l):r.splice(l,a-l),o}function Te(e,t){return t&&e.sort((function(e,o){var i="asc"===t?e.getValue()-o.getValue():o.getValue()-e.getValue();return 0===i?"asc"===t?e.dataIndex-o.dataIndex:o.dataIndex-e.dataIndex:i})),e}function Ce(e,t,o){for(var i=0,r=0,n=t.length;r<n;r++)i+=t[r].getValue();var a,l=e.get("visualDimension");return t&&t.length?"value"===l&&o?(a=[t[t.length-1].getValue(),t[0].getValue()],"asc"===o&&a.reverse()):(a=[1/0,-1/0],be(t,(function(e){var t=e.getValue(l);t<a[0]&&(a[0]=t),t>a[1]&&(a[1]=t)}))):a=[NaN,NaN],{sum:i,dataExtent:a}}function Re(e,t,o){for(var i=0,r=1/0,n=0,a=void 0,l=e.length;n<l;n++)a=e[n].getLayout().area,a&&(a<r&&(r=a),a>i&&(i=a));var s=e.area*e.area,d=t*t*o;return s?me(d*i/s,s/(d*r)):1/0}function Ve(e,t,o,i,r){var n=t===o.width?0:1,a=1-n,l=["x","y"],s=["width","height"],d=o[l[n]],u=t?e.area/t:0;(r||u>o[s[a]])&&(u=o[s[a]]);for(var h=0,c=e.length;h<c;h++){var p=e[h],g={},f=u?p.getLayout().area/u:0,y=g[s[a]]=me(u-2*i,0),v=o[l[n]]+o[s[n]]-d,m=h===c-1||v<f?v:f,x=g[s[n]]=me(m-2*i,0);g[l[a]]=o[l[a]]+xe(i,y/2),g[l[n]]=d+xe(i,x/2),d+=m,p.setLayout(g,!0)}o[l[a]]+=u,o[s[a]]-=u}function Pe(e,t,o,i,r){var n,a=(t||{}).node,l=[i,r];if(!a||a===o)return l;var s=i*r,d=s*e.option.zoomToNodeRatio;while(n=a.parentNode){for(var u=0,h=n.children,c=0,p=h.length;c<p;c++)u+=h[c].getValue();var g=a.getValue();if(0===g)return l;d*=u/g;var f=n.getModel(),y=f.get(Ie),v=Math.max(y,ze(f));d+=4*y*y+(3*y+v)*Math.pow(d,.5),d>ve.Is&&(d=ve.Is),a=n}d<s&&(d=s);var m=Math.pow(d/s,.5);return[i*m,r*m]}function Ee(e,t,o){if(t)return{x:t.x,y:t.y};var i={x:0,y:0};if(!o)return i;var r=o.node,n=r.getLayout();if(!n)return i;var a=[n.width/2,n.height/2],l=r;while(l){var s=l.getLayout();a[0]+=s.x,a[1]+=s.y,l=l.parentNode}return{x:e.width/2-a[0],y:e.height/2-a[1]}}function ke(e,t,o,i,r){var n=e.getLayout(),a=o[r],l=a&&a===e;if(!(a&&!l||r===o.length&&e!==i)){e.setLayout({isInView:!0,invisible:!l&&!t.intersect(n),isAboveViewRoot:l},!0);var s=new E.A(t.x-n.x,t.y-n.y,t.width,t.height);be(e.viewChildren||[],(function(e){ke(e,s,o,i,r+1)}))}}function ze(e){return e.get(Ne)?e.get(Me):0}function Be(e){e.registerSeriesModel(v),e.registerChartView(ie),e.registerVisual(se),e.registerLayout(Ae),a(e)}}}]);
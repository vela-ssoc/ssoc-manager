"use strict";(self["webpackChunkssoc"]=self["webpackChunkssoc"]||[]).push([[3219],{92161:function(e,t,a){a.d(t,{A:function(){return c}});var s=function(){var e=this,t=e._self._c;return t("div",{class:"事件详情"===e.nameShow?"pageClass":"",staticStyle:{height:"20px","padding-top":"10px"}},[t("span",{staticStyle:{display:"inline-block","font-size":"13px","min-width":"35.5px",height:"28px","line-height":"30px","vertical-align":"top","box-sizing":"border-box",float:"right"}},[e._v("共"+e._s(e.pageTotal)+"条")]),t("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"jumper,sizes,prev, pager, next","page-size":e.size||15,"current-page":e.pageCurrent,total:e.pageTotal,"page-sizes":e.pageSizeArray||[15,30,45]},on:{"update:currentPage":function(t){e.pageCurrent=t},"update:current-page":function(t){e.pageCurrent=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},l=[],r={name:"page",props:{pageSizeArray:Array,size:Number,pageTotal:Number,current:Number,nameShow:String},data(){return{pageCurrent:this.current}},methods:{handleSizeChange(e){this.$emit("handleSizeChange",e)},handleCurrentChange(e){this.$emit("handleCurrentChange",e)}},watch:{current:function(e){this.pageCurrent=e}}},i=r,n=a(81656),o=(0,n.A)(i,s,l,!1,null,"277403d7",null),c=o.exports},73219:function(e,t,a){a.r(t),a.d(t,{default:function(){return T}});var s=function(){var e=this,t=e._self._c;return t("div",[t("el-card",{staticClass:"contentCard_",staticStyle:{position:"relative"}},[t(e.componentId,{tag:"component",scopedSlots:e._u([{key:"prefix",fn:function(){return[t("el-radio-group",{staticStyle:{"margin-right":"5px",transform:"translateY(-1px)"},attrs:{size:"mini"},on:{input:e.input},model:{value:e.componentId,callback:function(t){e.componentId=t},expression:"componentId"}},[t("el-radio-button",{attrs:{label:"elastic"}},[e._v("数据中心 ")]),t("el-radio-button",{attrs:{label:"indices"}},[e._v("索引信息")]),t("el-radio-button",{attrs:{label:"nodes"}},[e._v("节点信息")])],1)]},proxy:!0}])})],1)],1)},l=[],r=function(){var e=this,t=e._self._c;return t("div",[t("div",[t("div",[e._t("prefix"),t("el-button",{attrs:{"el-button":"",type:"primary",size:"mini"},on:{click:e.addElastic}},[e._v("添加")])],2),t("el-table",{staticStyle:{width:"100%","margin-top":"5px"},attrs:{data:e.elasticData,"header-cell-style":{color:"#909399",textAlign:"center",background:"#f5f7fa"}}},[t("el-table-column",{attrs:{prop:"desc",label:"描述"}}),t("el-table-column",{attrs:{prop:"hosts",label:"地址"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._l(a.row.hosts&&a.row.hosts.slice(0,2)||[],(function(a,s){return t("el-tag",{key:s,staticStyle:{"margin-right":"3px"},attrs:{size:"mini"}},[e._v(" "+e._s(a)+" ")])})),a.row.hosts&&a.row.hosts.length>2?t("el-popover",{attrs:{placement:"top",width:"200",trigger:"hover"}},[t("span",e._l(a.row.hosts,(function(a,s){return t("el-tag",{key:s,staticStyle:{margin:"3px"},attrs:{size:"mini"}},[e._v(" "+e._s(a)+" ")])})),1),t("el-tag",{attrs:{slot:"reference",size:"mini",type:"info"},slot:"reference"},[e._v(" + "+e._s(a.row.hosts.length))])],1):e._e()]}}])}),t("el-table-column",{attrs:{prop:"enable",label:"选中",width:"130"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{size:"mini",type:!0===a.row.enable?"success":"danger"}},[e._v(" "+e._s(!0===a.row.enable?"是":"否")+" ")])]}}])}),t("el-table-column",{attrs:{prop:"username",label:"用户",width:"100"}}),t("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.elasticEdit(a.row)}}},[e._v("编辑 ")]),t("el-popover",{ref:a.row.id,attrs:{placement:"top",width:"200"}},[t("p",[e._v("确定删除?")]),t("div",{staticStyle:{"text-align":"right",margin:"0"}},[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.$refs[a.row.id].doClose()}}},[e._v("取消")]),t("el-button",{attrs:{loading:e.delLoading,type:"primary",size:"mini"},on:{click:function(t){return e.elaDelete(a.row.id)}}},[e._v("确定 ")])],1),t("el-button",{attrs:{slot:"reference",type:"text",size:"mini"},slot:"reference"},[e._v("删除")])],1)]}}])})],1),t("Page",{attrs:{size:e.elsticPage.pageSize,current:e.elsticPage.current,pageTotal:e.elasticData.length},on:{handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange}})],1),t("ELasticForm",{ref:"elform",attrs:{isAdd:e.isAdd},on:{getElastic:e.getElastic}})],1)},i=[],n=a(92161),o=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{"before-close":e.handleClose,"el-dialog":"","close-on-click-modal":!1,visible:e.dialogVisible,title:e.isAdd?"新增数据":"编辑数据","append-to-body":"",width:"500px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,size:"small","label-width":"90px"}},[t("el-form-item",{attrs:{label:"地址",prop:"host"}},[t("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",placeholder:"配置多个时每行配置一个",autosize:{minRows:2}},model:{value:e.form.host,callback:function(t){e.$set(e.form,"host",t)},expression:"form.host"}})],1),t("el-form-item",{attrs:{label:"用户",prop:"username"}},[t("el-input",{staticStyle:{width:"100%"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{staticStyle:{width:"100%"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),t("el-form-item",{attrs:{label:"描述",prop:"desc"}},[t("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),t("el-form-item",{attrs:{label:"选中",prop:"enable"}},[t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.form.enable,callback:function(t){e.$set(e.form,"enable",t)},expression:"form.enable"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("form")}}},[e._v(e._s(e.isAdd?"创建":"修改"))])],1)],1)},c=[],d={name:"formElastic",props:{isAdd:Boolean},data(){return{form:{id:"",host:"",username:"",password:"",desc:"",enable:!0},dialogVisible:!1,nodeData:[],serviceData:[],codeData:[],rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],node_ids:[{required:!0,message:"请输入节点",trigger:"change"}]}}},created(){},methods:{handleClose(){this.dialogVisible=!1,this.form={}},onSubmit(e){this.$refs[e].validate((e=>{e&&(this.form.hosts=this.form.host.split("\n").map((e=>e?.trim())).filter((e=>e)),this.isAdd?this.$request.fetchPostElastic(this.form).then((()=>{this.$message({message:"添加成功!!!",type:"success"}),this.dialogVisible=!1,this.form={},this.$emit("getElastic")})).catch((e=>{this.$message.error(e)})):this.$request.fetchPutElastic(this.form).then((()=>{this.$message({message:"修改成功!!!",type:"success"}),this.dialogVisible=!1,this.form={},this.$emit("getElastic")})).catch((e=>{this.$message.error(e.data)})))}))}}},u=d,p=a(81656),h=(0,p.A)(u,o,c,!1,null,"e0e3b5fe",null),m=h.exports,g={name:"index",components:{Page:n.A,ELasticForm:m},data(){return{elasticData:[],delLoading:!1,elsticPage:{current:1,pageSize:15,total:0},isAdd:!0}},mounted(){this.getElastic()},methods:{dateTime(e){var t=a(95093);return t(e).format("YYYY-MM-DD HH:mm:ss")},handleSizeChange(e){this.elsticPage.pageSize=e,this.getElastic()},handleCurrentChange(e){this.elsticPage.current=e,this.getElastic()},getElastic(){this.$request.fetchGetElastic(this.elsticPage.current,this.elsticPage.pageSize).then((e=>{this.elasticData=e.data.records}))},addElastic(){var e=this.$refs.elform;e.dialogVisible=!0,this.isAdd=!0},elasticEdit(e){this.isAdd=!1;var t=this.$refs.elform;t.dialogVisible=!0,t.form={id:e.id,host:e.hosts?.join("\n"),username:e.username,password:e.password,desc:e.desc,enable:e.enable}},elaDelete(e){this.$request.fetchDelElastic(e).then((()=>{this.delLoading=!1,this.$message({message:"删除成功!!!",type:"success"}),this.getElastic()})).catch((e=>{this.$message.error(e.data)}))}}},f=g,b=(0,p.A)(f,r,i,!1,null,"1088de31",null),v=b.exports,_=function(){var e=this,t=e._self._c;return t("div",[t("div",[e._t("prefix"),t("el-input",{staticClass:"input-with-select",staticStyle:{width:"200px","margin-right":"5px"},attrs:{placeholder:"请输入搜索内容",size:"mini"},model:{value:e.selectInput,callback:function(t){e.selectInput=t},expression:"selectInput"}}),t("el-button",{staticStyle:{"background-color":"#f5f7fa",border:"1px solid #dcdfe6"},attrs:{icon:"el-icon-search",size:"mini"},on:{click:e.insicesSelect}})],2),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","margin-top":"5px"},attrs:{data:e.indicesList.slice((e.current-1)*e.page,e.current*e.page),"header-cell-style":{color:"#909399",textAlign:"center",background:"#f5f7fa"}}},[t("el-table-column",{attrs:{label:"名称",prop:"index",width:"280"}}),t("el-table-column",{attrs:{label:"健康状态",prop:"health"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{staticClass:"statu",class:"green"===a.row.health?"green-circle":"yellow"===a.row.health?"yellow-circle":"red-circle"}),e._v(" "+e._s(a.row.health)+" ")]}}])}),t("el-table-column",{attrs:{label:"状态",prop:"status",width:"100"}}),t("el-table-column",{attrs:{label:"UUID",prop:"uuid",width:"240"}}),t("el-table-column",{attrs:{label:"分片"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.pri+" / "+t.row.rep)+" ")]}}])}),t("el-table-column",{attrs:{label:"Lucene文档"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row["docs.count"])+" ")]}}])}),t("el-table-column",{attrs:{label:"存储空间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row["store.size"])+" ")]}}])}),t("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-popover",{ref:a.row.id,attrs:{placement:"top"}},[t("p",[e._v("确定删除?")]),t("div",{staticStyle:{"text-align":"right",margin:"0"}},[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.$refs[a.row.id].doClose()}}},[e._v("取消")]),t("el-button",{attrs:{loading:e.delLoading,type:"primary",size:"mini"},on:{click:function(t){return e.subDelete(a.row)}}},[e._v("确定")])],1),t("el-button",{attrs:{slot:"reference",type:"text",size:"mini"},slot:"reference"},[e._v("删除")])],1)]}}])})],1),t("Page",{attrs:{size:e.page,current:e.current,pageTotal:e.indicesList.length},on:{handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange}})],1)},w=[],y=a(89141),x={name:"index",components:{Page:n.A},data(){return{current:1,page:14,pageTotal:0,indicesList:[],loading:!1,delLoading:!1,selectInput:""}},created(){this.getEs()},methods:{getEs(){this.loading=!0,(0,y.Q6)().then((e=>{this.loading=!1,this.indicesList=e.filter((e=>!e.index.startsWith("."))).sort(((e,t)=>t.index.localeCompare(e.index)))})).catch((e=>{401===e.status&&(localStorage.removeItem("token"),this.$router.push("/"))}))},subDelete(e){this.delLoading=!0;var t=this;(0,y.Zo)(e.index).then((()=>{this.delLoading=!1,t.$message({message:"删除成功!!!",type:"success"}),this.getEs()})).catch((e=>{401===e.status&&(localStorage.removeItem("token"),this.$router.push("/"))}))},insicesSelect(){""!==this.selectInput?this.indicesList=this.indicesList.filter((e=>!this.selectInput||e.index.toLowerCase().includes(this.selectInput.toLowerCase()))):this.getEs()},handleSizeChange(e){this.page=e},handleCurrentChange(e){this.current=e}}},S=x,C=(0,p.A)(S,_,w,!1,null,"7d2636c8",null),k=C.exports,z=function(){var e=this,t=e._self._c;return t("div",[t("div",[e._t("prefix")],2),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","margin-top":"5px"},attrs:{data:e.nodeList,"header-cell-style":{color:"#909399",textAlign:"center",background:"#f5f7fa"}}},[t("el-table-column",{attrs:{label:"名称",prop:"name"}}),t("el-table-column",{attrs:{label:"IP地址",prop:"ip"}}),t("el-table-column",{attrs:{label:"主节点",prop:"master"}}),t("el-table-column",{attrs:{label:"节点角色"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row["node.role"])+" ")]}}])}),t("el-table-column",{attrs:{label:"负载"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row["load_1m"]+" / "+t.row["load_5m"]+" / "+t.row["load_15m"])+" ")]}}])}),t("el-table-column",{attrs:{label:"CPU",prop:"cpu"}}),t("el-table-column",{attrs:{label:"内存",prop:"yellow"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row["ram.current"]+"/"+t.row["ram.max"])+" ")]}}])}),t("el-table-column",{attrs:{label:"堆内存",prop:"yellow"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row["heap.percent"])+" ")]}}])}),t("el-table-column",{attrs:{label:"磁盘",prop:"yellow"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row["heap.percent"]||"-")+" ")]}}])})],1)],1)},$=[],E={name:"index",data(){return{current:1,page:10,pageTotal:0,nodeList:[],loading:!1}},created(){this.getEs()},methods:{getEs(){this.loading=!0,(0,y.a9)().then((e=>{this.nodeList=e,this.loading=!1})).catch((e=>{401===e.status&&(localStorage.removeItem("token"),this.$router.push("/"))}))}}},A=E,L=(0,p.A)(A,z,$,!1,null,"1f9c59a6",null),I=L.exports,P={components:{elastic:v,indices:k,nodes:I},data(){return{componentId:"elastic"}},watch:{},methods:{input(){this.$router.push({path:this.$route.path})}}},D=P,V=(0,p.A)(D,s,l,!1,null,"03e2d1b8",null),T=V.exports}}]);
"use strict";(self["webpackChunkssoc"]=self["webpackChunkssoc"]||[]).push([[6055],{56055:function(t,e,s){s.d(e,{CG:function(){return r},Kj:function(){return d},ZL:function(){return i},_T:function(){return c},td:function(){return a}});const n=s(15374),o=new n.Client({hosts:window.location.host+"/api/v1/ribana"});function r(){const t=o.cat.indices({headers:{Authorization:localStorage.getItem("token"),accept:"application/json;charset=utf-8"},h:["index","health","status","uuid","pri","rep","docs.count","store.size"]});return t}function i(t){const e=o.indices.delete({headers:{Authorization:localStorage.getItem("token"),accept:"application/json;charset=utf-8"},index:t});return e}function a(){const t=o.cat.nodes({headers:{Authorization:localStorage.getItem("token"),accept:"application/json;charset=utf-8"},h:["ip","name","heap.percent","heap.current","heap.max","ram.percent","ram.current","ram.max","node.role","master","cpu","load_1m","load_5m","load_15m","disk.used_percent","disk.used","disk.total"]});return t}function c(t,e,s){const n=o.search({headers:{Authorization:localStorage.getItem("token"),accept:"application/json;charset=utf-8"},body:{from:e,size:s,track_total_hits:!0,query:t,sort:[{"@timestamp":{order:"desc"}}]}});return n}class u{constructor(t){this.round=t,this.index={},this.fields=[]}add(t,e){let s=this.index[t];s?s.add(e):(s=new l(t,e),this.fields.push(s),this.index[t]=s),this.sorted=!1}sort(){this.sorted||(this.fields.forEach((t=>t.sort())),this.fields.sort(((t,e)=>t.name.localeCompare(e.name))),this.sorted=!0)}topN(t=5){this.sort();let e=[];return this.fields.forEach((s=>{e.push({name:s.name,type:s.type,values:s.topN(t)})})),{round:this.round,fields:e}}}class l{constructor(t,e){let s=new h(e);this.index={},this.name=t,this.type=typeof e,this.values=[s],this.index[e]=s}add(t){let e=this.index[t];if(this.type!==typeof t&&(this.type="unknown"),e)e.incr();else{let e=new h(t);this.values.push(e),this.index[t]=e}this.sorted=!1}sort(){this.sorted||(this.values.sort(((t,e)=>t.compare(e))),this.sorted=!0)}topN(t){return this.sort(),this.values.slice(0,t)}}class h{constructor(t){this.value=t,this.count=1}incr(){this.count++}compare(t){let e=this.count,s=t.count;if(e>s)return-1;if(e<s)return 1;let n=this.value,o=t.value;if("string"===typeof n&&"string"===typeof o)return n.localeCompare(o);if("number"===typeof n&&"number"===typeof o){if(n>o)return-1;if(n<o)return 1}return 0}}function d(t,e=500,s=5){let n=t.length>e?e:t.length,o=new u(n);for(let r=0;r<n;r++){let e=t[r];p(e,o)}for(let r of o.fields)r.values&&r.values.map((e=>{e.total=t.length}));return o.topN(s)}function p(t,e,s=""){for(let n in t){let o=t[n],r="";if(r=""===s?n:s+"."+n,Array.isArray(o))for(let t=0;t<o.length;t++){let s=o[t];"object"===typeof s?p(s,e,r):e.add(r,s)}else"object"===typeof o?("_source"===r&&(r=""),p(o,e,r)):e.add(r,o)}}}}]);
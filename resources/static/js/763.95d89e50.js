(self["webpackChunkssoc"]=self["webpackChunkssoc"]||[]).push([[763,4202],{98970:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return _}});var r=function(){var e=this,t=e._self._c;return t("el-card",{staticClass:"contentCard_"},[t("table-list",{attrs:{data:e.tableList,columns:e.columns,configAble:!1,pagination:e.pagination},on:{loadData:e.loadData},scopedSlots:e._u([{key:"right_top_btn",fn:function(){return[t("div",{staticClass:"flex mt-2 justify-between"},[t("div",{staticClass:"flex"},[t("FLabelWrapper",{staticClass:"w-[300px]",attrs:{label:"关键字过滤"}},[t("el-input",{attrs:{size:"mini",clearable:""},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1),t("el-button",{staticClass:"ml-2",staticStyle:{color:"#909399",background:"#f4f4f5","border-color":"#d3d4d6"},attrs:{size:"mini"},on:{click:e.loadData}},[t("i",{staticClass:"el-icon-search"})])],1)])]},proxy:!0},{key:"name",fn:function({row:s}){return[t("span",{staticClass:"truncate"},[s.content_quote?.name?t("el-tag",{attrs:{size:"mini",type:"info"}},[e._v(e._s(s.content_quote?.name))]):e._e(),e._v(" "+e._s(s.name)+" ")],1)]}},{key:"progress",fn:function({row:s}){return[t("div",{staticClass:"pl-1"},[s.status?t("span",[t("el-tag",{attrs:{size:"mini",type:s.status.succeed?"success":"info"}},[e._v(" 成功: "+e._s(s.status.succeed)+" ")]),t("el-tag",{attrs:{size:"mini",type:s.status.failed?"danger":"info"}},[e._v(" 失败: "+e._s(s.status.failed)+" ")])],1):e._e()])]}},{key:"exec_next",fn:function({row:s}){return[t("div",{staticClass:"space-x-2"},[e._v(" "+e._s(e.nextExecTime(s))+" ")])]}},{key:"opt",fn:function({row:s}){return[t("div",{staticClass:"space-x-2"},[t("span",{staticClass:"text-blue-400 ml-2 cursor-pointer",on:{click:function(t){return e.showAgentExecHistory(s)}}},[e._v("详情")]),t("el-popconfirm",{attrs:{title:"确定删除该任务记录吗？"},on:{confirm:function(t){return e.deleteTask(s)}}},[t("el-button",{staticClass:"text-red-500",attrs:{slot:"reference",type:"text",size:"mini"},slot:"reference"},[e._v("删除")])],1)],1)]}}])}),t("ModifyTask",{ref:"modifyTaskRef"}),t("ExecHistory",{ref:"agentExecHistoryRef"})],1)},o=[],i=s(85471),a=s(99726),n=s(35467),l=s(98362),c=s(31052),p=s(95093),u=s.n(p),f=s(8598),d=s(82473),m={components:{FLabelWrapper:a.A,tableList:n.A,ModifyTask:f["default"],ExecHistory:d.A},setup(){const e=(0,i.ref)(""),t=(0,i.ref)([]),s=(0,i.ref)(),r=(0,i.ref)(),o=(0,i.ref)(),a=(0,i.ref)({pageIndex:1,pageSize:20,total:0,pageSizes:[20,30,50],layout:"total, sizes, prev, pager, next"}),n=(0,i.ref)([{label:"执行时间",width:"180px",prop:"createTime",formatter:e=>u()(e.created_at).format("YYYY-MM-DD HH:mm:ss")},{label:"任务名称",slot:"name"},{label:"执行结果",slot:"progress"},{label:"发布人",prop:"username",width:"180px",formatter:e=>e.updated_by.nickname},{label:"描述",prop:"intro",ellipsis:!0},{label:"操作",slot:"opt",width:"120px"}]);async function p(){try{const{data:s}=await l.A.get("/task-executes",{params:{page:a.value.pageIndex,size:a.value.pageSize,keyword:e.value}});t.value=s.records||[],a.value.total=s.total||0}catch(s){c.Message.error("获取数据失败")}}function f(e){r.value.openDialog({exec_id:e.id,task_id:e.task_id,intro:e.intro,name:e.name,timeout:e.timeout?.seconds,push_size:e.push_size,created_at:e.created_at,filters:e.filters,excludes:e.excludes,updated_by:e.updated_by,specific_times:e.specific_times,cron:e.cron,content_quote:e.content_quote,code:e.code})}function d(e){l.A.delete("/task-execute",{params:{id:e.id}}).then((e=>{c.Message.success("删除成功"),p()})).catch((e=>{c.Message.error(e)}))}return p(),{keyword:e,tableList:t,columns:n,modifyTaskRef:s,loadData:p,pagination:a,showAgentExecHistory:f,agentExecHistoryRef:r,deleteTask:d,execHistoryRef:o}}},h=m,v=s(81656),g=(0,v.A)(h,r,o,!1,null,"098d0918",null),_=g.exports},8598:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return z}});var r=function(){var e=this,t=e._self._c;return t("el-drawer",{attrs:{visible:e.dialogShow,size:"1000px","close-on-press-escape":!1,"destroy-on-close":"","show-close":!1,wrapperClosable:!1,withHeader:!1},on:{"update:visible":function(t){e.dialogShow=t},close:e.closeDialog}},[t("div",{staticClass:"p-1 bg-[#f5f5f5] text-[14px] flex justify-between"},[t("span",[e._v(" "+e._s("a"===e.form.optType?"新增任务":"v"===e.form.optType?"查看任务":"编辑任务")+" > "+e._s(1===e.form.mode?"简易模式":"高级模式")+" > "+e._s(1===e.form.step?"基础信息":"发布策略")+" ")]),t("span",{staticClass:"mr-4 cursor-pointer",on:{click:function(t){e.dialogShow=!1}}},[e._v("X")])]),t("el-card",{attrs:{shadow:"never",size:"mini"}},[t("div",{staticClass:"flex justify-between"},[t("FRadio",{staticClass:"w-[300px]",attrs:{align:"center",disabled:e.disabledMod,size:"mini",options:[{value:1,label:"基础信息"},{value:2,label:"发布策略"}]},model:{value:e.form.step,callback:function(t){e.$set(e.form,"step",t)},expression:"form.step"}}),t("div",[1===e.form.step&&"v"!==e.form.optType?t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"配置发布策略",placement:"bottom"}},[t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.nextStep}},[e._v("下一步")])],1):e._e(),2===e.form.step&&"v"!==e.form.optType?t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"返回基础信息",placement:"bottom"}},[t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.form.step=1}}},[e._v("上一步")])],1):e._e(),1!==e.form.step||e.form.step_done||"v"===e.form.optType?e._e():t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"保存为草稿，保存后任务并未开始执行",placement:"bottom"}},[t("el-popconfirm",{staticClass:"mx-2",attrs:{title:"确认将任务保存为草稿吗?"},on:{confirm:e.step1Save}},[t("el-button",{attrs:{slot:"reference",size:"mini",type:"primary"},slot:"reference"},[e._v("保存")])],1)],1),2!==e.form.step&&!e.form.step_done||"v"===e.form.optType?e._e():t("el-popconfirm",{staticClass:"mx-2",attrs:{title:1===e.form.exec_type?"确认将任务保存后立即执行?":"确认将任务保存后发布?"},on:{confirm:e.step2Save}},[t("el-tooltip",{staticClass:"item",attrs:{slot:"reference",effect:"dark",content:"发布后如果任务状态为启用，则任务会在合适时间开始执行",placement:"bottom"},slot:"reference"},[t("el-button",{attrs:{size:"mini",type:"success"}},[e._v("保存并"+e._s(1===e.form.exec_type?"执行":"发布"))])],1)],1),"m"===e.form.optType?t("el-popconfirm",{staticClass:"mr-2",attrs:{title:"确定删除当前任务吗？"},on:{confirm:e.deleteTask}},[t("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},slot:"reference"},[e._v("删除")])],1):e._e()],1)],1)]),1===e.form.step?t("div",{staticClass:"p-[20px]"},[t("div",{staticClass:"mb-2",attrs:{shadow:"never"}},[t("div",{attrs:{shadow:"never"}},[t("el-form",{ref:"formRef",attrs:{model:e.form,size:"small",disabled:"v"===e.form.optType}},[t("el-form-item",{attrs:{label:"任务名称",prop:"name",rules:e.required}},[t("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("el-form-item",{attrs:{label:"任务简介",prop:"intro"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.form.intro,callback:function(t){e.$set(e.form,"intro",t)},expression:"form.intro"}})],1),t("div",{staticClass:"mb-1 flex justify-between"},[1===e.form.mode?[t("div",[t("span",{staticClass:"text-red-500 mr-1"},[e._v("*")]),e._v("任务模板 "),t("el-tag",{attrs:{size:"mini",type:"warning"}},[e._v(" "+e._s(e.form.extension_id?"在下面填写模板所需参数":"点击选择一个模版")+" ")])],1),t("div",["v"!==e.form.optType?t("el-button",{staticClass:"text-red-500",attrs:{type:"text"},on:{click:e.reSelectTemplate}},[e._v("重选模板")]):e._e(),t("el-button",{attrs:{type:"text"},on:{click:e.openPrew}},[e._v(" "+e._s(e.form._previewResult?"关闭预览":"点击预览")+" ")]),e.form._previewResult?t("el-button",{attrs:{type:"text"},on:{click:e.getResultCodeNoSave}},[e._v("刷新预览 ")]):e._e()],1)]:[t("div",[t("span",{staticClass:"text-red-500 mr-1"},[e._v("*")]),e._v("任务脚本")])]],2),t("div",{staticClass:"min-h-[calc(100vh-120px)] h-0"},[1===e.form.mode?[e.form.extension_id?t("div",{staticClass:"bg-[#f1f2f3] rounded p-2"},[t("div",{staticClass:"flex items-center mb-1 justify-between"},[t("div",{staticClass:"flex items-center"},[t("img",{attrs:{src:e.parseImgByIntro(e.form.intro||""),width:"30",height:"30",alt:""}}),t("span",{staticClass:"font-bold text-[16px] text-gray-900 ml-[10px]"},[e._v("模板名称")]),t("span",{staticClass:"ml-[10px] text-[#595757]"},[e._v("(模板是用来xxxxx)")])]),t("div",{staticClass:"mr-[4px] text-[#595757]"},[e._v("更新于2020-23-23")])]),t("el-card",{staticClass:"min-h-full",attrs:{shadow:"never"}},[t("div",{staticClass:"grid grid-cols-1 gap-2 min-h-[440px]",class:{"grid-cols-2":e.form._previewResult}},[t("div",{staticClass:"min-h-full",attrs:{shadow:"never"}},[e.form._formError?t("div",{staticClass:"text-red-600 mt-[100px] text-center"},[e._v(" 发生错误 ："+e._s(e.form._formError)+" ")]):t("FormDesign",{ref:"formDesignRef",attrs:{options:e.form._options,disabled:"v"===e.form.optType},model:{value:e.form.dataCache,callback:function(t){e.$set(e.form,"dataCache",t)},expression:"form.dataCache"}})],1),e.form._previewResult?t("div",{staticClass:"h-full relative"},[t("AceCoderEdit",{attrs:{"read-only":"","show-header":!1,mode:"text",theme:"light"},model:{value:e.form._resultCode,callback:function(t){e.$set(e.form,"_resultCode",t)},expression:"form._resultCode"}})],1):e._e()])])],1):t("el-card",{attrs:{shadow:"never"}},[t("TemplateList",{attrs:{category:"task"},on:{select:e.handleSelect}})],1)]:[t("AceCoderEdit",{attrs:{theme:"light"},scopedSlots:e._u([{key:"icon",fn:function(){return[t("span",{staticClass:"ml-2"},[t("svg",{staticClass:"icon",attrs:{t:"1702014010796",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"12337",width:"200",height:"200"}},[t("path",{attrs:{d:"M917.333333 874.666667h-810.666666a42.666667 42.666667 0 0 0 0 85.333333h810.666666a42.666667 42.666667 0 0 0 0-85.333333zM279.466667 810.666667h465.066666a213.333333 213.333333 0 0 0 213.333334-213.333334V277.333333a213.333333 213.333333 0 0 0-213.333334-213.333333H279.466667a213.333333 213.333333 0 0 0-213.333334 213.333333V597.333333a213.333333 213.333333 0 0 0 213.333334 213.333334z m-128-533.333334a128 128 0 0 1 128-128h465.066666a128 128 0 0 1 128 128V597.333333a128 128 0 0 1-128 128H279.466667a128 128 0 0 1-128-128z","p-id":"12338",fill:"#5e93fd"}}),t("path",{attrs:{d:"M308.906667 562.346667a42.666667 42.666667 0 0 0 60.16 0 42.666667 42.666667 0 0 0 0-60.16l-52.906667-52.906667 55.466667-55.466667a42.666667 42.666667 0 0 0 0-60.16 42.666667 42.666667 0 0 0-60.586667 0L228.266667 416.853333a42.666667 42.666667 0 0 0 0 60.16zM652.373333 562.346667a42.666667 42.666667 0 0 0 60.586667 0l82.773333-83.2a42.666667 42.666667 0 0 0 0-60.16l-80.64-85.333334a42.666667 42.666667 0 1 0-60.16 60.16l52.906667 52.906667-55.466667 55.466667a42.666667 42.666667 0 0 0 0 60.16zM437.333333 577.28a42.666667 42.666667 0 0 0 58.453334-15.36l106.666666-185.173333a42.666667 42.666667 0 0 0-74.24-42.666667l-106.666666 185.173333a42.666667 42.666667 0 0 0 15.786666 58.026667z","p-id":"12339",fill:"#ff7f00"}})])])]},proxy:!0}],null,!1,703634530),model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})]],2)],1)],1)])]):t("div",{staticClass:"p-[20px]"},[t("el-form",{ref:"formRef",attrs:{model:e.form,size:"small","label-width":"100px",disabled:"v"===e.form.optType}},[t("el-form-item",{attrs:{label:"执行方式",required:""}},[t("FRadio",{attrs:{disabled:"v"===e.form.optType,align:"center",options:[{value:1,label:"立即执行"},{value:3,label:"特定时间执行"},{value:4,label:"每天执行"},{value:5,label:"每周执行"},{value:6,label:"每月执行"},{value:2,label:"自定义"}]},model:{value:e.form.exec_type,callback:function(t){e.$set(e.form,"exec_type",t)},expression:"form.exec_type"}})],1),1!==e.form.exec_type?t("el-form-item",{attrs:{label:"任务状态",required:""}},[t("el-radio-group",{model:{value:e.form.enabled,callback:function(t){e.$set(e.form,"enabled",t)},expression:"form.enabled"}},[t("el-radio",{attrs:{label:!0}},[e._v("启用")]),t("el-radio",{attrs:{label:!1}},[e._v("禁用")])],1)],1):e._e(),3===e.form.exec_type?t("el-form-item",{attrs:{label:"执行时间",required:""}},e._l(e.form.specific_times,(function(s,r){return t("div",{key:r,staticClass:"flex justify-between mb-1"},[t("el-date-picker",{staticClass:"flex-1",attrs:{type:"datetime",clearable:!1,"picker-options":{disabledDate:e.disabledDate},placeholder:"选择日期时间"},model:{value:e.form.specific_times[r],callback:function(t){e.$set(e.form.specific_times,r,t)},expression:"form.specific_times[index]"}}),t("span",{staticClass:"ml-2 space-x-1 cursor-pointer"},[t("i",{staticClass:"el-icon-circle-plus-outline",on:{click:e.addSpecificTime}}),t("i",{staticClass:"el-icon-remove-outline",on:{click:function(t){return e.removeSpecificTime(r)}}})])],1)})),0):e._e(),4===e.form.exec_type?t("el-form-item",{attrs:{label:"每天执行",required:""}},[t("FLabelWrapper",{attrs:{label:"几点执行"}},[t("el-time-select",{staticStyle:{width:"100%"},attrs:{"picker-options":{start:"00:00",step:"00:15",end:"23:59"},placeholder:"选择日期时间"},model:{value:e.form._cronObj.d,callback:function(t){e.$set(e.form._cronObj,"d",t)},expression:"form._cronObj.d"}})],1)],1):e._e(),5===e.form.exec_type?t("el-form-item",{attrs:{label:"每周执行",required:""}},[t("div",{staticClass:"grid grid-cols-[144px,1fr] gap-2 w-full"},[t("FLabelWrapper",{attrs:{label:"星期"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.form._cronObj.w,callback:function(t){e.$set(e.form._cronObj,"w",t)},expression:"form._cronObj.w"}},[t("el-option",{attrs:{label:"星期一",value:"1"}}),t("el-option",{attrs:{label:"星期二",value:"2"}}),t("el-option",{attrs:{label:"星期三",value:"3"}}),t("el-option",{attrs:{label:"星期四",value:"4"}}),t("el-option",{attrs:{label:"星期五",value:"5"}}),t("el-option",{attrs:{label:"星期六",value:"6"}}),t("el-option",{attrs:{label:"星期日",value:"0"}})],1)],1),t("FLabelWrapper",{attrs:{label:"几点执行"}},[t("el-time-select",{staticStyle:{width:"100%"},attrs:{"picker-options":{start:"00:00",step:"00:15",end:"23:59"},placeholder:"选择日期时间"},model:{value:e.form._cronObj.d,callback:function(t){e.$set(e.form._cronObj,"d",t)},expression:"form._cronObj.d"}})],1)],1)]):e._e(),6===e.form.exec_type?t("el-form-item",{attrs:{label:"每月执行",required:""}},[t("div",{staticClass:"grid grid-cols-[144px,1fr] gap-2 w-full"},[t("FLabelWrapper",{attrs:{label:"几号执行"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form._cronObj.M,callback:function(t){e.$set(e.form._cronObj,"M",t)},expression:"form._cronObj.M"}},e._l(31,(function(e,s){return t("el-option",{key:s,attrs:{label:s+1+"号",value:s+1}})})),1)],1),t("FLabelWrapper",{attrs:{label:"几点执行"}},[t("el-time-select",{staticStyle:{width:"100%"},attrs:{"picker-options":{start:"00:00",step:"00:15",end:"23:59"},placeholder:"选择日期时间"},model:{value:e.form._cronObj.d,callback:function(t){e.$set(e.form._cronObj,"d",t)},expression:"form._cronObj.d"}})],1)],1)]):e._e(),2===e.form.exec_type?t("el-form-item",{attrs:{label:"执行周期",required:""}},[t("FLabelWrapper",{attrs:{label:"cron表达式(分钟级)："+e.cronFormat(e.form.cron)}},[t("el-input",{model:{value:e.form.cron,callback:function(t){e.$set(e.form,"cron",t)},expression:"form.cron"}})],1)],1):e._e(),t("el-form-item",{attrs:{label:"超时时间",required:""}},[t("div",[t("FLabelWrapper",{attrs:{label:`单位：秒 ( ${e.timeoutFormat(e.form.timeout.seconds)} ) `}},[t("el-input",{model:{value:e.form.timeout.seconds,callback:function(t){e.$set(e.form.timeout,"seconds",e._n(t))},expression:"form.timeout.seconds"}})],1)],1)]),t("el-form-item",{attrs:{label:"并发数目",required:""}},[t("el-input",{model:{value:e.form.push_size,callback:function(t){e.$set(e.form,"push_size",e._n(t))},expression:"form.push_size"}})],1),t("el-form-item",{attrs:{label:"生效主机"}},[t("SelectAgentTag",{attrs:{"max-show":26,title:"发布策略 - 生效主机选择"},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",[e._v(" 点击查看明细 ")])]},proxy:!0},{key:"empty",fn:function(){return[t("el-tag",{staticClass:"mr-2",attrs:{size:"mini"}},[e._v("全部机器")])]},proxy:!0}]),model:{value:e.form.filters,callback:function(t){e.$set(e.form,"filters",t)},expression:"form.filters"}})],1),t("el-form-item",{attrs:{label:"排除主机"}},[t("div",[t("SelectAgentTag",{attrs:{"max-show":17,label:"该选项比生效主机优先级更高",mode:"ips"},model:{value:e.form._excludesParse,callback:function(t){e.$set(e.form,"_excludesParse",t)},expression:"form._excludesParse"}})],1)])],1)],1)],1)},o=[],i=s(99726),a=s(88999),n=s(84020),l=s(13919),c=s(95814),p=s(95093),u=s.n(p),f=s(1116),d=s.n(f),m=function(){var e=this,t=e._self._c;return t("FLabelWrapper",{scopedSlots:e._u([{key:"label",fn:function(){return[e._t("label",(function(){return[e._v(e._s(e.label))]}),{total:e.totalCount})]},proxy:!0}],null,!0)},[t("div",{staticClass:"p-[10px] border border-gray-300 rounded-md border-solid cursor-pointer"},[t("div",{on:{click:function(t){return e.openDialog()}}},[e.isEmpty(e.value)?t("div",{staticClass:"text-blue-400 py-[0px] px-[5px]"},[e._t("empty",(function(){return[e._v("点击选择机器")]}))],2):[e.value?.inet_mode?[t("div",{staticClass:"flex flex-wrap"},[e._l(e.value?.inets?.slice(0,e.maxShow)||[],(function(s,r){return t("div",{key:r,staticClass:"w-[87px] truncate",staticStyle:{margin:"2px","font-size":"12px",color:"#fff",padding:"3px","border-radius":"3px","background-color":"#409eff","line-height":"1em"}},[e._v(" "+e._s(s)+" ")])})),e.value?.inets?.length>e.maxShow?t("div",{staticStyle:{margin:"2px","font-size":"12px",color:"#3b82f6",padding:"3px","line-height":"1em"}},[e._v(" +"+e._s(e.value?.inets?.length-e.maxShow)+" ")]):e._e()],2)]:[e.value?.keyword?t("span",{staticStyle:{margin:"2px","font-size":"12px",color:"#fff",padding:"3px","border-radius":"3px","background-color":"#409eff","line-height":"1em",display:"inline-block"}},[e._v(" 关键字: "+e._s(e.value?.keyword)+" ")]):e._e(),e.value?.keyword&&e.value?.filters?.length?t("span",[e._v(" & ")]):e._e(),e._l(e.value?.filters||[],(function(s,r){return[t("span",{key:r},[t("span",{staticStyle:{margin:"2px","font-size":"12px",color:"#fff",padding:"3px","border-radius":"3px","background-color":"#409eff",display:"inline-block","line-height":"1em"}},[e._v(" "+e._s(e.formatCond(s))+" ")]),r!==e.value?.filters?.length-1?t("span",[e._v(" & ")]):e._e()])]}))]]],2),t("agentSelect",{ref:"agentSelectRef",attrs:{title:e.title}})],1)])},h=[],v=s(85471),g=function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{attrs:{visible:e.dialogVisible,width:"1000px","append-to-body":"","destroy-on-close":"","custom-class":"agent-select-dialog","show-close":!1},on:{"update:visible":function(t){e.dialogVisible=t}},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",{staticClass:"flex items-center justify-between"},[t("span",{staticClass:"text-[16px] font-[600] text-[#515151]"},[e._v(" "+e._s(e.title||"主机选择")+" ")]),e.disabled?e._e():t("span",[t("span",{staticClass:"text-[12px] text-gray-600 mr-1"},[e._v(" ["+e._s("cond"===e.mod?"条件匹配模式":"手动勾选模式")+"] 已匹配："),t("span",{staticClass:"text-blue-500 mr-1"},[e._v(e._s("cond"===e.mod?e.pagination.total:e.checkedData.length))]),e._v("台机器 ")]),t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.confirm()}}},[e._v("完成选择")])],1)])]},proxy:!0}])},[t("div",{},[t("div",{},[t("div",[t("div",{staticClass:"mb-2 pb-2 border-0 border-b border-solid border-gray-200"},[t("el-radio-group",{attrs:{disabled:e.disabled},model:{value:e.mod,callback:function(t){e.mod=t},expression:"mod"}},[["ips","all"].includes(e.singleMod)?t("el-radio",{attrs:{label:"ips"}},[t("el-tooltip",{attrs:{content:"通过手动勾选或导入，选择被勾选的机器"}},[t("span",[e._v(" 手动勾选模式 "),t("i",{staticClass:"el-icon-question"})])])],1):e._e(),["cond","all"].includes(e.singleMod)?t("el-radio",{attrs:{label:"cond"}},[t("el-tooltip",{attrs:{content:"选择符合查询条件的所有机器"}},[t("span",[e._v(" 条件匹配模式 "),t("i",{staticClass:"el-icon-question"})])])],1):e._e()],1)],1),t("div",{staticClass:"mb-1"},[t("filterOption",{ref:"selectSearchRef",attrs:{options:e.condData||[],suggestOptions:e.suggestOptions},on:{change:e.reload},scopedSlots:e._u([{key:"prefix",fn:function(){return[t("el-input",{staticStyle:{width:"240px"},attrs:{size:"mini",placeholder:"输入关键字过滤",clearable:""},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),t("el-button",{staticClass:"buttonsearch ml-1",attrs:{size:"mini"},on:{click:e.reload}},[t("div",{staticStyle:{margin:"0 5px"}},[t("i",{staticClass:"el-icon-search"})])])]},proxy:!0}]),model:{value:e.filters,callback:function(t){e.filters=t},expression:"filters"}})],1),t("div",{staticClass:"grid",class:{"grid-cols-[1fr,200px] gap-2":"ips"===e.mod,"grid-cols-1":"cond"===e.mod}},[t("div",{staticClass:"min-w-0"},[t("el-table",{ref:"tableRef",staticClass:"mt-1",staticStyle:{width:"100%"},attrs:{"header-cell-style":e.$attrs["header-cell-style"]||{color:"#909399",textAlign:"center",background:"#f5f7fa"},data:e.tableData,"row-key":"inet"},on:{select:e.selectRow,"select-all":e.selectAll}},[t("el-table-column",{attrs:{type:"selection",selectable:e.selectable}}),t("el-table-column",{attrs:{label:"终端IP",prop:"inet",width:"150px"}}),t("el-table-column",{attrs:{label:"标签"},scopedSlots:e._u([{key:"default",fn:function({row:s}){return[t("div",{staticStyle:{display:"flex","align-items":"center"}},[t("svg-icon",{staticClass:"iconfont",staticStyle:{height:"36px",width:"22px",float:"left"},attrs:{"icon-class":"linux"===s.goos?"linux":"windows"===s.goos?"Windows":"apple"}}),t("span",{},[t("el-tag",{attrs:{size:"mini",type:3===s.status?"success":1===s.status?"warning":2===s.status?"info":"danger"}},[e._v(" "+e._s(3===s.status?"在线":1===s.status?"未激活":2===s.status?"离线":"已删除")+" ")]),s.deleted?t("el-tag",{attrs:{size:"mini",type:"danger"}},[e._v("已删除")]):e._e(),!s.deleted&&s.unload?t("el-tag",{attrs:{size:"mini"}},[e._v("静默中")]):e._e(),null!==s.tags?t("span",{staticStyle:{"margin-left":"5px"}},[t("span",[e._l(e.ipRe(s.tags,s.goos).slice(0,3),(function(s,r){return t("el-tag",{key:r,attrs:{size:"mini"}},[e._v(" "+e._s(s))])})),e.ipRe(s.tags,s.goos).length>3?t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"right"}},[t("el-tag",{attrs:{size:"mini",type:"info"}},[e._v(" + "+e._s(e.ipRe(s.tags).length))]),t("div",{attrs:{slot:"content"},slot:"content"},e._l(e.ipRe(s.tags),(function(s,r){return t("span",{key:r,staticStyle:{"padding-right":"15px"}},[e._v(e._s(s)),t("br")])})),0)],1):e._e()],2)]):e._e()],1)],1)]}}])}),t("el-table-column",{attrs:{label:"agent版本",width:"160px"},scopedSlots:e._u([{key:"default",fn:function({row:s}){return[t("div",[s.customized?t("el-tag",{attrs:{size:"mini",type:"info"}},[e._v(" "+e._s(s.customized)+" ")]):e._e(),e._v(" "+e._s(s.edition)+" ")],1)]}}])})],1),t("div",{staticClass:"mt-2 flex justify-end"},[t("el-pagination",{attrs:{"current-page":e.pagination.pageIndex,"page-sizes":e.pagination.pageSizes||[15,30,50],"page-size":e.pagination.pageSize,size:"mini",layout:e.pagination.layout||"jumper, sizes, prev, pager, next,total",total:e.pagination.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.pagination,"pageIndex",t)},"update:current-page":function(t){return e.$set(e.pagination,"pageIndex",t)},"update:pageSize":function(t){return e.$set(e.pagination,"pageSize",t)},"update:page-size":function(t){return e.$set(e.pagination,"pageSize",t)}}})],1)],1),"ips"===e.mod?t("el-card",{staticClass:"min-h-[500px]",attrs:{shadow:"never",size:"mini","body-style":"padding: 10px"}},[t("div",{staticClass:"pl-[5px] mb-2 flex justify-between"},[t("span",{staticClass:"text-gray-600"},[e._v("已勾选"+e._s(e.checkedData.length)+"台机器")]),e.disabled?e._e():t("div",[t("span",{staticClass:"cursor-pointer text-blue-400 mr-1 text-[12px]",on:{click:function(t){e.addInputShow=!0}}},[e._v("导入")]),t("span",{staticClass:"cursor-pointer text-[#ff7126] text-[12px]",on:{click:e.clear}},[e._v("清空")])])]),e.addInputShow?t("div",[t("div",[t("el-input",{attrs:{type:"textarea",placeholder:"换行输入多个机器IP",rows:"3"},model:{value:e.addInput,callback:function(t){e.addInput=t},expression:"addInput"}})],1),t("div",{staticClass:"mt-1 flex justify-end"},[t("span",{staticClass:"cursor-pointer text-blue-400 text-[12px]",on:{click:e.add}},[e._v("确认")])])]):e._e(),t("div",e._l(e.checkedData,(function(s,r){return t("div",{key:r,staticClass:"p-[5px] hover:bg-[#eaedf0] flex justify-between items-center"},[t("span",[e._v(" 🖥️ "+e._s(s)+" ")]),e.disabled?e._e():t("span",{staticClass:"cursor-pointer text-[#ff7126]",on:{click:function(t){return e.remove(s)}}},[e._v("x")])])})),0)]):e._e()],1)])])])])],1)},_=[],E=s(98362),y=s(31052),x=s(25194),b=s(65524),w={components:{filterOption:b.A},props:{title:{type:String,default:""}},setup(e,{expose:t}){const s=(0,v.ref)([]),r=(0,v.ref)(!1),o=(0,v.ref)(""),i=(0,v.ref)([]),a=(0,v.ref)(),n=(0,v.ref)([]),l=(0,v.ref)([]),c=(0,v.ref)("ips"),p=(0,v.ref)(!1),u=(0,v.ref)(!1),f=(0,v.ref)({tag:[]}),d=(0,v.ref)(""),m=(0,v.ref)({pageIndex:1,pageSize:20,total:0,pageSizes:[20,30,50],layout:"total, sizes, prev, pager, next"});let h;async function g(){try{const e=new URLSearchParams;e.append("size",m.value.pageSize),e.append("current",m.value.pageIndex),e.append("keyword",o.value);for(let s of l.value){const t={...s};e.append("filters",JSON.stringify(t))}const{data:t}=await E.A.get("/minions",{params:e});s.value=t?.records||[],m.value.total=t?.total||0,setTimeout((()=>{for(let e of s.value)i.value.includes(e.inet)&&a.value.toggleRowSelection(e,!0)}),1)}catch(e){console.log(e),y.Message.error("加载失败")}}function _(){m.value.pageIndex=1,g()}async function b(){const{data:e}=await E.A.get("/tag/sidebar");f.value["tag"]=e?.map((e=>e.name))||[]}function w(e,t){if(null!==e){var s=e.filter((e=>{var s=/(\d+)\.(\d+)\.(\d+)\.(\d+)/g;return(!t||e!==t)&&(s.test(e)?void 0:e)}));return s}}function $(){let e=null;"cond"===c.value?(o.value||l.value.length)&&(e={keyword:o.value,filters:l.value,inets:[],inet_mode:!1}):i.value.length&&(e={keyword:o.value,filters:l.value,inets:i.value,inet_mode:!0}),h?.(e),r.value=!1}function R(e,t){const s=e.find((e=>e.inet===t.inet));s?i.value.push(t.inet):i.value=i.value.filter((e=>e!==t.inet))}function C(e){for(let t of s.value)e.length?i.value.includes(t.inet)||i.value.push(t.inet):i.value=i.value.filter((e=>e!==t.inet))}function I(e){for(let t of e||[])i.value.includes(t.inet)||i.value.push(t.inet)}function S(){i.value=[],a.value.clearSelection()}function k(e){i.value=i.value.filter((t=>t!==e));const t=s.value.find((t=>t.inet===e));t&&a.value.toggleRowSelection(t,!1)}function A(){m.value.pageIndex=1,g()}function O(){g()}async function T(){try{const{data:e}=await E.A.get("/minion/cond");n.value=e?.conditions?.map((e=>("代理节点"===e.desc?e.desc="broker节点":"状态"===e.desc?e.desc="在线状态":"版本"===e.desc?e.desc="agent版本":"定制版本"===e.desc?e.desc="agent分支版本":"创建时间"===e.desc?e.desc="首次安装时间":"上线时间"===e.desc&&(e.desc="最近上线时间"),e)))}catch(e){}}function L(){if(d.value=d.value.trim(),d.value){const e=d.value.split("\n").map((e=>e.trim())).filter(Boolean);for(let t of e){const e=s.value.find((e=>e.inet===t));i.value.includes(t)||(i.value.push(t),e&&a.value.toggleRowSelection(e,!0))}}u.value=!1,d.value=""}function N(e){return"ips"===c.value}b(),T();const D=(0,v.ref)("");return t({openDialog(e,t){s.value=[],m.value.total=0,o.value=e?.keyword||"",l.value=e?.filters||[],i.value=e?.inets||[],c.value=!e||e?.inet_mode?"ips":"cond",D.value="all",t?.mode&&(c.value=t?.mode,D.value=t?.mode),p.value=t?.disabled||!1,g(),r.value=!0;const{resolve:a,promise:n}=(0,x.Y)();return h=a,n}}),{tableData:s,pagination:m,loadData:g,ipRe:w,dialogVisible:r,confirm:$,keyword:o,checkedData:i,updateCheckedData:I,handleSizeChange:A,handleCurrentChange:O,tableRef:a,reload:_,condData:n,filters:l,suggestOptions:f,remove:k,clear:S,selectRow:R,selectAll:C,mod:c,addInputShow:u,addInput:d,add:L,disabled:p,selectable:N,singleMod:D}}},$=w,R=s(81656),C=(0,R.A)($,g,_,!1,null,null,null),I=C.exports,S={components:{FLabelWrapper:i.A,agentSelect:I},props:{value:{type:Object,default:()=>({})},label:{type:String,default:""},maxShow:{type:Number,default:10},mode:{type:String,default:""},disabled:{type:Boolean,default:!1},title:{type:String,default:""}},setup(e,{emit:t}){const s=(0,v.ref)(0),r=(0,v.ref)();function o(){r.value.openDialog(e.value,{mode:e.mode,disabled:e.disabled}).then((e=>{t("input",(e?.inet_mode||e?.keyword||e?.filters?.length)&&(!e?.inet_mode||e?.inets?.length)?e:null)}))}const i=(0,v.ref)([]);async function a(){try{const{data:e}=await E.A.get("/minion/cond");i.value=e?.conditions?.map((e=>("代理节点"===e.desc?e.desc="broker节点":"状态"===e.desc?e.desc="在线状态":"版本"===e.desc?e.desc="agent版本":"定制版本"===e.desc?e.desc="agent分支版本":"创建时间"===e.desc?e.desc="首次安装时间":"上线时间"===e.desc&&(e.desc="最近上线时间"),e)))}catch(e){}}function n(e){return!!e&&(!e.keyword&&(1===e.filters.length&&"minion.inet"===e.filters[0].key&&"in"===e.filters[0].operator))}function l(e){const t=i.value.find((t=>e.key===t.key));if(!t)return"";const s=t?.operators?.find((t=>t.key===e.operator));return s?`${t?.desc} ${s?.desc} ${Array.isArray(e.value)?e.value.join(","):e.value}`:""}function c(e){return!e||(e.inet_mode?!e.inets?.length:!e.keyword&&!e.filters?.length)}return a(),{totalCount:s,agentSelectRef:r,openDialog:o,condData:i,formatCond:l,onlyCheckIps:n,isEmpty:c}}},k=S,A=(0,R.A)(k,m,h,!1,null,"c24ce974",null),O=A.exports,T=s(39338);function L(e){const t=e.trim().split(" ");if(5!==t.length)return null;const[s,r,o,i,a]=t;if("*"!==i)return null;if("*"===s||"*"===r)return null;if(!/^\d+$/.test(r)||!/^\d+$/.test(s)||parseInt(r)<0||parseInt(r)>23||parseInt(s)<0||parseInt(s)>59)return null;const n=(e,t)=>`${e.padStart(2,"0")}:${t.padStart(2,"0")}`;return"*"!==o&&"*"===a?/^\d+$/.test(o)&&parseInt(o)>=1&&parseInt(o)<=31?{d:n(r,s),w:null,M:o}:null:"*"===o&&"*"!==a?/^\d+$/.test(a)&&parseInt(a)>=0&&parseInt(a)<=6?{d:n(r,s),w:a,M:null}:null:"*"===o&&"*"===a?{d:n(r,s),w:null,M:null}:null}class N{constructor(e){if(this.optType=e?.optType||"a",this.step=e?.step||1,this.mode=e?.mode||1,this.id=e?.id||"",this.exec_id=e?.exec_id||"",this.name=e?.name||"",this.templateName=e?.templateName||"",this.intro=e?.intro||"",this.content=e?.content||"",this.extension_id=e?.extension_id||"",this._templateContent=e?._templateContent||"",this._resultCode=e?._resultCode||"",this.data=e?.data||{},this.dataCache=this.data,this._options=e?._options||[],this._formError=e?._formError||"",this._previewResult=e?._previewResult||!1,this.step_done=e?.step_done||!1,this.filters=e?.filters||null,this.excludes=e?.excludes||null,this._excludesParse={inet_mode:!0,inets:this.excludes||[]},this.push_size=e?.push_size||10,this.cron=e?.cron,this._cronObj={d:null,w:null,M:null},this.specific_times=e?.specific_times||[u()().startOf("d")],this.exec_type=e?.exec_type||1,this.timeout=e?.timeout||{days:0,hours:0,minutes:0,seconds:300},this.enabled=e?.enabled??!0,1!==this.exec_type||this.step_done||"m"!==this.optType||(this.enabled=!0,this.timeout.seconds=300),"a"===this.optType)this.cron="0 0 * * *";else if(this.cron){const e=L(this.cron);e?(this._cronObj.d=e.d,this._cronObj.w=e.w,this._cronObj.M=e.M,this._cronObj.M?this.exec_type=6:this._cronObj.w?this.exec_type=5:this._cronObj.d&&(this.exec_type=4)):this.exec_type=2}}}var D={components:{FLabelWrapper:i.A,FRadio:a.A,TemplateList:n.A,FormDesign:l.A,AceCoderEdit:c.A,SelectAgentTag:O},props:{},data(){return{parseImgByIntro:T.ae,form:new N,optType:"add",dialogShow:!1,res:null,rej:null,required:{required:!0,message:"请选择类别",trigger:"change"}}},methods:{openDialog(e){return this.dialogShow=!0,this.form=new N(e),1===this.form.mode&&this.form.extension_id&&this.form._templateContent&&this.getFormOptions(),new Promise(((e,t)=>{this.res=e,this.rej=t}))},async getFormOptions(){try{const{data:e}=await E.A.post("/lua-template/preparse",{content:this.form._templateContent});this.form._options=e||[],this.form._formError=""}catch(e){this.form._formError=e+""}},async getResultCodeNoSave(){try{if(this.form._formError)throw this.form._formError;const{data:e}=await E.A.post("/lua-template/prerender",{content:this.form._templateContent,data:this.$refs.formDesignRef?.getValue()});this.form._resultCode=e?.data||""}catch(e){this.form._resultCode="发生错误:"+e}},openPrew(){this.form._previewResult=!this.form._previewResult,this.form._previewResult&&this.getResultCodeNoSave()},handleSelect(e){this.form.templateName=e.name,this.form.extension_id=e.id,this.form.name||(this.form.name="使用模板:"+e.name),this.form.intro||(this.form.intro=e.intro||"新增一条任务"),this.form._templateContent=e.content,this.getFormOptions()},reSelectTemplate(){this.form.extension_id="",this.form.templateName="",this.form._templateContent="",this.form._options=[],this.form._formError="",this.form.data={}},timeoutFormat(e){if(e<60)return e+"秒";const t=Math.floor(e/60),s=e%60;return s>0?`${t}分钟${s}秒`:`${t}分钟`},cronFormat(e){try{return d().toString(e,{locale:"zh_CN"})}catch(t){return"cron表达式不正确"}},addSpecificTime(){this.form.specific_times.push(u()().startOf("d"))},removeSpecificTime(e){1!==this.form.specific_times.length&&this.form.specific_times.splice(e,1)},disabledDate(e){return e.getTime()<Date.now()-864e5},async deleteTask(){try{await E.A.delete("/task-extension",{params:{id:this.form.id}}),this.$message.success("删除成功"),this.closeDialog()}catch(e){this.$message.error(e)}},async disabledMod(e){if(2===e){const{success:e,msg:t}=await this.validateForm();return e?(1===this.form.mode&&(this.form.data=this.$refs.formDesignRef?.getValue()),!1):(this.$message.error(t),!0)}return!1},async validateForm(){try{if(await this.$refs.formRef.validate().catch((()=>{throw"请检查必填项"})),1===this.form.mode){if(!this.form.extension_id)throw"请在下方选择模版并填写所需参数"}else if(2===this.form.mode&&!this.form.content)throw"请填写任务脚本";return{success:!0,msg:""}}catch(e){return{success:!1,msg:e+""}}},async nextStep(){try{const{success:e,msg:t}=await this.validateForm();if(!e)throw t;1===this.form.mode&&(this.form.data=this.$refs.formDesignRef?.getValue()),this.form.step=2}catch(e){this.$message.error(e)}},closeDialog(){this.dialogShow=!1,this.res?.()},async step1Save(){try{const{success:e,msg:t}=await this.validateForm();if(!e)throw t;const s={id:this.form.id,name:this.form.name,intro:this.form.intro};if(1===this.form.mode?(s.extension_id=this.form.extension_id,s.data=this.$refs.formDesignRef?.getValue()):2===this.form.mode&&(s.code=this.form.content),"a"===this.form.optType){const{data:e}=await E.A.post("/task-extension/code",s);this.form.id=e.id,this.form.optType="m"}else"m"===this.form.optType&&await E.A.patch("/task-extension/code",s);this.$message.success("保存成功")}catch(e){this.$message.error(e)}},async step2Save(){try{const{success:e,msg:t}=await this.validateForm();if(!e)throw t;const s={id:this.form.id,name:this.form.name,intro:this.form.intro,enabled:this.form.enabled,timeout:this.form.timeout,push_size:this.form.push_size,filters:this.form.filters,excludes:this.form._excludesParse?.inets||null};1===this.form.mode?(s.extension_id=this.form.extension_id,s.data=this.form.data):2===this.form.mode&&(s.code=this.form.content),2===this.form.exec_type?s.cron=this.form.cron:3===this.form.exec_type?s.specific_times=this.form.specific_times?.map((e=>u()(e).toISOString())):4===this.form.exec_type?s.cron=this.generateCron({d:this.form._cronObj.d}):5===this.form.exec_type?s.cron=this.generateCron({d:this.form._cronObj.d,w:this.form._cronObj.w}):6===this.form.exec_type&&(s.cron=this.generateCron({d:this.form._cronObj.d,M:this.form._cronObj.M})),"a"===this.form.optType?await E.A.post("/task-extension/publish",s):"m"===this.form.optType&&await E.A.patch("/task-extension/publish",s),this.$message.success("发布成功"),this.closeDialog()}catch(e){this.$message.error(e)}},generateCron(e){const{d:t,w:s,M:r}=e;let o="0",i="0";if(t){const e=t.split(":");o=e[0],i=e[1]}return r?`${i} ${o} ${r} * *`:s?`${i} ${o} * * ${s}`:t?`${i} ${o} * * *`:"* * * * *"}}},P=D,j=(0,R.A)(P,r,o,!1,null,"2af27d05",null),z=j.exports},99880:function(e,t,s){"use strict";s.d(t,{A:function(){return I}});var r=function(){var e=this,t=e._self._c;return t("div",[t("el-drawer",{attrs:{visible:e.dialogVisible,direction:"rtl","destroy-on-close":"",size:"100%","append-to-body":"","show-close":!1},on:{"update:visible":function(t){e.dialogVisible=t}},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",{staticClass:"flex justify-between items-center text-[14px] text-gray-600"},[t("span",[e._v(" "+e._s("a"===e.form.optType?"发布模板":"编辑模板")+" "),t("i",{staticClass:"el-icon-arrow-right"}),e._v(" "+e._s("service"===e.form.category?"服务模板":"任务模板")+" "),t("i",{staticClass:"el-icon-arrow-right"}),e._v(" "+e._s(e.form.name)+" ")]),t("div",[t("el-button",{staticClass:"mr-1",attrs:{size:"small"},on:{click:e.helpDoc}},[e._v("参考手册")]),t("el-button",{staticClass:"mr-1",attrs:{size:"small"},on:{click:e.closeDialog}},[e._v("关闭")]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.confirm}},[e._v("保存")])],1)])]},proxy:!0}])},[t("div",{staticClass:"grid grid-cols-2 gap-2",class:{"grid-cols-[1fr,2fr]":e.previewResult,"grid-cols-1":!e.showPreview}},[t("div",{staticClass:"relative w-full"},[t("div",{staticClass:"h-[calc(100vh-44px)] fixed left-0 top-[44px] w-1/2",class:{"w-1/3":e.previewResult,"w-full":!e.showPreview}},[t("AceCoderEdit",{attrs:{theme:"light"},scopedSlots:e._u([{key:"extra",fn:function(){return[t("span",{staticClass:"ml-[10px] cursor-pointer",on:{click:function(t){e.showPreview=!0}}},[t("span",[e._v(" 预览 ")])])]},proxy:!0},{key:"start",fn:function(){return[t("span",{staticClass:"ml-2"},[e._v(" 模板名称： "+e._s(e.form.name)+" ")])]},proxy:!0}]),model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1)]),e.showPreview?t("div",{staticClass:"relative min-h-[calc(100vh-44px)] p-2 bg-[#fbfbfb] cardbox",class:{grid:e.previewResult,"grid-cols-2":e.previewResult,"gap-2":e.previewResult}},[t("el-card",{staticClass:"formCard min-h-full",attrs:{shadow:"never"},scopedSlots:e._u([{key:"header",fn:function(){return[t("div",[t("div",{staticClass:"flex justify-between"},[t("div",{staticClass:"flex items-center"},[t("FRadio",{staticClass:"w-[220px]",attrs:{align:"center",options:[{value:"表单预览",label:"表单预览"},{value:"模板描述",label:"模板描述"}]},on:{change:e.viewChange},model:{value:e.previewType,callback:function(t){e.previewType=t},expression:"previewType"}})],1),t("div",[t("el-button",{attrs:{type:"text"},on:{click:e.hidePreview}},[e._v("隐藏 ")]),t("el-button",{attrs:{type:"text",disabled:"模板描述"===e.previewType},on:{click:function(t){return e.getFormOptions()}}},[e._v("刷新 ")]),t("el-button",{attrs:{type:"text",size:"small"},on:{click:e.openPrew}},[e._v("结果预览 "),e.previewResult?t("i",{staticClass:"el-icon-arrow-right"}):t("i",{staticClass:"el-icon-arrow-left"})])],1)]),e.formError?t("div",{staticClass:"text-red-600 mt-1"},[e._v(" 发生错误 ："+e._s(e.formError)+" ")]):e._e()])]},proxy:!0}],null,!1,2485807340)},["表单预览"===e.previewType?t("div",[t("FormDesign",{ref:"formDesignRef",attrs:{options:e.formOptions},model:{value:e.formParams,callback:function(t){e.formParams=t},expression:"formParams"}})],1):t("div",[t("el-form",{attrs:{model:e.form,size:"small","label-width":"100px"}},[t("el-form-item",{attrs:{label:"模板名称",required:""}},[t("el-input",{attrs:{disabled:"a"!==e.form.optType},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("el-form-item",{attrs:{label:"模板分类",required:""}},[t("el-select",{staticClass:"w-full",attrs:{size:"medium",disabled:"a"!==e.form.optType||!!e.category,placeholder:"请选择"},model:{value:e.form.category,callback:function(t){e.$set(e.form,"category",t)},expression:"form.category"}},[t("el-option",{attrs:{label:"服务",value:"service"}}),t("el-option",{attrs:{label:"任务",value:"task"}})],1)],1),t("el-form-item",{staticClass:"-mb-[10px]",attrs:{label:"模板图标"}},[e.form.icon?t("img",{attrs:{src:e.parseIntroByImg(e.form.icon),alt:"",width:"60",height:"60"},on:{click:e.openImgSelect}}):t("el-button",{attrs:{type:"text"},on:{click:e.openImgSelect}},[e._v("选择图标")])],1),t("el-form-item",{attrs:{label:"模板描述"}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:4}},model:{value:e.form.intro,callback:function(t){e.$set(e.form,"intro",t)},expression:"form.intro"}})],1),t("el-form-item",{attrs:{label:"更新日志"}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:4}},model:{value:e.form.changelog,callback:function(t){e.$set(e.form,"changelog",t)},expression:"form.changelog"}})],1)],1)],1)]),e.previewResult?t("el-card",{staticClass:"min-h-full",attrs:{title:"结果预览",shadow:"never"},scopedSlots:e._u([{key:"header",fn:function(){return[t("div",{staticClass:"flex justify-end py-[2px]"},[t("el-button",{attrs:{type:"text",size:"small"},on:{click:e.getResultCodeNoSave}},[e._v("刷新 ")]),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.previewResult=!1}}},[e._v("收起预览 ")])],1)]},proxy:!0}],null,!1,3535021956)},[t("div",{staticClass:"h-[calc(100vh-172px)]"},[t("AceCoderEdit",{attrs:{"read-only":"",theme:"light","show-header":!1,mode:"text"},model:{value:e.resultCode,callback:function(t){e.resultCode=t},expression:"resultCode"}})],1)]):e._e()],1):e._e()])]),t("ImgSelect",{ref:"imgSelectRef"})],1)},o=[],i=s(98362),a=s(95814),n=s(88999),l=s(25194),c=s(31052),p=s(99589),u=s.n(p),f=s(85471),d=s(13919),m=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"选择图标","close-on-click-modal":!1,visible:e.dialogShow,width:"600px","close-on-press-escape":!1,"destroy-on-close":""},on:{"update:visible":function(t){e.dialogShow=t},closed:function(t){e.rej?.()}}},[t("div",{staticClass:"grid grid-cols-5 gap-4 justify-items-center"},e._l(e.getAllImgs(),(function(s,r){return t("div",{key:r,staticClass:"p-2 pb-1 rounded hover:bg-slate-200"},[t("img",{staticClass:"cursor-pointer",attrs:{src:s,alt:"",width:"60",height:"60"},on:{click:function(t){return e.onSubmit(r)}}})])})),0)])},h=[],v=s(39338);class g{}var _={components:{},props:{},data(){return{getAllImgs:v.OZ,form:new g,optType:"add",dialogShow:!1,res:null,rej:null,required:{required:!0,message:"请选择类别",trigger:"change"}}},methods:{openDialog(e,t="add"){return this.optType=t,this.dialogShow=!0,this.form={...new g,...e||{}},new Promise(((e,t)=>{this.res=e,this.rej=t}))},async onSubmit(e){this.dialogShow=!1,this.res?.(e)}}},E=_,y=s(81656),x=(0,y.A)(E,m,h,!1,null,"235875d5",null),b=x.exports;class w{constructor(e){this.optType=e?.optType||"a",this.id=e?.id,this.name=e?.name,this.category=e?.category||"service",this.content=e?.content||"",this.extension_id=e?.extension_id||"",this.changelog=e?.changelog||"新发布了一个版本",this.intro=e?.intro||"通过模板进行lua代码的简化和复用",this.icon=e?.icon||"cloud13";const t=this.intro.split(":"),s=t?.[0];/cloud/.test(s)&&(this.icon=s,this.intro=t.slice(1).join(":"))}format(){return{...this,intro:`${this.icon}:${this.intro}`}}}var $={components:{AceCoderEdit:a.A,FRadio:n.A,FormDesign:d.A,ImgSelect:b},props:{category:{type:String,default:""}},setup(e,{expose:t}){const s=(0,f.ref)(new w),r=(0,f.ref)([]),o=(0,f.ref)(null),a=(0,f.ref)(),n=(0,f.ref)(""),p=(0,f.ref)(!1),d=(0,f.ref)(""),m=(0,f.ref)("表单预览"),h=(0,f.ref)(!0),g=(0,f.ref)(!1),_=(0,f.ref)(!1);let E,y;async function x(){try{const{data:e}=await i.A.post("/lua-template/preparse",{content:s.value.content});r.value=e||[],n.value=""}catch(e){n.value=e+""}}function b(){h.value=!1,p.value=!1}function $(){p.value=!0,R()}async function R(){try{const{data:e}=await i.A.post("/lua-template/prerender",{content:s.value.content,data:a.value.getValue()});d.value=e?.data||""}catch(e){d.value="发生错误:"+e}}function C(){const e=s.value.semver.split("-"),t=e[0],r=e.slice(1).join("-");s.value.newSemver=u().inc(t,"patch"),r&&(s.value.newSemver=s.value.newSemver+"-"+r),_.value=!0}async function I(){try{if(!s.value.name)throw"模板名称不能为空";if(!s.value.category)throw"请选择模板分类";if("a"===s.value.optType){const{data:e}=await i.A.post("/extension-market",{...s.value.format()});s.value.id=e.id,s.value.optType="m"}else await i.A.put("/extension-market",{...s.value.format()});c.Message.success("保存成功")}catch(e){c.Message.error("保存失败:"+e)}}const S=(0,f.getCurrentInstance)();async function k(){S.proxy.$jumpTo({name:"templateDoc"},"插件手册")}function A(e){"表单预览"===e&&x()}function O(){g.value=!1,E()}const T=(0,f.ref)();function L(){T.value.openDialog().then((e=>{s.value.icon=e}))}return t({openDialog(t){const{promise:i,resolve:a,reject:c}=(0,l.Y)();return p.value=!1,r.value=[],o.value=null,g.value=!0,n.value="",E=a,y=c,s.value=new w(t),e.category&&(s.value.category=e.category),"a"===s.value.optType?m.value="模板描述":(m.value="表单预览",x()),i}}),{form:s,formOptions:r,formParams:o,formError:n,previewResult:p,resultCode:d,previewType:m,showPreview:h,getFormOptions:x,dialogVisible:g,hidePreview:b,openPrew:$,getResultCodeNoSave:R,confirm:I,helpDoc:k,viewChange:A,formDesignRef:a,openConfirmDialog:C,confirmDialogVisible:_,closeDialog:O,openImgSelect:L,imgSelectRef:T,parseIntroByImg:v.uD}}},R=$,C=(0,y.A)(R,r,o,!1,null,"b4f66132",null),I=C.exports},84020:function(e,t,s){"use strict";s.d(t,{A:function(){return g}});var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"w-full"},[t("div",[t("table-list",{ref:"templateListRef",attrs:{selection:"",selectCountLimit:1,data:e.tableDataFilter,"row-key":"id",columns:e.columns,configAble:!1,checkedData:e.checkedData,localPaginate:"",align:"center"},on:{"update:checkedData":function(t){e.checkedData=t},"update:checked-data":function(t){e.checkedData=t},"row-click":e.rowClick},scopedSlots:e._u([{key:"right_top_btn",fn:function(){return[t("div",{staticClass:"flex justify-between"},[t("div",[t("FLabelWrapper",{staticClass:"w-[100px] mr-2",attrs:{label:""}},[t("el-select",{attrs:{size:"mini",placeholder:"模板类型"},on:{change:function(t){return e.loadData()}},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[t("el-option",{attrs:{label:"任务模板",value:"task"}}),t("el-option",{attrs:{label:"服务模板",value:"service"}})],1)],1),t("el-input",{staticClass:"w-[200px] mr-2",attrs:{size:"mini",placeholder:"名称,描述,创建人过滤"},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),t("el-button",{attrs:{size:"mini"}},[e._v("搜索")]),t("el-button",{attrs:{size:"mini",type:e.checkedData.length?"primary":""},on:{click:e.handleSelect}},[e._v("确认选择")])],1),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:e.addTemplateFolder}},[e._v("新增模板")])],1)]},proxy:!0},{key:"name",fn:function({row:s}){return[t("div",{staticClass:"flex items-center"},[t("img",{staticClass:"w-[20px] h-[20px]",attrs:{src:e.parseImgByIntro(s.intro)}}),t("span",{staticClass:"ml-2"},[e._v(e._s(s.name))])])]}},{key:"opt",fn:function({row:s}){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return t.stopPropagation(),e.toDetail(s)}}},[e._v("详情")])]}}])})],1),t("contentCode",{ref:"contentRef",attrs:{category:e.category}})],1)},o=[],i=s.p+"img/img2.0c4f6ad7.png",a=s(35467),n=s(98362),l=s(99726),c=s(95093),p=s.n(c),u=s(99880),f=s(39338),d={components:{FLabelWrapper:l.A,contentCode:u.A,tableList:a.A},props:{category:{type:String,default:""}},data(){return{selectedTemplate:null,img:i,moment:p(),keyword:"",parseImgByIntro:f.ae,type:"",pagination:{pageIndex:1,pageSize:12,total:0,pageSizes:[12,24,36],layout:"total, sizes, prev, pager, next"},tableData:[],checkedData:[],columns:[{label:"模板名称",slot:"name"},{label:"模板类型",prop:"type",formatter:e=>"task"===e.type?"任务模板":"服务模板",width:120},{label:"模板描述",prop:"intro","show-overflow-tooltip":!0,formatter:e=>this.parseIntro(e.intro)},{label:"创建人",prop:"created_by",width:100,formatter:e=>e.created_by?.nickname||e.created_by?.username},{label:"更新时间",prop:"updated_at",formatter:e=>p()(e.updated_at).format("YYYY-MM-DD"),width:100},{label:"操作",slot:"opt",width:80}]}},computed:{tableDataFilter(){return this.tableData.filter((e=>!this.keyword||(!!e.name.includes(this.keyword)||(!!e.intro.includes(this.keyword)||(!!e.created_by?.nickname?.includes(this.keyword)||!!e.created_by?.username?.includes(this.keyword))))))}},created(){this.type=this.category,this.loadData()},methods:{async loadData(){try{const e=await n.A.get("/extension-markets",{params:{category:this.type}});this.tableData=e.data||[]}catch(e){this.$message.error(e)}},addTemplateFolder(){this.$refs.contentRef.openDialog().then((()=>{this.loadData()}))},toDetail(e){this.$refs.contentRef.openDialog({...e,optType:"m"}).then((()=>{this.loadData()}))},handleSelect(){this.$emit("select",this.checkedData?.[0]||void 0)},parseIntro(e){const t=e.split(":");return/cloud/.test(t[0])?t.slice(1).join(":"):e},rowClick(e){const t=this.checkedData.includes(e);this.$refs.templateListRef?.$refs?.table?.toggleRowSelection(e,!t)}}},m=d,h=s(81656),v=(0,h.A)(m,r,o,!1,null,"b852c7a2",null),g=v.exports},25194:function(e,t,s){"use strict";function r(){let e,t;const s=new Promise(((s,r)=>{e=s,t=r}));return{promise:s,resolve:e,reject:t}}s.d(t,{Y:function(){return r}})},93904:function(e,t,s){const r=Symbol("SemVer ANY");class o{static get ANY(){return r}constructor(e,t){if(t=i(t),e instanceof o){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),c("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===r?this.value="":this.value=this.operator+this.semver.version,c("comp",this)}parse(e){const t=this.options.loose?a[n.COMPARATORLOOSE]:a[n.COMPARATOR],s=e.match(t);if(!s)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==s[1]?s[1]:"","="===this.operator&&(this.operator=""),s[2]?this.semver=new p(s[2],this.options.loose):this.semver=r}toString(){return this.value}test(e){if(c("Comparator.test",e,this.options.loose),this.semver===r||e===r)return!0;if("string"===typeof e)try{e=new p(e,this.options)}catch(t){return!1}return l(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof o))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new u(e.value,t).test(this.value):""===e.operator?""===e.value||new u(this.value,t).test(e.semver):(t=i(t),(!t.includePrerelease||"<0.0.0-0"!==this.value&&"<0.0.0-0"!==e.value)&&(!(!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0")))&&(!(!this.operator.startsWith(">")||!e.operator.startsWith(">"))||(!(!this.operator.startsWith("<")||!e.operator.startsWith("<"))||(!(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))||(!!(l(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))||!!(l(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">"))))))))}}e.exports=o;const i=s(98587),{safeRe:a,t:n}=s(99718),l=s(72111),c=s(57272),p=s(53908),u=s(78311)},78311:function(e,t,s){const r=/\s+/g;class o{constructor(e,t){if(t=n(t),e instanceof o)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new o(e.raw,t);if(e instanceof l)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().replace(r," "),this.set=this.raw.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!_(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const t of this.set)if(1===t.length&&E(t[0])){this.set=[t];break}}this.formatted=void 0}get range(){if(void 0===this.formatted){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");const t=this.set[e];for(let e=0;e<t.length;e++)e>0&&(this.formatted+=" "),this.formatted+=t[e].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){const t=(this.options.includePrerelease&&v)|(this.options.loose&&g),s=t+":"+e,r=a.get(s);if(r)return r;const o=this.options.loose,i=o?u[f.HYPHENRANGELOOSE]:u[f.HYPHENRANGE];e=e.replace(i,O(this.options.includePrerelease)),c("hyphen replace",e),e=e.replace(u[f.COMPARATORTRIM],d),c("comparator trim",e),e=e.replace(u[f.TILDETRIM],m),c("tilde trim",e),e=e.replace(u[f.CARETTRIM],h),c("caret trim",e);let n=e.split(" ").map((e=>x(e,this.options))).join(" ").split(/\s+/).map((e=>A(e,this.options)));o&&(n=n.filter((e=>(c("loose invalid filter",e,this.options),!!e.match(u[f.COMPARATORLOOSE]))))),c("range list",n);const p=new Map,E=n.map((e=>new l(e,this.options)));for(const a of E){if(_(a))return[a];p.set(a.value,a)}p.size>1&&p.has("")&&p.delete("");const y=[...p.values()];return a.set(s,y),y}intersects(e,t){if(!(e instanceof o))throw new TypeError("a Range is required");return this.set.some((s=>y(s,t)&&e.set.some((e=>y(e,t)&&s.every((s=>e.every((e=>s.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"===typeof e)try{e=new p(e,this.options)}catch(t){return!1}for(let s=0;s<this.set.length;s++)if(T(this.set[s],e,this.options))return!0;return!1}}e.exports=o;const i=s(68794),a=new i,n=s(98587),l=s(93904),c=s(57272),p=s(53908),{safeRe:u,t:f,comparatorTrimReplace:d,tildeTrimReplace:m,caretTrimReplace:h}=s(99718),{FLAG_INCLUDE_PRERELEASE:v,FLAG_LOOSE:g}=s(16874),_=e=>"<0.0.0-0"===e.value,E=e=>""===e.value,y=(e,t)=>{let s=!0;const r=e.slice();let o=r.pop();while(s&&r.length)s=r.every((e=>o.intersects(e,t))),o=r.pop();return s},x=(e,t)=>(c("comp",e,t),e=R(e,t),c("caret",e),e=w(e,t),c("tildes",e),e=I(e,t),c("xrange",e),e=k(e,t),c("stars",e),e),b=e=>!e||"x"===e.toLowerCase()||"*"===e,w=(e,t)=>e.trim().split(/\s+/).map((e=>$(e,t))).join(" "),$=(e,t)=>{const s=t.loose?u[f.TILDELOOSE]:u[f.TILDE];return e.replace(s,((t,s,r,o,i)=>{let a;return c("tilde",e,t,s,r,o,i),b(s)?a="":b(r)?a=`>=${s}.0.0 <${+s+1}.0.0-0`:b(o)?a=`>=${s}.${r}.0 <${s}.${+r+1}.0-0`:i?(c("replaceTilde pr",i),a=`>=${s}.${r}.${o}-${i} <${s}.${+r+1}.0-0`):a=`>=${s}.${r}.${o} <${s}.${+r+1}.0-0`,c("tilde return",a),a}))},R=(e,t)=>e.trim().split(/\s+/).map((e=>C(e,t))).join(" "),C=(e,t)=>{c("caret",e,t);const s=t.loose?u[f.CARETLOOSE]:u[f.CARET],r=t.includePrerelease?"-0":"";return e.replace(s,((t,s,o,i,a)=>{let n;return c("caret",e,t,s,o,i,a),b(s)?n="":b(o)?n=`>=${s}.0.0${r} <${+s+1}.0.0-0`:b(i)?n="0"===s?`>=${s}.${o}.0${r} <${s}.${+o+1}.0-0`:`>=${s}.${o}.0${r} <${+s+1}.0.0-0`:a?(c("replaceCaret pr",a),n="0"===s?"0"===o?`>=${s}.${o}.${i}-${a} <${s}.${o}.${+i+1}-0`:`>=${s}.${o}.${i}-${a} <${s}.${+o+1}.0-0`:`>=${s}.${o}.${i}-${a} <${+s+1}.0.0-0`):(c("no pr"),n="0"===s?"0"===o?`>=${s}.${o}.${i}${r} <${s}.${o}.${+i+1}-0`:`>=${s}.${o}.${i}${r} <${s}.${+o+1}.0-0`:`>=${s}.${o}.${i} <${+s+1}.0.0-0`),c("caret return",n),n}))},I=(e,t)=>(c("replaceXRanges",e,t),e.split(/\s+/).map((e=>S(e,t))).join(" ")),S=(e,t)=>{e=e.trim();const s=t.loose?u[f.XRANGELOOSE]:u[f.XRANGE];return e.replace(s,((s,r,o,i,a,n)=>{c("xRange",e,s,r,o,i,a,n);const l=b(o),p=l||b(i),u=p||b(a),f=u;return"="===r&&f&&(r=""),n=t.includePrerelease?"-0":"",l?s=">"===r||"<"===r?"<0.0.0-0":"*":r&&f?(p&&(i=0),a=0,">"===r?(r=">=",p?(o=+o+1,i=0,a=0):(i=+i+1,a=0)):"<="===r&&(r="<",p?o=+o+1:i=+i+1),"<"===r&&(n="-0"),s=`${r+o}.${i}.${a}${n}`):p?s=`>=${o}.0.0${n} <${+o+1}.0.0-0`:u&&(s=`>=${o}.${i}.0${n} <${o}.${+i+1}.0-0`),c("xRange return",s),s}))},k=(e,t)=>(c("replaceStars",e,t),e.trim().replace(u[f.STAR],"")),A=(e,t)=>(c("replaceGTE0",e,t),e.trim().replace(u[t.includePrerelease?f.GTE0PRE:f.GTE0],"")),O=e=>(t,s,r,o,i,a,n,l,c,p,u,f)=>(s=b(r)?"":b(o)?`>=${r}.0.0${e?"-0":""}`:b(i)?`>=${r}.${o}.0${e?"-0":""}`:a?`>=${s}`:`>=${s}${e?"-0":""}`,l=b(c)?"":b(p)?`<${+c+1}.0.0-0`:b(u)?`<${c}.${+p+1}.0-0`:f?`<=${c}.${p}.${u}-${f}`:e?`<${c}.${p}.${+u+1}-0`:`<=${l}`,`${s} ${l}`.trim()),T=(e,t,s)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!s.includePrerelease){for(let s=0;s<e.length;s++)if(c(e[s].semver),e[s].semver!==l.ANY&&e[s].semver.prerelease.length>0){const r=e[s].semver;if(r.major===t.major&&r.minor===t.minor&&r.patch===t.patch)return!0}return!1}return!0}},53908:function(e,t,s){const r=s(57272),{MAX_LENGTH:o,MAX_SAFE_INTEGER:i}=s(16874),{safeRe:a,t:n}=s(99718),l=s(98587),{compareIdentifiers:c}=s(61123);class p{constructor(e,t){if(t=l(t),e instanceof p){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!==typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>o)throw new TypeError(`version is longer than ${o} characters`);r("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const s=e.trim().match(t.loose?a[n.LOOSE]:a[n.FULL]);if(!s)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<i)return t}return e})):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(r("SemVer.compare",this.version,this.options,e),!(e instanceof p)){if("string"===typeof e&&e===this.version)return 0;e=new p(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof p||(e=new p(e,this.options)),c(this.major,e.major)||c(this.minor,e.minor)||c(this.patch,e.patch)}comparePre(e){if(e instanceof p||(e=new p(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const s=this.prerelease[t],o=e.prerelease[t];if(r("prerelease compare",t,s,o),void 0===s&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===s)return-1;if(s!==o)return c(s,o)}while(++t)}compareBuild(e){e instanceof p||(e=new p(e,this.options));let t=0;do{const s=this.build[t],o=e.build[t];if(r("build compare",t,s,o),void 0===s&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===s)return-1;if(s!==o)return c(s,o)}while(++t)}inc(e,t,s){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,s);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,s);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,s),this.inc("pre",t,s);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,s),this.inc("pre",t,s);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(s)?1:0;if(!t&&!1===s)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[e];else{let r=this.prerelease.length;while(--r>=0)"number"===typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);if(-1===r){if(t===this.prerelease.join(".")&&!1===s)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let r=[t,e];!1===s&&(r=[t]),0===c(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=r):this.prerelease=r}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}e.exports=p},57414:function(e,t,s){const r=s(30144),o=(e,t)=>{const s=r(e.trim().replace(/^[=v]+/,""),t);return s?s.version:null};e.exports=o},72111:function(e,t,s){const r=s(94641),o=s(13999),i=s(35580),a=s(54089),n=s(7059),l=s(25200),c=(e,t,s,c)=>{switch(t){case"===":return"object"===typeof e&&(e=e.version),"object"===typeof s&&(s=s.version),e===s;case"!==":return"object"===typeof e&&(e=e.version),"object"===typeof s&&(s=s.version),e!==s;case"":case"=":case"==":return r(e,s,c);case"!=":return o(e,s,c);case">":return i(e,s,c);case">=":return a(e,s,c);case"<":return n(e,s,c);case"<=":return l(e,s,c);default:throw new TypeError(`Invalid operator: ${t}`)}};e.exports=c},46170:function(e,t,s){const r=s(53908),o=s(30144),{safeRe:i,t:a}=s(99718),n=(e,t)=>{if(e instanceof r)return e;if("number"===typeof e&&(e=String(e)),"string"!==typeof e)return null;t=t||{};let s=null;if(t.rtl){const r=t.includePrerelease?i[a.COERCERTLFULL]:i[a.COERCERTL];let o;while((o=r.exec(e))&&(!s||s.index+s[0].length!==e.length))s&&o.index+o[0].length===s.index+s[0].length||(s=o),r.lastIndex=o.index+o[1].length+o[2].length;r.lastIndex=-1}else s=e.match(t.includePrerelease?i[a.COERCEFULL]:i[a.COERCE]);if(null===s)return null;const n=s[2],l=s[3]||"0",c=s[4]||"0",p=t.includePrerelease&&s[5]?`-${s[5]}`:"",u=t.includePrerelease&&s[6]?`+${s[6]}`:"";return o(`${n}.${l}.${c}${p}${u}`,t)};e.exports=n},40909:function(e,t,s){const r=s(53908),o=(e,t,s)=>{const o=new r(e,s),i=new r(t,s);return o.compare(i)||o.compareBuild(i)};e.exports=o},11763:function(e,t,s){const r=s(50560),o=(e,t)=>r(e,t,!0);e.exports=o},50560:function(e,t,s){const r=s(53908),o=(e,t,s)=>new r(e,s).compare(new r(t,s));e.exports=o},51832:function(e,t,s){const r=s(30144),o=(e,t)=>{const s=r(e,null,!0),o=r(t,null,!0),i=s.compare(o);if(0===i)return null;const a=i>0,n=a?s:o,l=a?o:s,c=!!n.prerelease.length,p=!!l.prerelease.length;if(p&&!c)return l.patch||l.minor?n.patch?"patch":n.minor?"minor":"major":"major";const u=c?"pre":"";return s.major!==o.major?u+"major":s.minor!==o.minor?u+"minor":s.patch!==o.patch?u+"patch":"prerelease"};e.exports=o},94641:function(e,t,s){const r=s(50560),o=(e,t,s)=>0===r(e,t,s);e.exports=o},35580:function(e,t,s){const r=s(50560),o=(e,t,s)=>r(e,t,s)>0;e.exports=o},54089:function(e,t,s){const r=s(50560),o=(e,t,s)=>r(e,t,s)>=0;e.exports=o},93007:function(e,t,s){const r=s(53908),o=(e,t,s,o,i)=>{"string"===typeof s&&(i=o,o=s,s=void 0);try{return new r(e instanceof r?e.version:e,s).inc(t,o,i).version}catch(a){return null}};e.exports=o},7059:function(e,t,s){const r=s(50560),o=(e,t,s)=>r(e,t,s)<0;e.exports=o},25200:function(e,t,s){const r=s(50560),o=(e,t,s)=>r(e,t,s)<=0;e.exports=o},32938:function(e,t,s){const r=s(53908),o=(e,t)=>new r(e,t).major;e.exports=o},46254:function(e,t,s){const r=s(53908),o=(e,t)=>new r(e,t).minor;e.exports=o},13999:function(e,t,s){const r=s(50560),o=(e,t,s)=>0!==r(e,t,s);e.exports=o},30144:function(e,t,s){const r=s(53908),o=(e,t,s=!1)=>{if(e instanceof r)return e;try{return new r(e,t)}catch(o){if(!s)return null;throw o}};e.exports=o},24493:function(e,t,s){const r=s(53908),o=(e,t)=>new r(e,t).patch;e.exports=o},31729:function(e,t,s){const r=s(30144),o=(e,t)=>{const s=r(e,t);return s&&s.prerelease.length?s.prerelease:null};e.exports=o},9970:function(e,t,s){const r=s(50560),o=(e,t,s)=>r(t,e,s);e.exports=o},74277:function(e,t,s){const r=s(40909),o=(e,t)=>e.sort(((e,s)=>r(s,e,t)));e.exports=o},97638:function(e,t,s){const r=s(78311),o=(e,t,s)=>{try{t=new r(t,s)}catch(o){return!1}return t.test(e)};e.exports=o},43927:function(e,t,s){const r=s(40909),o=(e,t)=>e.sort(((e,s)=>r(e,s,t)));e.exports=o},56953:function(e,t,s){const r=s(30144),o=(e,t)=>{const s=r(e,t);return s?s.version:null};e.exports=o},99589:function(e,t,s){const r=s(99718),o=s(16874),i=s(53908),a=s(61123),n=s(30144),l=s(56953),c=s(57414),p=s(93007),u=s(51832),f=s(32938),d=s(46254),m=s(24493),h=s(31729),v=s(50560),g=s(9970),_=s(11763),E=s(40909),y=s(43927),x=s(74277),b=s(35580),w=s(7059),$=s(94641),R=s(13999),C=s(54089),I=s(25200),S=s(72111),k=s(46170),A=s(93904),O=s(78311),T=s(97638),L=s(77631),N=s(19628),D=s(270),P=s(41261),j=s(13874),z=s(97075),F=s(75571),M=s(5342),G=s(76780),U=s(72525),V=s(75032);e.exports={parse:n,valid:l,clean:c,inc:p,diff:u,major:f,minor:d,patch:m,prerelease:h,compare:v,rcompare:g,compareLoose:_,compareBuild:E,sort:y,rsort:x,gt:b,lt:w,eq:$,neq:R,gte:C,lte:I,cmp:S,coerce:k,Comparator:A,Range:O,satisfies:T,toComparators:L,maxSatisfying:N,minSatisfying:D,minVersion:P,validRange:j,outside:z,gtr:F,ltr:M,intersects:G,simplifyRange:U,subset:V,SemVer:i,re:r.re,src:r.src,tokens:r.t,SEMVER_SPEC_VERSION:o.SEMVER_SPEC_VERSION,RELEASE_TYPES:o.RELEASE_TYPES,compareIdentifiers:a.compareIdentifiers,rcompareIdentifiers:a.rcompareIdentifiers}},16874:function(e){const t="2.0.0",s=256,r=Number.MAX_SAFE_INTEGER||9007199254740991,o=16,i=s-6,a=["major","premajor","minor","preminor","patch","prepatch","prerelease"];e.exports={MAX_LENGTH:s,MAX_SAFE_COMPONENT_LENGTH:o,MAX_SAFE_BUILD_LENGTH:i,MAX_SAFE_INTEGER:r,RELEASE_TYPES:a,SEMVER_SPEC_VERSION:t,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},57272:function(e){const t="object"===typeof process&&{NODE_ENV:"production",VUE_APP_API_HOST:"/api/v1",VUE_APP_SSO:"https://dongdong-auth.eastmoney.com/dongdong-auth/login/?client_id=vela-ssoc&redirect_uri=https://vela-ssoc.eastmoney.com",VUE_APP_VERSION:"3.0.9",BASE_URL:"/"}.NODE_DEBUG&&/\bsemver\b/i.test({NODE_ENV:"production",VUE_APP_API_HOST:"/api/v1",VUE_APP_SSO:"https://dongdong-auth.eastmoney.com/dongdong-auth/login/?client_id=vela-ssoc&redirect_uri=https://vela-ssoc.eastmoney.com",VUE_APP_VERSION:"3.0.9",BASE_URL:"/"}.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=t},61123:function(e){const t=/^[0-9]+$/,s=(e,s)=>{const r=t.test(e),o=t.test(s);return r&&o&&(e=+e,s=+s),e===s?0:r&&!o?-1:o&&!r?1:e<s?-1:1},r=(e,t)=>s(t,e);e.exports={compareIdentifiers:s,rcompareIdentifiers:r}},68794:function(e){class t{constructor(){this.max=1e3,this.map=new Map}get(e){const t=this.map.get(e);return void 0===t?void 0:(this.map.delete(e),this.map.set(e,t),t)}delete(e){return this.map.delete(e)}set(e,t){const s=this.delete(e);if(!s&&void 0!==t){if(this.map.size>=this.max){const e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}}e.exports=t},98587:function(e){const t=Object.freeze({loose:!0}),s=Object.freeze({}),r=e=>e?"object"!==typeof e?t:e:s;e.exports=r},99718:function(e,t,s){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:o,MAX_LENGTH:i}=s(16874),a=s(57272);t=e.exports={};const n=t.re=[],l=t.safeRe=[],c=t.src=[],p=t.t={};let u=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,o]],m=e=>{for(const[t,s]of d)e=e.split(`${t}*`).join(`${t}{0,${s}}`).split(`${t}+`).join(`${t}{1,${s}}`);return e},h=(e,t,s)=>{const r=m(t),o=u++;a(e,o,t),p[e]=o,c[o]=t,n[o]=new RegExp(t,s?"g":void 0),l[o]=new RegExp(r,s?"g":void 0)};h("NUMERICIDENTIFIER","0|[1-9]\\d*"),h("NUMERICIDENTIFIERLOOSE","\\d+"),h("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),h("MAINVERSION",`(${c[p.NUMERICIDENTIFIER]})\\.(${c[p.NUMERICIDENTIFIER]})\\.(${c[p.NUMERICIDENTIFIER]})`),h("MAINVERSIONLOOSE",`(${c[p.NUMERICIDENTIFIERLOOSE]})\\.(${c[p.NUMERICIDENTIFIERLOOSE]})\\.(${c[p.NUMERICIDENTIFIERLOOSE]})`),h("PRERELEASEIDENTIFIER",`(?:${c[p.NUMERICIDENTIFIER]}|${c[p.NONNUMERICIDENTIFIER]})`),h("PRERELEASEIDENTIFIERLOOSE",`(?:${c[p.NUMERICIDENTIFIERLOOSE]}|${c[p.NONNUMERICIDENTIFIER]})`),h("PRERELEASE",`(?:-(${c[p.PRERELEASEIDENTIFIER]}(?:\\.${c[p.PRERELEASEIDENTIFIER]})*))`),h("PRERELEASELOOSE",`(?:-?(${c[p.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[p.PRERELEASEIDENTIFIERLOOSE]})*))`),h("BUILDIDENTIFIER",`${f}+`),h("BUILD",`(?:\\+(${c[p.BUILDIDENTIFIER]}(?:\\.${c[p.BUILDIDENTIFIER]})*))`),h("FULLPLAIN",`v?${c[p.MAINVERSION]}${c[p.PRERELEASE]}?${c[p.BUILD]}?`),h("FULL",`^${c[p.FULLPLAIN]}$`),h("LOOSEPLAIN",`[v=\\s]*${c[p.MAINVERSIONLOOSE]}${c[p.PRERELEASELOOSE]}?${c[p.BUILD]}?`),h("LOOSE",`^${c[p.LOOSEPLAIN]}$`),h("GTLT","((?:<|>)?=?)"),h("XRANGEIDENTIFIERLOOSE",`${c[p.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),h("XRANGEIDENTIFIER",`${c[p.NUMERICIDENTIFIER]}|x|X|\\*`),h("XRANGEPLAIN",`[v=\\s]*(${c[p.XRANGEIDENTIFIER]})(?:\\.(${c[p.XRANGEIDENTIFIER]})(?:\\.(${c[p.XRANGEIDENTIFIER]})(?:${c[p.PRERELEASE]})?${c[p.BUILD]}?)?)?`),h("XRANGEPLAINLOOSE",`[v=\\s]*(${c[p.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[p.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[p.XRANGEIDENTIFIERLOOSE]})(?:${c[p.PRERELEASELOOSE]})?${c[p.BUILD]}?)?)?`),h("XRANGE",`^${c[p.GTLT]}\\s*${c[p.XRANGEPLAIN]}$`),h("XRANGELOOSE",`^${c[p.GTLT]}\\s*${c[p.XRANGEPLAINLOOSE]}$`),h("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),h("COERCE",`${c[p.COERCEPLAIN]}(?:$|[^\\d])`),h("COERCEFULL",c[p.COERCEPLAIN]+`(?:${c[p.PRERELEASE]})?`+`(?:${c[p.BUILD]})?(?:$|[^\\d])`),h("COERCERTL",c[p.COERCE],!0),h("COERCERTLFULL",c[p.COERCEFULL],!0),h("LONETILDE","(?:~>?)"),h("TILDETRIM",`(\\s*)${c[p.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",h("TILDE",`^${c[p.LONETILDE]}${c[p.XRANGEPLAIN]}$`),h("TILDELOOSE",`^${c[p.LONETILDE]}${c[p.XRANGEPLAINLOOSE]}$`),h("LONECARET","(?:\\^)"),h("CARETTRIM",`(\\s*)${c[p.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",h("CARET",`^${c[p.LONECARET]}${c[p.XRANGEPLAIN]}$`),h("CARETLOOSE",`^${c[p.LONECARET]}${c[p.XRANGEPLAINLOOSE]}$`),h("COMPARATORLOOSE",`^${c[p.GTLT]}\\s*(${c[p.LOOSEPLAIN]})$|^$`),h("COMPARATOR",`^${c[p.GTLT]}\\s*(${c[p.FULLPLAIN]})$|^$`),h("COMPARATORTRIM",`(\\s*)${c[p.GTLT]}\\s*(${c[p.LOOSEPLAIN]}|${c[p.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",h("HYPHENRANGE",`^\\s*(${c[p.XRANGEPLAIN]})\\s+-\\s+(${c[p.XRANGEPLAIN]})\\s*$`),h("HYPHENRANGELOOSE",`^\\s*(${c[p.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[p.XRANGEPLAINLOOSE]})\\s*$`),h("STAR","(<|>)?=?\\s*\\*"),h("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),h("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},75571:function(e,t,s){const r=s(97075),o=(e,t,s)=>r(e,t,">",s);e.exports=o},76780:function(e,t,s){const r=s(78311),o=(e,t,s)=>(e=new r(e,s),t=new r(t,s),e.intersects(t,s));e.exports=o},5342:function(e,t,s){const r=s(97075),o=(e,t,s)=>r(e,t,"<",s);e.exports=o},19628:function(e,t,s){const r=s(53908),o=s(78311),i=(e,t,s)=>{let i=null,a=null,n=null;try{n=new o(t,s)}catch(l){return null}return e.forEach((e=>{n.test(e)&&(i&&-1!==a.compare(e)||(i=e,a=new r(i,s)))})),i};e.exports=i},270:function(e,t,s){const r=s(53908),o=s(78311),i=(e,t,s)=>{let i=null,a=null,n=null;try{n=new o(t,s)}catch(l){return null}return e.forEach((e=>{n.test(e)&&(i&&1!==a.compare(e)||(i=e,a=new r(i,s)))})),i};e.exports=i},41261:function(e,t,s){const r=s(53908),o=s(78311),i=s(35580),a=(e,t)=>{e=new o(e,t);let s=new r("0.0.0");if(e.test(s))return s;if(s=new r("0.0.0-0"),e.test(s))return s;s=null;for(let o=0;o<e.set.length;++o){const t=e.set[o];let a=null;t.forEach((e=>{const t=new r(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":a&&!i(t,a)||(a=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!a||s&&!i(s,a)||(s=a)}return s&&e.test(s)?s:null};e.exports=a},97075:function(e,t,s){const r=s(53908),o=s(93904),{ANY:i}=o,a=s(78311),n=s(97638),l=s(35580),c=s(7059),p=s(25200),u=s(54089),f=(e,t,s,f)=>{let d,m,h,v,g;switch(e=new r(e,f),t=new a(t,f),s){case">":d=l,m=p,h=c,v=">",g=">=";break;case"<":d=c,m=u,h=l,v="<",g="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(n(e,t,f))return!1;for(let r=0;r<t.set.length;++r){const s=t.set[r];let a=null,n=null;if(s.forEach((e=>{e.semver===i&&(e=new o(">=0.0.0")),a=a||e,n=n||e,d(e.semver,a.semver,f)?a=e:h(e.semver,n.semver,f)&&(n=e)})),a.operator===v||a.operator===g)return!1;if((!n.operator||n.operator===v)&&m(e,n.semver))return!1;if(n.operator===g&&h(e,n.semver))return!1}return!0};e.exports=f},72525:function(e,t,s){const r=s(97638),o=s(50560);e.exports=(e,t,s)=>{const i=[];let a=null,n=null;const l=e.sort(((e,t)=>o(e,t,s)));for(const o of l){const e=r(o,t,s);e?(n=o,a||(a=o)):(n&&i.push([a,n]),n=null,a=null)}a&&i.push([a,null]);const c=[];for(const[r,o]of i)r===o?c.push(r):o||r!==l[0]?o?r===l[0]?c.push(`<=${o}`):c.push(`${r} - ${o}`):c.push(`>=${r}`):c.push("*");const p=c.join(" || "),u="string"===typeof t.raw?t.raw:String(t);return p.length<u.length?p:t}},75032:function(e,t,s){const r=s(78311),o=s(93904),{ANY:i}=o,a=s(97638),n=s(50560),l=(e,t,s={})=>{if(e===t)return!0;e=new r(e,s),t=new r(t,s);let o=!1;e:for(const r of e.set){for(const e of t.set){const t=u(r,e,s);if(o=o||null!==t,t)continue e}if(o)return!1}return!0},c=[new o(">=0.0.0-0")],p=[new o(">=0.0.0")],u=(e,t,s)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===i){if(1===t.length&&t[0].semver===i)return!0;e=s.includePrerelease?c:p}if(1===t.length&&t[0].semver===i){if(s.includePrerelease)return!0;t=p}const r=new Set;let o,l,u,m,h,v,g;for(const i of e)">"===i.operator||">="===i.operator?o=f(o,i,s):"<"===i.operator||"<="===i.operator?l=d(l,i,s):r.add(i.semver);if(r.size>1)return null;if(o&&l){if(u=n(o.semver,l.semver,s),u>0)return null;if(0===u&&(">="!==o.operator||"<="!==l.operator))return null}for(const i of r){if(o&&!a(i,String(o),s))return null;if(l&&!a(i,String(l),s))return null;for(const e of t)if(!a(i,String(e),s))return!1;return!0}let _=!(!l||s.includePrerelease||!l.semver.prerelease.length)&&l.semver,E=!(!o||s.includePrerelease||!o.semver.prerelease.length)&&o.semver;_&&1===_.prerelease.length&&"<"===l.operator&&0===_.prerelease[0]&&(_=!1);for(const i of t){if(g=g||">"===i.operator||">="===i.operator,v=v||"<"===i.operator||"<="===i.operator,o)if(E&&i.semver.prerelease&&i.semver.prerelease.length&&i.semver.major===E.major&&i.semver.minor===E.minor&&i.semver.patch===E.patch&&(E=!1),">"===i.operator||">="===i.operator){if(m=f(o,i,s),m===i&&m!==o)return!1}else if(">="===o.operator&&!a(o.semver,String(i),s))return!1;if(l)if(_&&i.semver.prerelease&&i.semver.prerelease.length&&i.semver.major===_.major&&i.semver.minor===_.minor&&i.semver.patch===_.patch&&(_=!1),"<"===i.operator||"<="===i.operator){if(h=d(l,i,s),h===i&&h!==l)return!1}else if("<="===l.operator&&!a(l.semver,String(i),s))return!1;if(!i.operator&&(l||o)&&0!==u)return!1}return!(o&&v&&!l&&0!==u)&&(!(l&&g&&!o&&0!==u)&&(!E&&!_))},f=(e,t,s)=>{if(!e)return t;const r=n(e.semver,t.semver,s);return r>0?e:r<0||">"===t.operator&&">="===e.operator?t:e},d=(e,t,s)=>{if(!e)return t;const r=n(e.semver,t.semver,s);return r<0?e:r>0||"<"===t.operator&&"<="===e.operator?t:e};e.exports=l},77631:function(e,t,s){const r=s(78311),o=(e,t)=>new r(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")));e.exports=o},13874:function(e,t,s){const r=s(78311),o=(e,t)=>{try{return new r(e,t).range||"*"}catch(s){return null}};e.exports=o}}]);
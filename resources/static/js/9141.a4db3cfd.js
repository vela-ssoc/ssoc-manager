"use strict";(self["webpackChunkssoc"]=self["webpackChunkssoc"]||[]).push([[9141],{89141:function(t,e,s){s.d(e,{Mw:function(){return d},Q6:function(){return r},Zo:function(){return i},a9:function(){return a},qB:function(){return c}});const o=s(10006),n=new o.Client({hosts:window.location.host+"/api/v1/ribana"});function r(){const t=n.cat.indices({headers:{Authorization:localStorage.getItem("token"),accept:"application/json;charset=utf-8"},h:["index","health","status","uuid","pri","rep","docs.count","store.size"]});return t}function i(t){const e=n.indices.delete({headers:{Authorization:localStorage.getItem("token"),accept:"application/json;charset=utf-8"},index:t});return e}function a(){const t=n.cat.nodes({headers:{Authorization:localStorage.getItem("token"),accept:"application/json;charset=utf-8"},h:["ip","name","heap.percent","heap.current","heap.max","ram.percent","ram.current","ram.max","node.role","master","cpu","load_1m","load_5m","load_15m","disk.used_percent","disk.used","disk.total"]});return t}function c(t,e,s){const o=n.search({headers:{Authorization:localStorage.getItem("token"),accept:"application/json;charset=utf-8"},body:{from:e,size:s,track_total_hits:!0,query:t,sort:[{"@timestamp":{order:"desc"}}]}});return o}class u{constructor(t){this.round=t,this.index={},this.fields=[]}add(t,e){let s=this.index[t];s?s.add(e):(s=new l(t,e),this.fields.push(s),this.index[t]=s),this.sorted=!1}sort(){this.sorted||(this.fields.forEach((t=>t.sort())),this.fields.sort(((t,e)=>t.name.localeCompare(e.name))),this.sorted=!0)}topN(t=5){this.sort();let e=[];return this.fields.forEach((s=>{e.push({name:s.name,type:s.type,values:s.topN(t)})})),{round:this.round,fields:e}}}class l{constructor(t,e){let s=new h(e);this.index={},this.name=t,this.type=typeof e,this.values=[s],this.index[e]=s}add(t){let e=this.index[t];if(this.type!==typeof t&&(this.type="unknown"),e)e.incr();else{let e=new h(t);this.values.push(e),this.index[t]=e}this.sorted=!1}sort(){this.sorted||(this.values.sort(((t,e)=>t.compare(e))),this.sorted=!0)}topN(t){return this.sort(),this.values.slice(0,t)}}class h{constructor(t){this.value=t,this.count=1}incr(){this.count++}compare(t){let e=this.count,s=t.count;if(e>s)return-1;if(e<s)return 1;let o=this.value,n=t.value;if("string"===typeof o&&"string"===typeof n)return o.localeCompare(n);if("number"===typeof o&&"number"===typeof n){if(o>n)return-1;if(o<n)return 1}return 0}}function d(t,e=500,s=5){let o=t.length>e?e:t.length,n=new u(o);for(let r=0;r<o;r++){let e=t[r];p(e,n)}for(let r of n.fields)r.values&&r.values.map((e=>{e.total=t.length}));return n.topN(s)}function p(t,e,s=""){for(let o in t){let n=t[o],r="";if(r=""===s?o:s+"."+o,Array.isArray(n))for(let t=0;t<n.length;t++){let s=n[t];"object"===typeof s?p(s,e,r):e.add(r,s)}else"object"===typeof n?("_source"===r&&(r=""),p(n,e,r)):e.add(r,n)}}}}]);